var Ti=Object.defineProperty;var Si=(e,r,t)=>r in e?Ti(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var $e=(e,r,t)=>Si(e,typeof r!="symbol"?r+"":r,t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function H(){}function Vn(e){return e()}function xt(){return Object.create(null)}function ge(e){e.forEach(Vn)}function Xn(e){return typeof e=="function"}function Se(e,r){return e!=e?r==r:e!==r||e&&typeof e=="object"||typeof e=="function"}function Ai(e){return Object.keys(e).length===0}function Gn(e,...r){if(e==null){for(const n of r)n(void 0);return H}const t=e.subscribe(...r);return t.unsubscribe?()=>t.unsubscribe():t}function Ci(e){let r;return Gn(e,t=>r=t)(),r}function jn(e,r,t){e.$$.on_destroy.push(Gn(r,t))}function qi(e,r,t){return e.set(t),r}function W(e,r){e.appendChild(r)}function Ae(e,r,t){e.insertBefore(r,t||null)}function me(e){e.parentNode&&e.parentNode.removeChild(e)}function ee(e){return document.createElement(e)}function re(e){return document.createTextNode(e)}function qe(){return re(" ")}function ki(){return re("")}function et(e,r,t,n){return e.addEventListener(r,t,n),()=>e.removeEventListener(r,t,n)}function De(e,r,t){t==null?e.removeAttribute(r):e.getAttribute(r)!==t&&e.setAttribute(r,t)}function Ri(e){return Array.from(e.childNodes)}function rt(e,r){r=""+r,e.data!==r&&(e.data=r)}function _t(e,r,t,n){t==null?e.style.removeProperty(r):e.style.setProperty(r,t,"")}let Pe;function Ne(e){Pe=e}function $n(){if(!Pe)throw new Error("Function called outside component initialization");return Pe}function Un(e){$n().$$.on_mount.push(e)}function Ii(e){$n().$$.on_destroy.push(e)}const le=[],tt=[];let ve=[];const bt=[],Mi=Promise.resolve();let nt=!1;function Di(){nt||(nt=!0,Mi.then(Wn))}function it(e){ve.push(e)}const Ue=new Set;let fe=0;function Wn(){if(fe!==0)return;const e=Pe;do{try{for(;fe<le.length;){const r=le[fe];fe++,Ne(r),Bi(r.$$)}}catch(r){throw le.length=0,fe=0,r}for(Ne(null),le.length=0,fe=0;tt.length;)tt.pop()();for(let r=0;r<ve.length;r+=1){const t=ve[r];Ue.has(t)||(Ue.add(t),t())}ve.length=0}while(le.length);for(;bt.length;)bt.pop()();nt=!1,Ue.clear(),Ne(e)}function Bi(e){if(e.fragment!==null){e.update(),ge(e.before_update);const r=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,r),e.after_update.forEach(it)}}function Fi(e){const r=[],t=[];ve.forEach(n=>e.indexOf(n)===-1?r.push(n):t.push(n)),t.forEach(n=>n()),ve=r}const Be=new Set;let ne;function Hn(){ne={r:0,c:[],p:ne}}function Qn(){ne.r||ge(ne.c),ne=ne.p}function ie(e,r){e&&e.i&&(Be.delete(e),e.i(r))}function he(e,r,t,n){if(e&&e.o){if(Be.has(e))return;Be.add(e),ne.c.push(()=>{Be.delete(e),n&&(t&&e.d(1),n())}),e.o(r)}else n&&n()}function Zn(e){e&&e.c()}function ft(e,r,t){const{fragment:n,after_update:i}=e.$$;n&&n.m(r,t),it(()=>{const o=e.$$.on_mount.map(Vn).filter(Xn);e.$$.on_destroy?e.$$.on_destroy.push(...o):ge(o),e.$$.on_mount=[]}),i.forEach(it)}function st(e,r){const t=e.$$;t.fragment!==null&&(Fi(t.after_update),ge(t.on_destroy),t.fragment&&t.fragment.d(r),t.on_destroy=t.fragment=null,t.ctx=[])}function Oi(e,r){e.$$.dirty[0]===-1&&(le.push(e),Di(),e.$$.dirty.fill(0)),e.$$.dirty[r/31|0]|=1<<r%31}function ct(e,r,t,n,i,o,u=null,a=[-1]){const s=Pe;Ne(e);const f=e.$$={fragment:null,ctx:[],props:o,update:H,not_equal:i,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(s?s.$$.context:[])),callbacks:xt(),dirty:a,skip_bound:!1,root:r.target||s.$$.root};u&&u(f.root);let c=!1;if(f.ctx=t?t(e,r.props||{},(d,l,...p)=>{const g=p.length?p[0]:l;return f.ctx&&i(f.ctx[d],f.ctx[d]=g)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](g),c&&Oi(e,d)),l}):[],f.update(),c=!0,ge(f.before_update),f.fragment=n?n(f.ctx):!1,r.target){if(r.hydrate){const d=Ri(r.target);f.fragment&&f.fragment.l(d),d.forEach(me)}else f.fragment&&f.fragment.c();r.intro&&ie(e.$$.fragment),ft(e,r.target,r.anchor),Wn()}Ne(s)}class lt{constructor(){$e(this,"$$");$e(this,"$$set")}$destroy(){st(this,1),this.$destroy=H}$on(r,t){if(!Xn(t))return H;const n=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(r){this.$$set&&!Ai(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}}const zi="4";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zi);function Yi(e){let r,t,n,i,o;return{c(){r=ee("button"),t=re("count is "),n=re(e[0])},m(u,a){Ae(u,r,a),W(r,t),W(r,n),i||(o=et(r,"click",e[1]),i=!0)},p(u,[a]){a&1&&rt(n,u[0])},i:H,o:H,d(u){u&&me(r),i=!1,o()}}}function Vi(e,r,t){let n=0;return[n,()=>{t(0,n+=1)}]}class Xi extends lt{constructor(r){super(),ct(this,r,Vi,Yi,Se,{})}}const se=[];function Jn(e,r=H){let t;const n=new Set;function i(a){if(Se(e,a)&&(e=a,t)){const s=!se.length;for(const f of n)f[1](),se.push(f,e);if(s){for(let f=0;f<se.length;f+=2)se[f][0](se[f+1]);se.length=0}}}function o(a){i(a(e))}function u(a,s=H){const f=[a,s];return n.add(f),n.size===1&&(t=r(i,o)||H),a(e),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:u}}const Kn=Jn([]),ot=Jn(!0);var Et=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Gi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ce={random:ei,randomIterator:ji};function ei(e){var r=typeof e=="number"?e:+new Date,t=function(){return r=r+2127912214+(r<<12)&4294967295,r=(r^3345072700^r>>>19)&4294967295,r=r+374761393+(r<<5)&4294967295,r=(r+3550635116^r<<9)&4294967295,r=r+4251993797+(r<<3)&4294967295,r=(r^3042594569^r>>>16)&4294967295,(r&268435455)/268435456};return{next:function(n){return Math.floor(t()*n)},nextDouble:function(){return t()}}}function ji(e,r){var t=r||ei();if(typeof t.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(n){var i,o,u;for(i=e.length-1;i>0;--i)o=t.next(i+1),u=e[o],e[o]=e[i],e[i]=u,n(u);e.length&&n(e[0])},shuffle:function(){var n,i,o;for(n=e.length-1;n>0;--n)i=t.next(n+1),o=e[i],e[i]=e[n],e[n]=o;return e}}}var We,Nt;function ye(){if(Nt)return We;Nt=1,We=e;function e(r,t){var n;if(r||(r={}),t){for(n in t)if(t.hasOwnProperty(n)){var i=r.hasOwnProperty(n),o=typeof t[n],u=!i||typeof r[n]!==o;u?r[n]=t[n]:o==="object"&&(r[n]=e(r[n],t[n]))}}return r}return We}var He,Lt;function ae(){if(Lt)return He;Lt=1,He=function(t){r(t);var n=e(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};function e(t){var n=Object.create(null);return{on:function(i,o,u){if(typeof o!="function")throw new Error("callback is expected to be a function");var a=n[i];return a||(a=n[i]=[]),a.push({callback:o,ctx:u}),t},off:function(i,o){var u=typeof i=="undefined";if(u)return n=Object.create(null),t;if(n[i]){var a=typeof o!="function";if(a)delete n[i];else for(var s=n[i],f=0;f<s.length;++f)s[f].callback===o&&s.splice(f,1)}return t},fire:function(i){var o=n[i];if(!o)return t;var u;arguments.length>1&&(u=Array.prototype.splice.call(arguments,1));for(var a=0;a<o.length;++a){var s=o[a];s.callback.apply(s.ctx,u)}return t}}}function r(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],i=0;i<n.length;++i)if(t.hasOwnProperty(n[i]))throw new Error("Subject cannot be eventified, since it already has property '"+n[i]+"'")}return He}var Qe,Pt;function $i(){return Pt||(Pt=1,Qe="0.10.1"),Qe}var Ze,Tt;function dt(){if(Tt)return Ze;Tt=1,Ze=r;var e=ae();function r(a){a=a||{},"uniqueLinkId"in a&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now own each graph
is considered to be not a multigraph by default (each edge is unique).`),a.multigraph=a.uniqueLinkId),a.multigraph===void 0&&(a.multigraph=!1);var s=typeof Object.create=="function"?Object.create(null):{},f=[],c={},d=0,l=0,p=ue(),g=a.multigraph?B:C,y=[],v=X,h=X,m=X,E=X,w={addNode:S,addLink:R,removeLink:_,removeNode:k,getNode:L,getNodesCount:function(){return d},getLinksCount:function(){return f.length},getLinks:P,forEachNode:p,forEachLinkedNode:F,forEachLink:q,beginUpdate:m,endUpdate:E,clear:x,hasLink:T,hasNode:L,getLink:T};return e(w),N(),w;function N(){var I=w.on;w.on=M;function M(){return w.beginUpdate=m=U,w.endUpdate=E=G,v=A,h=b,w.on=I,I.apply(w,arguments)}}function A(I,M){y.push({link:I,changeType:M})}function b(I,M){y.push({node:I,changeType:M})}function S(I,M){if(I===void 0)throw new Error("Invalid node identifier");m();var Y=L(I);return Y?(Y.data=M,h(Y,"update")):(Y=new n(I,M),d++,h(Y,"add")),s[I]=Y,E(),Y}function L(I){return s[I]}function k(I){var M=L(I);if(!M)return!1;m();var Y=M.links;if(Y){M.links=null;for(var V=0;V<Y.length;++V)_(Y[V])}return delete s[I],d--,h(M,"remove"),E(),!0}function R(I,M,Y){m();var V=L(I)||S(I),j=L(M)||S(M),$=g(I,M,Y);return f.push($),i(V,$),I!==M&&i(j,$),v($,"add"),E(),$}function C(I,M,Y){var V=u(I,M);return new o(I,M,Y,V)}function B(I,M,Y){var V=u(I,M),j=c.hasOwnProperty(V);if(j||T(I,M)){j||(c[V]=0);var $="@"+ ++c[V];V=u(I+$,M+$)}return new o(I,M,Y,V)}function P(I){var M=L(I);return M?M.links:null}function _(I){if(!I)return!1;var M=t(I,f);if(M<0)return!1;m(),f.splice(M,1);var Y=L(I.fromId),V=L(I.toId);return Y&&(M=t(I,Y.links),M>=0&&Y.links.splice(M,1)),V&&(M=t(I,V.links),M>=0&&V.links.splice(M,1)),v(I,"remove"),E(),!0}function T(I,M){var Y=L(I),V;if(!Y||!Y.links)return null;for(V=0;V<Y.links.length;++V){var j=Y.links[V];if(j.fromId===I&&j.toId===M)return j}return null}function x(){m(),p(function(I){k(I.id)}),E()}function q(I){var M,Y;if(typeof I=="function")for(M=0,Y=f.length;M<Y;++M)I(f[M])}function F(I,M,Y){var V=L(I);if(V&&V.links&&typeof M=="function")return Y?Q(V.links,I,M):O(V.links,I,M)}function O(I,M,Y){for(var V,j=0;j<I.length;++j){var $=I[j],je=$.fromId===M?$.toId:$.fromId;if(V=Y(s[je],$),V)return!0}}function Q(I,M,Y){for(var V,j=0;j<I.length;++j){var $=I[j];if($.fromId===M&&(V=Y(s[$.toId],$),V))return!0}}function X(){}function U(){l+=1}function G(){l-=1,l===0&&y.length>0&&(w.fire("changed",y),y.length=0)}function ue(){return Object.keys?we:Ge}function we(I){if(typeof I=="function"){for(var M=Object.keys(s),Y=0;Y<M.length;++Y)if(I(s[M[Y]]))return!0}}function Ge(I){if(typeof I=="function"){var M;for(M in s)if(I(s[M]))return!0}}}function t(a,s){if(!s)return-1;if(s.indexOf)return s.indexOf(a);var f=s.length,c;for(c=0;c<f;c+=1)if(s[c]===a)return c;return-1}function n(a,s){this.id=a,this.links=null,this.data=s}function i(a,s){a.links?a.links.push(s):a.links=[s]}function o(a,s,f,c){this.fromId=a,this.toId=s,this.data=f,this.id=c}function u(a,s){return a.toString()+"👉 "+s.toString()}return Ze}var Je,St;function Ui(){if(St)return Je;St=1,Je=r;var e=dt();function r(n,i,o){var u;i=i||t,o=o||t,typeof n=="string"?u=JSON.parse(n):u=n;var a=e(),s;if(u.links===void 0||u.nodes===void 0)throw new Error("Cannot load graph without links and nodes");for(s=0;s<u.nodes.length;++s){var f=i(u.nodes[s]);if(!f.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");a.addNode(f.id,f.data)}for(s=0;s<u.links.length;++s){var c=o(u.links[s]);if(!c.hasOwnProperty("fromId")||!c.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");a.addLink(c.fromId,c.toId,c.data)}return a}function t(n){return n}return Je}var Ke,At;function Wi(){if(At)return Ke;At=1,Ke=e;function e(r,t,n){var i={nodes:[],links:[]},o=t||f,u=n||c;return r.forEachNode(a),r.forEachLink(s),JSON.stringify(i);function a(d){i.nodes.push(o(d))}function s(d){i.links.push(u(d))}function f(d){var l={id:d.id};return d.data!==void 0&&(l.data=d.data),l}function c(d){var l={fromId:d.fromId,toId:d.toId};return d.data!==void 0&&(l.data=d.data),l}}return Ke}var ce={},er,Ct;function Hi(){if(Ct)return er;Ct=1,er=e;function e(i,o){var u,a=Object.create(null);if(o=(o||"both").toLowerCase(),o==="both"||o==="inout")u=n;else if(o==="in")u=r;else if(o==="out")u=t;else throw new Error("Expected centrality degree kind is: in, out or both");return i.forEachNode(s),a;function s(f){var c=i.getLinks(f.id);a[f.id]=u(c,f.id)}}function r(i,o){var u=0;if(!i)return u;for(var a=0;a<i.length;a+=1)u+=i[a].toId===o?1:0;return u}function t(i,o){var u=0;if(!i)return u;for(var a=0;a<i.length;a+=1)u+=i[a].fromId===o?1:0;return u}function n(i){return i?i.length:0}return er}var rr,qt;function Qi(){if(qt)return rr;qt=1,rr=e;function e(r,t){var n=[],i=[],o=Object.create(null),u=Object.create(null),a=Object.create(null),s=Object.create(null),f,c=Object.create(null);return r.forEachNode(l),r.forEachNode(p),t||Object.keys(c).forEach(d),c;function d(h){c[h]/=2}function l(h){c[h.id]=0}function p(h){f=h.id,v(f),g()}function g(){for(r.forEachNode(y);i.length;){for(var h=i.pop(),m=(1+s[h])/a[h],E=o[h],w=0;w<E.length;++w){var N=E[w];s[N]+=a[N]*m}h!==f&&(c[h]+=s[h])}}function y(h){s[h.id]=0}function v(h){for(r.forEachNode(w),u[h]=0,a[h]=1,n.push(h);n.length;){var m=n.shift();i.push(m),r.forEachLinkedNode(m,E,t)}function E(A){N(A.id)}function w(A){var b=A.id;o[b]=[],u[b]=-1,a[b]=0}function N(A){u[A]===-1&&(u[A]=u[m]+1,n.push(A)),u[A]===u[m]+1&&(a[A]+=a[m],o[A].push(m))}}}return rr}var tr,kt;function Zi(){if(kt)return tr;kt=1,tr=e;function e(r,t){var n=[],i=Object.create(null),o,u=Object.create(null);return r.forEachNode(a),r.forEachNode(s),u;function a(d){u[d.id]=0}function s(d){o=d.id,c(o),f()}function f(){var d=Object.keys(i).map(function(g){return i[g]}).filter(function(g){return g!==-1}),l=d.length,p=d.reduce(function(g,y){return g+y});p>0?u[o]=(l-1)/p:u[o]=0}function c(d){for(r.forEachNode(p),i[d]=0,n.push(d);n.length;){var l=n.shift();r.forEachLinkedNode(l,g,t)}function p(y){var v=y.id;i[v]=-1}function g(y){var v=y.id;i[v]===-1&&(i[v]=i[l]+1,n.push(v))}}}return tr}var nr,Rt;function Ji(){if(Rt)return nr;Rt=1,nr=e;function e(r,t){var n=[],i=Object.create(null),o,u=Object.create(null);return r.forEachNode(a),r.forEachNode(s),u;function a(d){u[d.id]=0}function s(d){o=d.id,c(o),f()}function f(){var d=0;Object.keys(i).forEach(function(l){var p=i[l];d<p&&(d=p)}),u[o]=d}function c(d){for(r.forEachNode(p),i[d]=0,n.push(d);n.length;){var l=n.shift();r.forEachLinkedNode(l,g,t)}function p(y){var v=y.id;i[v]=-1}function g(y){var v=y.id;i[v]===-1&&(i[v]=i[l]+1,n.push(v))}}}return nr}var It;function Ki(){return It||(It=1,ce.degree=Hi(),ce.betweenness=Qi(),ce.closeness=Zi(),ce.eccentricity=Ji()),ce}var ir,Mt;function eo(){if(Mt)return ir;Mt=1;var e=Ki();ir=r;function r(){return{betweennessCentrality:t,degreeCentrality:n}}function t(o){var u=e.betweenness(o);return i(u)}function n(o,u){var a=e.degree(o,u);return i(a)}function i(o){return Object.keys(o).sort(u).map(a);function u(s,f){return o[f]-o[s]}function a(s){return{key:s,value:o[s]}}}return ir}var or,Dt;function ro(){if(Dt)return or;Dt=1,or=e;function e(){return{density:function(r,t){var n=r.getNodesCount();return n===0?NaN:t?r.getLinksCount()/(n*(n-1)):2*r.getLinksCount()/(n*(n-1))}}}return or}var ar,Bt;function ri(){if(Bt)return ar;Bt=1,ar=e;function e(r,t,n,i,o,u,a,s){var f,c,d,l,p,g,y,v,h,m,E,w,N,A={x:0,y:0};return f=i-t,d=r-n,p=n*t-r*i,h=f*o+d*u+p,m=f*a+d*s+p,h!==0&&m!==0&&h>=0==m>=4||(c=s-u,l=o-a,g=a*u-o*s,y=c*r+l*t+g,v=c*n+l*i+g,y!==0&&v!==0&&y>=0==v>=0)||(E=f*l-c*d,E===0)?null:(w=E<0?-E/2:E/2,w=0,N=d*g-l*p,A.x=(N<0?N-w:N+w)/E,N=c*p-f*g,A.y=(N<0?N-w:N+w)/E,A)}return ar}var ur,Ft;function to(){if(Ft)return ur;Ft=1;var e=ri();ur=r;function r(t,n,i,o,u,a,s,f){return e(t,n,t,o,u,a,s,f)||e(t,o,i,o,u,a,s,f)||e(i,o,i,n,u,a,s,f)||e(i,n,t,n,u,a,s,f)}return ur}var fr,Ot;function Ve(){if(Ot)return fr;Ot=1,fr=e;function e(n){return{createProgram:o,extendArray:u,copyArrayPart:r,swapArrayPart:t,getLocations:a,context:n};function i(s,f){var c=n.createShader(f);if(n.shaderSource(c,s),n.compileShader(c),!n.getShaderParameter(c,n.COMPILE_STATUS)){var d=n.getShaderInfoLog(c);throw window.alert(d),d}return c}function o(s,f){var c=n.createProgram(),d=i(s,n.VERTEX_SHADER),l=i(f,n.FRAGMENT_SHADER);if(n.attachShader(c,d),n.attachShader(c,l),n.linkProgram(c),!n.getProgramParameter(c,n.LINK_STATUS)){var p=n.getShaderInfoLog(c);throw window.alert(p),p}return c}function u(s,f,c){if((f+1)*c>s.length){var d=new Float32Array(s.length*c*2);return d.set(s),d}return s}function a(s,f){for(var c={},d=0;d<f.length;++d){var l=f[d],p=-1;if(l[0]==="a"&&l[1]==="_"){if(p=n.getAttribLocation(s,l),p===-1)throw new Error("Program doesn't have required attribute: "+l);c[l.slice(2)]=p}else if(l[0]==="u"&&l[1]==="_"){if(p=n.getUniformLocation(s,l),p===null)throw new Error("Program doesn't have required uniform: "+l);c[l.slice(2)]=p}else throw new Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'")}return c}}function r(n,i,o,u){for(var a=0;a<u;++a)n[i+a]=n[o+a]}function t(n,i,o,u){for(var a=0;a<u;++a){var s=n[i+a];n[i+a]=n[o+a],n[o+a]=s}}return fr}var sr,zt;function ti(){if(zt)return sr;zt=1,sr=e();function e(){return{on:r,off:r,stop:r}}function r(){}return sr}var cr,Yt;function ni(){if(Yt)return cr;Yt=1;var e=ti();cr=r();function r(){return typeof document===void 0?e:{on:t,off:n}}function t(i,o){document.addEventListener(i,o)}function n(i,o){document.removeEventListener(i,o)}return cr}var lr,Vt;function ii(){if(Vt)return lr;Vt=1;var e=ni();lr=r;function r(t){if(t.webglInputEvents)return t.webglInputEvents;var n=null,i=[],o=[],u=[],a=[],s=[],f=[],c=[],d,l,p=t.getGraphicsRoot();B(p);var g={mouseEnter:b,mouseLeave:A,mouseDown:N,mouseUp:w,mouseMove:E,click:m,dblClick:h,mouseCapture:v,releaseMouseCapture:y};return t.webglInputEvents=g,g;function y(){n=null}function v(P){n=P}function h(P){return typeof P=="function"&&c.push(P),g}function m(P){return typeof P=="function"&&f.push(P),g}function E(P){return typeof P=="function"&&s.push(P),g}function w(P){return typeof P=="function"&&a.push(P),g}function N(P){return typeof P=="function"&&u.push(P),g}function A(P){return typeof P=="function"&&o.push(P),g}function b(P){return typeof P=="function"&&i.push(P),g}function S(P,_,T){if(P&&P.size){var x=P.position,q=P.size;return x.x-q<_&&_<x.x+q&&x.y-q<T&&T<x.y+q}return!0}function L(P){return t.getNodeAtClientPos(P,S)}function k(P){P.stopPropagation?P.stopPropagation():P.cancelBubble=!0}function R(P){return k(P),!1}function C(P,_){var T,x;for(T=0;T<P.length;T+=1)if(x=P[T].apply(void 0,_),x)return!0}function B(P){var _={x:0,y:0},T=null,x=1,q=+new Date,F=function(X){C(s,[T,X]),_.x=X.clientX,_.y=X.clientY},O=function(){e.off("mousemove",F),e.off("mouseup",O)},Q=function(){l=P.getBoundingClientRect()};window.addEventListener("resize",Q),Q(),P.addEventListener("mousemove",function(X){if(!n){x++%7===0&&(Q(),x=1);var U=!1,G;_.x=X.clientX-l.left,_.y=X.clientY-l.top,G=L(_),G&&T!==G?(T&&C(o,[T]),T=G,U=U||C(i,[T])):G===null&&T!==G&&(U=U||C(o,[T]),T=null),U&&k(X)}}),P.addEventListener("mousedown",function(X){var U=!1,G;Q(),_.x=X.clientX-l.left,_.y=X.clientY-l.top,G=[L(_),X],G[0]?(U=C(u,G),e.on("mousemove",F),e.on("mouseup",O),d=window.document.onselectstart,window.document.onselectstart=R,T=G[0]):T=null,U&&k(X)}),P.addEventListener("mouseup",function(X){var U=+new Date,G;_.x=X.clientX-l.left,_.y=X.clientY-l.top;var ue=L(_),we=ue===T;G=[ue||T,X],G[0]&&(window.document.onselectstart=d,U-q<400&&we?C(c,G):C(f,G),q=U,C(a,G)&&k(X))})}}return lr}var ke={exports:{}},xe={exports:{}},Xt;function no(){if(Xt)return xe.exports;Xt=1,xe.exports=e,xe.exports.random=e,xe.exports.randomIterator=o;function e(u){var a=typeof u=="number"?u:+new Date;return new r(a)}function r(u){this.seed=u}r.prototype.next=i,r.prototype.nextDouble=n,r.prototype.uniform=n,r.prototype.gaussian=t;function t(){var u,a,s;do a=this.nextDouble()*2-1,s=this.nextDouble()*2-1,u=a*a+s*s;while(u>=1||u===0);return a*Math.sqrt(-2*Math.log(u)/u)}function n(){var u=this.seed;return u=u+2127912214+(u<<12)&4294967295,u=(u^3345072700^u>>>19)&4294967295,u=u+374761393+(u<<5)&4294967295,u=(u+3550635116^u<<9)&4294967295,u=u+4251993797+(u<<3)&4294967295,u=(u^3042594569^u>>>16)&4294967295,this.seed=u,(u&268435455)/268435456}function i(u){return Math.floor(this.nextDouble()*u)}function o(u,a){var s=a||e();if(typeof s.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:c,shuffle:f};function f(){var d,l,p;for(d=u.length-1;d>0;--d)l=s.next(d+1),p=u[l],u[l]=u[d],u[d]=p;return u}function c(d){var l,p,g;for(l=u.length-1;l>0;--l)p=s.next(l+1),g=u[p],u[p]=u[l],u[l]=g,d(g);u.length&&d(u[0])}}return xe.exports}var Gt;function io(){if(Gt)return ke.exports;Gt=1;var e=dt();ke.exports=r(e),ke.exports.factory=r;function r(t){return{ladder:n,complete:o,completeBipartite:u,balancedBinTree:c,path:a,circularLadder:i,grid:s,grid3:f,noLinks:d,wattsStrogatz:p,cliqueCircle:l};function n(g){if(!g||g<0)throw new Error("Invalid number of nodes");var y=t(),v;for(v=0;v<g-1;++v)y.addLink(v,v+1),y.addLink(g+v,g+v+1),y.addLink(v,g+v);return y.addLink(g-1,2*g-1),y}function i(g){if(!g||g<0)throw new Error("Invalid number of nodes");var y=n(g);return y.addLink(0,g-1),y.addLink(g,2*g-1),y}function o(g){if(!g||g<1)throw new Error("At least two nodes are expected for complete graph");var y=t(),v,h;for(v=0;v<g;++v)for(h=v+1;h<g;++h)v!==h&&y.addLink(v,h);return y}function u(g,y){if(!g||!y||g<0||y<0)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var v=t(),h,m;for(h=0;h<g;++h)for(m=g;m<g+y;++m)v.addLink(h,m);return v}function a(g){if(!g||g<0)throw new Error("Invalid number of nodes");var y=t(),v;for(y.addNode(0),v=1;v<g;++v)y.addLink(v-1,v);return y}function s(g,y){if(g<1||y<1)throw new Error("Invalid number of nodes in grid graph");var v=t(),h,m;if(g===1&&y===1)return v.addNode(0),v;for(h=0;h<g;++h)for(m=0;m<y;++m){var E=h+m*g;h>0&&v.addLink(E,h-1+m*g),m>0&&v.addLink(E,h+(m-1)*g)}return v}function f(g,y,v){if(g<1||y<1||v<1)throw new Error("Invalid number of nodes in grid3 graph");var h=t(),m,E,w;if(g===1&&y===1&&v===1)return h.addNode(0),h;for(w=0;w<v;++w)for(m=0;m<g;++m)for(E=0;E<y;++E){var N=w*g*y,A=m+E*g+N;m>0&&h.addLink(A,m-1+E*g+N),E>0&&h.addLink(A,m+(E-1)*g+N),w>0&&h.addLink(A,m+E*g+(w-1)*g*y)}return h}function c(g){if(g<0)throw new Error("Invalid number of nodes in balanced tree");var y=t(),v=Math.pow(2,g),h;for(g===0&&y.addNode(1),h=1;h<v;++h){var m=h,E=m*2,w=m*2+1;y.addLink(m,E),y.addLink(m,w)}return y}function d(g){if(g<0)throw new Error("Number of nodes should be >= 0");var y=t(),v;for(v=0;v<g;++v)y.addNode(v);return y}function l(g,y){if(g<1)throw new Error("Invalid number of cliqueCount in cliqueCircle");if(y<1)throw new Error("Invalid number of cliqueSize in cliqueCircle");for(var v=t(),h=0;h<g;++h)m(y,h*y),h>0&&v.addLink(h*y,h*y-1);return v.addLink(0,v.getNodesCount()-1),v;function m(E,w){for(var N=0;N<E;++N)v.addNode(N+w);for(var N=0;N<E;++N)for(var A=N+1;A<E;++A)v.addLink(N+w,A+w)}}function p(g,y,v,h){if(y>=g)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var m=no().random(h||42),E=t(),w,N;for(w=0;w<g;++w)E.addNode(w);for(var A=Math.floor(y/2+1),b=1;b<A;++b)for(w=0;w<g;++w)N=(b+w)%g,E.addLink(w,N);for(b=1;b<A;++b)for(w=0;w<g;++w)if(m.nextDouble()<v){var S=w;N=(b+w)%g;var L=m.next(g),k=L===S||E.hasLink(S,L);if(k&&E.getLinks(S).length===g-1)continue;for(;k;)L=m.next(g),k=L===S||E.hasLink(S,L);var R=E.hasLink(S,N);E.removeLink(R),E.addLink(S,L)}return E}}return ke.exports}var dr,jt;function oi(){if(jt)return dr;jt=1,dr=e();function e(){if(typeof window=="undefined"||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var r=window.navigator.userAgent.toLowerCase(),t=/(webkit)[ \/]([\w.]+)/,n=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(msie) ([\w.]+)/,o=/(mozilla)(?:.*? rv:([\w.]+))?/,u=t.exec(r)||n.exec(r)||i.exec(r)||r.indexOf("compatible")<0&&o.exec(r)||[];return{browser:u[1]||"",version:u[2]||"0"}}return dr}var vr,$t;function ai(){if($t)return vr;$t=1,vr=e;function e(r){var t=0,n=0;if(r.offsetParent)do t+=r.offsetLeft,n+=r.offsetTop;while((r=r.offsetParent)!==null);return[t,n]}return vr}var hr,Ut;function vt(){if(Ut)return hr;Ut=1,hr=n;var e=ni(),r=oi(),t=ai();function n(i){var o,u,a,s,f,c,d=0,l=0,p,g=!1,y=0,v=function(_){var T=0,x=0;return _=_||window.event,_.pageX||_.pageY?(T=_.pageX,x=_.pageY):(_.clientX||_.clientY)&&(T=_.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,x=_.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop),[T,x]},h=function(_,T,x){u&&u(_,{x:T-d,y:x-l}),d=T,l=x},m=function(_){_.stopPropagation?_.stopPropagation():_.cancelBubble=!0},E=function(_){_.preventDefault&&_.preventDefault()},w=function(_){return m(_),!1},N=function(_){_=_||window.event,h(_,_.clientX,_.clientY)},A=function(_){if(_=_||window.event,g)return m(_),!1;var T=_.button===1&&window.event!==null||_.button===0;if(T)return d=_.clientX,l=_.clientY,p=_.target||_.srcElement,o&&o(_,{x:d,y:l}),e.on("mousemove",N),e.on("mouseup",b),m(_),f=window.document.onselectstart,c=window.document.ondragstart,window.document.onselectstart=w,p.ondragstart=w,!1},b=function(_){_=_||window.event,e.off("mousemove",N),e.off("mouseup",b),window.document.onselectstart=f,p.ondragstart=c,p=null,a&&a(_)},S=function(_){if(typeof s=="function"){_=_||window.event,_.preventDefault&&_.preventDefault(),_.returnValue=!1;var T,x=v(_),q=t(i),F={x:x[0]-q[0],y:x[1]-q[1]};_.wheelDelta?T=_.wheelDelta/360:T=_.detail/-9,s(_,T,F)}},L=function(_){!s&&_?r.browser==="webkit"?i.addEventListener("mousewheel",S,!1):i.addEventListener("DOMMouseScroll",S,!1):s&&!_&&(r.browser==="webkit"?i.removeEventListener("mousewheel",S,!1):i.removeEventListener("DOMMouseScroll",S,!1)),s=_},k=function(_,T){return(_.clientX-T.clientX)*(_.clientX-T.clientX)+(_.clientY-T.clientY)*(_.clientY-T.clientY)},R=function(_){if(_.touches.length===1){m(_);var T=_.touches[0];h(_,T.clientX,T.clientY)}else if(_.touches.length===2){var x=k(_.touches[0],_.touches[1]),q=0;x<y?q=-1:x>y&&(q=1),s(_,q,{x:_.touches[0].clientX,y:_.touches[0].clientY}),y=x,m(_),E(_)}},C=function(_){g=!1,e.off("touchmove",R),e.off("touchend",C),e.off("touchcancel",C),p=null,a&&a(_)},B=function(_,T){m(_),E(_),d=T.clientX,l=T.clientY,p=_.target||_.srcElement,o&&o(_,{x:d,y:l}),g||(g=!0,e.on("touchmove",R),e.on("touchend",C),e.on("touchcancel",C))},P=function(_){if(_.touches.length===1)return B(_,_.touches[0]);_.touches.length===2&&(m(_),E(_),y=k(_.touches[0],_.touches[1]))};return i.addEventListener("mousedown",A),i.addEventListener("touchstart",P),{onStart:function(_){return o=_,this},onDrag:function(_){return u=_,this},onStop:function(_){return a=_,this},onScroll:function(_){return L(_),this},release:function(){i.removeEventListener("mousedown",A),i.removeEventListener("touchstart",P),e.off("mousemove",N),e.off("mouseup",b),e.off("touchmove",R),e.off("touchend",C),e.off("touchcancel",C),L(null)}}}return hr}var pr,Wt;function ht(){if(Wt)return pr;Wt=1,pr=r;var e=vt();function r(t,n){var i={};return{bindDragNDrop:o};function o(u,a){var s;if(a){var f=n.getNodeUI(u.id);s=e(f),typeof a.onStart=="function"&&s.onStart(a.onStart),typeof a.onDrag=="function"&&s.onDrag(a.onDrag),typeof a.onStop=="function"&&s.onStop(a.onStop),i[u.id]=s}else(s=i[u.id])&&(s.release(),delete i[u.id])}}return pr}var gr,Ht;function ui(){if(Ht)return gr;Ht=1,gr=r;var e=ii();function r(t,n){var i=e(n),o=null,u={},a={x:0,y:0};return i.mouseDown(function(s,f){o=s,a.x=f.clientX,a.y=f.clientY,i.mouseCapture(o);var c=u[s.id];return c&&c.onStart&&c.onStart(f,a),!0}).mouseUp(function(s){i.releaseMouseCapture(o),o=null;var f=u[s.id];return f&&f.onStop&&f.onStop(),!0}).mouseMove(function(s,f){if(o){var c=u[o.id];return c&&c.onDrag&&c.onDrag(f,{x:f.clientX-a.x,y:f.clientY-a.y}),a.x=f.clientX,a.y=f.clientY,!0}}),{bindDragNDrop:function(s,f){u[s.id]=f,f||delete u[s.id]}}}return gr}var mr,Qt;function fi(){if(Qt)return mr;Qt=1,mr=e();function e(){var t=0,n=["ms","moz","webkit","o"],i,o;for(typeof window!="undefined"?o=window:typeof Et!="undefined"?o=Et:o={setTimeout:r,clearTimeout:r},i=0;i<n.length&&!o.requestAnimationFrame;++i){var u=n[i];o.requestAnimationFrame=o[u+"RequestAnimationFrame"],o.cancelAnimationFrame=o[u+"CancelAnimationFrame"]||o[u+"CancelRequestAnimationFrame"]}return o.requestAnimationFrame||(o.requestAnimationFrame=s),o.cancelAnimationFrame||(o.cancelAnimationFrame=f),a;function a(c){var d;return l(),{stop:p,restart:g};function l(){d=o.requestAnimationFrame(l),c()||p()}function p(){o.cancelAnimationFrame(d),d=0}function g(){d||l()}}function s(c){var d=new Date().getTime(),l=Math.max(0,16-(d-t)),p=o.setTimeout(function(){c(d+l)},l);return t=d+l,p}function f(c){o.clearTimeout(c)}}function r(){}return mr}var yr,Zt;function si(){if(Zt)return yr;Zt=1,yr=e;function e(r){if(!r)throw{message:"Cannot get dimensions of undefined container"};var t=r.clientWidth,n=r.clientHeight;return{left:0,top:0,width:t,height:n}}return yr}var wr,Jt;function oo(){if(Jt)return wr;Jt=1;var e=ae();wr=r;function r(t){if(console.log("This method is deprecated. Please use Viva.events() instead"),!t)return t;var n=t.on!==void 0||t.off!==void 0||t.fire!==void 0;if(n)return{extend:function(){return t},on:t.on,stop:t.off};return{extend:i,on:t.on,stop:t.off};function i(){var o=e(t);return o.addEventListener=o.on,o}}return wr}var Re={exports:{}},xr,Kt;function ao(){if(Kt)return xr;Kt=1,xr=e;function e(r,t,n,i,o){this.from=r,this.to=t,this.length=n,this.coeff=i,this.weight=typeof o=="number"?o:1}return xr}var _r,en;function pt(){if(en)return _r;en=1,_r=e;function e(t,n,i){var o=Object.prototype.toString.call(i)==="[object Array]";if(o)for(var u=0;u<i.length;++u)r(t,n,i[u]);else for(var a in t)r(t,n,a)}function r(t,n,i){if(t.hasOwnProperty(i)){if(typeof n[i]=="function")return;n[i]=function(o){return o!==void 0?(t[i]=o,n):t[i]}}}return _r}var br,rn;function uo(){return rn||(rn=1,br=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}),br}var Er,tn;function fo(){if(tn)return Er;tn=1,Er=e;function e(){this.stack=[],this.popIdx=0}e.prototype={isEmpty:function(){return this.popIdx===0},push:function(t,n){var i=this.stack[this.popIdx];i?(i.node=t,i.body=n):this.stack[this.popIdx]=new r(t,n),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};function r(t,n){this.node=t,this.body=n}return Er}var Nr,nn;function so(){return nn||(nn=1,Nr=function(r,t){var n=Math.abs(r.x-t.x),i=Math.abs(r.y-t.y);return n<1e-8&&i<1e-8}),Nr}var Lr,on;function co(){if(on)return Lr;on=1,Lr=function(t){t=t||{},t.gravity=typeof t.gravity=="number"?t.gravity:-1,t.theta=typeof t.theta=="number"?t.theta:.8;var n=Ce.random(1984),i=uo(),o=fo(),u=so(),a=t.gravity,s=[],f=new o,c=t.theta,d=[],l=0,p=g();return{insertBodies:v,getRoot:function(){return p},updateBodyForce:y,options:function(m){return m?(typeof m.gravity=="number"&&(a=m.gravity),typeof m.theta=="number"&&(c=m.theta),this):{gravity:a,theta:c}}};function g(){var m=d[l];return m?(m.quad0=null,m.quad1=null,m.quad2=null,m.quad3=null,m.body=null,m.mass=m.massX=m.massY=0,m.left=m.right=m.top=m.bottom=0):(m=new i,d[l]=m),++l,m}function y(m){var E=s,w,N,A,b,S=0,L=0,k=1,R=0,C=1;for(E[0]=p;k;){var B=E[R],P=B.body;k-=1,R+=1;var _=P!==m;P&&_?(N=P.pos.x-m.pos.x,A=P.pos.y-m.pos.y,b=Math.sqrt(N*N+A*A),b===0&&(N=(n.nextDouble()-.5)/50,A=(n.nextDouble()-.5)/50,b=Math.sqrt(N*N+A*A)),w=a*P.mass*m.mass/(b*b*b),S+=w*N,L+=w*A):_&&(N=B.massX/B.mass-m.pos.x,A=B.massY/B.mass-m.pos.y,b=Math.sqrt(N*N+A*A),b===0&&(N=(n.nextDouble()-.5)/50,A=(n.nextDouble()-.5)/50,b=Math.sqrt(N*N+A*A)),(B.right-B.left)/b<c?(w=a*B.mass*m.mass/(b*b*b),S+=w*N,L+=w*A):(B.quad0&&(E[C]=B.quad0,k+=1,C+=1),B.quad1&&(E[C]=B.quad1,k+=1,C+=1),B.quad2&&(E[C]=B.quad2,k+=1,C+=1),B.quad3&&(E[C]=B.quad3,k+=1,C+=1)))}m.force.x+=S,m.force.y+=L}function v(m){var E=Number.MAX_VALUE,w=Number.MAX_VALUE,N=Number.MIN_VALUE,A=Number.MIN_VALUE,b,S=m.length;for(b=S;b--;){var L=m[b].pos.x,k=m[b].pos.y;L<E&&(E=L),L>N&&(N=L),k<w&&(w=k),k>A&&(A=k)}var R=N-E,C=A-w;for(R>C?A=w+R:N=E+C,l=0,p=g(),p.left=E,p.right=N,p.top=w,p.bottom=A,b=S-1,b>=0&&(p.body=m[b]);b--;)h(m[b])}function h(m){for(f.reset(),f.push(p,m);!f.isEmpty();){var E=f.pop(),w=E.node,N=E.body;if(w.body){var P=w.body;if(w.body=null,u(P.pos,N.pos)){var _=3;do{var T=n.nextDouble(),x=(w.right-w.left)*T,q=(w.bottom-w.top)*T;P.pos.x=w.left+x,P.pos.y=w.top+q,_-=1}while(_>0&&u(P.pos,N.pos));if(_===0&&u(P.pos,N.pos))return}f.push(w,P),f.push(w,N)}else{var A=N.pos.x,b=N.pos.y;w.mass=w.mass+N.mass,w.massX=w.massX+N.mass*A,w.massY=w.massY+N.mass*b;var S=0,L=w.left,k=(w.right+L)/2,R=w.top,C=(w.bottom+R)/2;A>k&&(S=S+1,L=k,k=w.right),b>C&&(S=S+2,R=C,C=w.bottom);var B=e(w,S);B?f.push(B,N):(B=g(),B.left=L,B.top=R,B.right=k,B.bottom=C,B.body=N,r(w,S,B))}}}};function e(t,n){return n===0?t.quad0:n===1?t.quad1:n===2?t.quad2:n===3?t.quad3:null}function r(t,n,i){n===0?t.quad0=i:n===1?t.quad1=i:n===2?t.quad2=i:n===3&&(t.quad3=i)}return Lr}var Pr,an;function lo(){return an||(an=1,Pr=function(e,r){var t=Ce.random(42),n={x1:0,y1:0,x2:0,y2:0};return{box:n,update:i,reset:function(){n.x1=n.y1=0,n.x2=n.y2=0},getBestNewPosition:function(o){var u=n,a=0,s=0;if(o.length){for(var f=0;f<o.length;++f)a+=o[f].pos.x,s+=o[f].pos.y;a/=o.length,s/=o.length}else a=(u.x1+u.x2)/2,s=(u.y1+u.y2)/2;var c=r.springLength;return{x:a+t.next(c)-c/2,y:s+t.next(c)-c/2}}};function i(){var o=e.length;if(o!==0){for(var u=Number.MAX_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,f=Number.MIN_VALUE;o--;){var c=e[o];c.isPinned?(c.pos.x=c.prevPos.x,c.pos.y=c.prevPos.y):(c.prevPos.x=c.pos.x,c.prevPos.y=c.pos.y),c.pos.x<u&&(u=c.pos.x),c.pos.x>s&&(s=c.pos.x),c.pos.y<a&&(a=c.pos.y),c.pos.y>f&&(f=c.pos.y)}n.x1=u,n.x2=s,n.y1=a,n.y2=f}}}),Pr}var Tr,un;function vo(){return un||(un=1,Tr=function(e){var r=ye(),t=pt();e=r(e,{dragCoeff:.02});var n={update:function(i){i.force.x-=e.dragCoeff*i.velocity.x,i.force.y-=e.dragCoeff*i.velocity.y}};return t(e,n,["dragCoeff"]),n}),Tr}var Sr,fn;function ho(){return fn||(fn=1,Sr=function(e){var r=ye(),t=Ce.random(42),n=pt();e=r(e,{springCoeff:2e-4,springLength:80});var i={update:function(o){var u=o.from,a=o.to,s=o.length<0?e.springLength:o.length,f=a.pos.x-u.pos.x,c=a.pos.y-u.pos.y,d=Math.sqrt(f*f+c*c);d===0&&(f=(t.nextDouble()-.5)/50,c=(t.nextDouble()-.5)/50,d=Math.sqrt(f*f+c*c));var l=d-s,p=(!o.coeff||o.coeff<0?e.springCoeff:o.coeff)*l/d*o.weight;u.force.x+=p*f,u.force.y+=p*c,a.force.x-=p*f,a.force.y-=p*c}};return n(e,i,["springCoeff","springLength"]),i}),Sr}var Ar,sn;function po(){if(sn)return Ar;sn=1,Ar=e;function e(r,t){var n=0,i=0,o=0,u=0,a,s=r.length;if(s===0)return 0;for(a=0;a<s;++a){var f=r[a],c=t/f.mass;f.velocity.x+=c*f.force.x,f.velocity.y+=c*f.force.y;var d=f.velocity.x,l=f.velocity.y,p=Math.sqrt(d*d+l*l);p>1&&(f.velocity.x=d/p,f.velocity.y=l/p),n=t*f.velocity.x,o=t*f.velocity.y,f.pos.x+=n,f.pos.y+=o,i+=Math.abs(n),u+=Math.abs(o)}return(i*i+u*u)/s}return Ar}var Cr,cn;function go(){if(cn)return Cr;cn=1,Cr={Body:e,Vector2d:r,Body3d:t,Vector3d:n};function e(i,o){this.pos=new r(i,o),this.prevPos=new r(i,o),this.force=new r,this.velocity=new r,this.mass=1}e.prototype.setPosition=function(i,o){this.prevPos.x=this.pos.x=i,this.prevPos.y=this.pos.y=o};function r(i,o){i&&typeof i!="number"?(this.x=typeof i.x=="number"?i.x:0,this.y=typeof i.y=="number"?i.y:0):(this.x=typeof i=="number"?i:0,this.y=typeof o=="number"?o:0)}r.prototype.reset=function(){this.x=this.y=0};function t(i,o,u){this.pos=new n(i,o,u),this.prevPos=new n(i,o,u),this.force=new n,this.velocity=new n,this.mass=1}t.prototype.setPosition=function(i,o,u){this.prevPos.x=this.pos.x=i,this.prevPos.y=this.pos.y=o,this.prevPos.z=this.pos.z=u};function n(i,o,u){i&&typeof i!="number"?(this.x=typeof i.x=="number"?i.x:0,this.y=typeof i.y=="number"?i.y:0,this.z=typeof i.z=="number"?i.z:0):(this.x=typeof i=="number"?i:0,this.y=typeof o=="number"?o:0,this.z=typeof u=="number"?u:0)}return n.prototype.reset=function(){this.x=this.y=this.z=0},Cr}var qr,ln;function mo(){if(ln)return qr;ln=1;var e=go();return qr=function(r){return new e.Body(r)},qr}var kr,dn;function vn(){if(dn)return kr;dn=1,kr=e;function e(r){var t=ao(),n=pt(),i=ye(),o=ae();r=i(r,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20});var u=r.createQuadTree||co(),a=r.createBounds||lo(),s=r.createDragForce||vo(),f=r.createSpringForce||ho(),c=r.integrator||po(),d=r.createBody||mo(),l=[],p=[],g=u(r),y=a(l,r),v=f(r),h=s(r),m=!0,E=0,w={bodies:l,quadTree:g,springs:p,settings:r,step:function(){N();var A=c(l,r.timeStep);return y.update(),A},addBody:function(A){if(!A)throw new Error("Body is required");return l.push(A),A},addBodyAt:function(A){if(!A)throw new Error("Body position is required");var b=d(A);return l.push(b),b},removeBody:function(A){if(A){var b=l.indexOf(A);if(!(b<0))return l.splice(b,1),l.length===0&&y.reset(),!0}},addSpring:function(A,b,S,L,k){if(!A||!b)throw new Error("Cannot add null spring to force simulator");typeof S!="number"&&(S=-1);var R=new t(A,b,S,k>=0?k:-1,L);return p.push(R),R},getTotalMovement:function(){return E},removeSpring:function(A){if(A){var b=p.indexOf(A);if(b>-1)return p.splice(b,1),!0}},getBestNewBodyPosition:function(A){return y.getBestNewPosition(A)},getBBox:function(){return m&&(y.update(),m=!1),y.box},invalidateBBox:function(){m=!0},gravity:function(A){return A!==void 0?(r.gravity=A,g.options({gravity:A}),this):r.gravity},theta:function(A){return A!==void 0?(r.theta=A,g.options({theta:A}),this):r.theta}};return n(r,w),o(w),w;function N(){var A,b=l.length;if(b)for(g.insertBodies(l);b--;)A=l[b],A.isPinned||(A.force.reset(),g.updateBodyForce(A),h.update(A));for(b=p.length;b--;)v.update(p[b])}}return kr}var Rr,hn;function yo(){if(hn)return Rr;hn=1,Rr=function(t){r(t);var n=e(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};function e(t){var n=Object.create(null);return{on:function(i,o,u){if(typeof o!="function")throw new Error("callback is expected to be a function");var a=n[i];return a||(a=n[i]=[]),a.push({callback:o,ctx:u}),t},off:function(i,o){var u=typeof i=="undefined";if(u)return n=Object.create(null),t;if(n[i]){var a=typeof o!="function";if(a)delete n[i];else for(var s=n[i],f=0;f<s.length;++f)s[f].callback===o&&s.splice(f,1)}return t},fire:function(i){var o=n[i];if(!o)return t;var u;arguments.length>1&&(u=Array.prototype.splice.call(arguments,1));for(var a=0;a<o.length;++a){var s=o[a];s.callback.apply(s.ctx,u)}return t}}}function r(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],i=0;i<n.length;++i)if(t.hasOwnProperty(n[i]))throw new Error("Subject cannot be eventified, since it already has property '"+n[i]+"'")}return Rr}var pn;function ci(){if(pn)return Re.exports;pn=1,Re.exports=r,Re.exports.simulator=vn();var e=yo();function r(n,i){if(!n)throw new Error("Graph structure cannot be undefined");var o=vn(),u=o(i),a=B;i&&typeof i.nodeMass=="function"&&(a=i.nodeMass);var s=Object.create(null),f={},c=0,d=u.settings.springTransform||t;w(),h();var l=!1,p={step:function(){if(c===0)return!0;var P=u.step();p.lastMove=P,p.fire("step");var _=P/c,T=_<=.01;return l!==T&&(l=T,m(T)),T},getNodePosition:function(P){return C(P).pos},setNodePosition:function(P){var _=C(P);_.setPosition.apply(_,Array.prototype.slice.call(arguments,1)),u.invalidateBBox()},getLinkPosition:function(P){var _=f[P];if(_)return{from:_.from.pos,to:_.to.pos}},getGraphRect:function(){return u.getBBox()},forEachBody:g,pinNode:function(P,_){var T=C(P.id);T.isPinned=!!_},isNodePinned:function(P){return C(P.id).isPinned},dispose:function(){n.off("changed",E),p.fire("disposed")},getBody:v,getSpring:y,simulator:u,graph:n,lastMove:0};return e(p),p;function g(P){Object.keys(s).forEach(function(_){P(s[_],_)})}function y(P,_){var T;if(_===void 0)typeof P!="object"?T=P:T=P.id;else{var x=n.hasLink(P,_);if(!x)return;T=x.id}return f[T]}function v(P){return s[P]}function h(){n.on("changed",E)}function m(P){p.fire("stable",P)}function E(P){for(var _=0;_<P.length;++_){var T=P[_];T.changeType==="add"?(T.node&&N(T.node.id),T.link&&b(T.link)):T.changeType==="remove"&&(T.node&&A(T.node),T.link&&S(T.link))}c=n.getNodesCount()}function w(){c=0,n.forEachNode(function(P){N(P.id),c+=1}),n.forEachLink(b)}function N(P){var _=s[P];if(!_){var T=n.getNode(P);if(!T)throw new Error("initBody() was called with unknown node id");var x=T.position;if(!x){var q=L(T);x=u.getBestNewBodyPosition(q)}_=u.addBodyAt(x),_.id=P,s[P]=_,k(P),R(T)&&(_.isPinned=!0)}}function A(P){var _=P.id,T=s[_];T&&(s[_]=null,delete s[_],u.removeBody(T))}function b(P){k(P.fromId),k(P.toId);var _=s[P.fromId],T=s[P.toId],x=u.addSpring(_,T,P.length);d(P,x),f[P.id]=x}function S(P){var _=f[P.id];if(_){var T=n.getNode(P.fromId),x=n.getNode(P.toId);T&&k(T.id),x&&k(x.id),delete f[P.id],u.removeSpring(_)}}function L(P){var _=[];if(!P.links)return _;for(var T=Math.min(P.links.length,2),x=0;x<T;++x){var q=P.links[x],F=q.fromId!==P.id?s[q.fromId]:s[q.toId];F&&F.pos&&_.push(F)}return _}function k(P){var _=s[P];if(_.mass=a(P),Number.isNaN(_.mass))throw new Error("Node mass should be a number")}function R(P){return P&&(P.isPinned||P.data&&P.data.isPinned)}function C(P){var _=s[P];return _||(N(P),_=s[P]),_}function B(P){var _=n.getLinks(P);return _?1+_.length/3:1}}function t(){}return Re.exports}var Ir,gn;function li(){if(gn)return Ir;gn=1,Ir=e;function e(r,t,n,i){this.x1=r||0,this.y1=t||0,this.x2=n||0,this.y2=i||0}return Ir}var Mr,mn;function wo(){if(mn)return Mr;mn=1,Mr=n;var e=ye(),r=Ce.random,t=li();function n(i,o){o=e(o,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var u=r(o.seed),a=new t(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),s={},f=function(h){return{x:u.next(o.maxX),y:u.next(o.maxY)}},c=function(h,m){h.x<m.x1&&(m.x1=h.x),h.x>m.x2&&(m.x2=h.x),h.y<m.y1&&(m.y1=h.y),h.y>m.y2&&(m.y2=h.y)},d=typeof Object.create=="function"?Object.create(null):{},l=function(h){d[h.id]=f(h),c(d[h.id],a)},p=function(){i.getNodesCount()!==0&&(a.x1=Number.MAX_VALUE,a.y1=Number.MAX_VALUE,a.x2=Number.MIN_VALUE,a.y2=Number.MIN_VALUE,i.forEachNode(l))},g=function(h){s[h.id]=h},y=function(h){for(var m=0;m<h.length;++m){var E=h[m];E.node&&(E.changeType==="add"?l(E.node):delete d[E.node.id]),E.link&&(E.changeType==="add"?g(E.link):delete s[E.link.id])}};return i.forEachNode(l),i.forEachLink(g),i.on("changed",y),{run:function(h){this.step()},step:function(){return p(),!0},getGraphRect:function(){return a},dispose:function(){i.off("change",y)},isNodePinned:function(h){return!0},pinNode:function(h,m){},getNodePosition:v,getLinkPosition:function(h){var m=s[h];return{from:v(m.fromId),to:v(m.toId)}},setNodePosition:function(h,m,E){var w=d[h];w&&(w.x=m,w.y=E)},placeNode:function(h){return typeof h=="function"?(f=h,p(),this):f(h)}};function v(h){return d[h]}}return Mr}var Dr,yn;function di(){if(yn)return Dr;yn=1,Dr=e;function e(r){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=r}return Dr}var Br,wn;function vi(){if(wn)return Br;wn=1;var e=di();Br=r;function r(n){var i=Math.sqrt(n||1024)<<0,o=i,u=1,a={},s,f=0,c=[],d=[];if(!t(n))throw"Tiles per texture should be power of two.";var l={isDirty:!1,clearDirty:p,remove:g,getTextures:y,getCoordinates:v,load:h};return l;function p(){var S;for(l.isDirty=!1,S=0;S<c.length;++S)c[S].isDirty=!1}function g(S){var L=a[S];if(!L)return!1;if(delete a[S],u-=1,u===L.offset)return!0;var k=w(L.offset),R=w(u);b(R,k);var C=a[d[u]];return C.offset=L.offset,d[L.offset]=d[u],A(),!0}function y(){return c}function v(S){return a[S]}function h(S,L){if(a.hasOwnProperty(S))L(a[S]);else{var k=new window.Image,R=u;u+=1,k.crossOrigin="anonymous",k.onload=function(){A(),E(R,k,L)},k.src=S}}function m(){var S=new e(i*o);c.push(S)}function E(S,L,k){var R=w(S),C={offset:S};R.textureNumber>=c.length&&m();var B=c[R.textureNumber];B.ctx.drawImage(L,R.col*o,R.row*o,o,o),d[S]=L.src,a[L.src]=C,B.isDirty=!0,k(C)}function w(S){var L=S/n<<0,k=S%n,R=k/i<<0,C=k%i;return{textureNumber:L,row:R,col:C}}function N(){l.isDirty=!0,f=0,s=null}function A(){s&&(window.clearTimeout(s),f+=1,s=null),f>10?N():s=window.setTimeout(N,400)}function b(S,L){var k=c[S.textureNumber].canvas,R=c[L.textureNumber].ctx,C=L.col*o,B=L.row*o;R.drawImage(k,S.col*o,S.row*o,o,o,C,B,o,o),c[S.textureNumber].isDirty=!0,c[L.textureNumber].isDirty=!0}}function t(n){return(n&n-1)===0}return Br}var Fr,xn;function xo(){if(xn)return Fr;xn=1;var e=vi(),r=Ve();Fr=t;function t(f){var u=18,a=n(),s=i(),f=f||1024,c,d,l,p,g,y,v=0,h=new Float32Array(64),m,E,w,N;return{load:S,position:L,createNode:k,removeNode:R,replaceProperties:C,updateTransform:B,updateSize:P,render:_};function A(T,x){T.nativeObject&&l.deleteTexture(T.nativeObject);var q=l.createTexture();l.activeTexture(l["TEXTURE"+x]),l.bindTexture(l.TEXTURE_2D,q),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,T.canvas),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR_MIPMAP_NEAREST),l.generateMipmap(l.TEXTURE_2D),l.uniform1i(y["sampler"+x],x),T.nativeObject=q}function b(){if(c.isDirty){var T=c.getTextures(),x;for(x=0;x<T.length;++x)(T[x].isDirty||!T[x].nativeObject)&&A(T[x],x);c.clearDirty()}}function S(T){l=T,g=r(T),c=new e(f),d=g.createProgram(s,a),l.useProgram(d),y=g.getLocations(d,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),l.uniform1f(y.tilesPerTexture,f),l.enableVertexAttribArray(y.vertexPos),l.enableVertexAttribArray(y.customAttributes),p=l.createBuffer()}function L(T,x){var q=T.id*u;h[q]=x.x-T.size,h[q+1]=-x.y-T.size,h[q+2]=T._offset*4,h[q+3]=x.x+T.size,h[q+4]=-x.y-T.size,h[q+5]=T._offset*4+1,h[q+6]=x.x-T.size,h[q+7]=-x.y+T.size,h[q+8]=T._offset*4+2,h[q+9]=x.x-T.size,h[q+10]=-x.y+T.size,h[q+11]=T._offset*4+2,h[q+12]=x.x+T.size,h[q+13]=-x.y-T.size,h[q+14]=T._offset*4+1,h[q+15]=x.x+T.size,h[q+16]=-x.y+T.size,h[q+17]=T._offset*4+3}function k(T){h=g.extendArray(h,v,u),v+=1;var x=c.getCoordinates(T.src);x?T._offset=x.offset:(T._offset=0,c.load(T.src,function(q){T._offset=q.offset}))}function R(T){v>0&&(v-=1),T.id<v&&v>0&&(T.src&&c.remove(T.src),g.copyArrayPart(h,T.id*u,v*u,u))}function C(T,x){x._offset=T._offset}function B(T){N=!0,w=T}function P(T,x){m=T,E=x,N=!0}function _(){l.useProgram(d),l.bindBuffer(l.ARRAY_BUFFER,p),l.bufferData(l.ARRAY_BUFFER,h,l.DYNAMIC_DRAW),N&&(N=!1,l.uniformMatrix4fv(y.transform,!1,w),l.uniform2f(y.screenSize,m,E)),l.vertexAttribPointer(y.vertexPos,2,l.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),l.vertexAttribPointer(y.customAttributes,1,l.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,2*4),b(),l.drawArrays(l.TRIANGLES,0,v*6)}}function n(){return["precision mediump float;","varying vec4 color;","varying vec3 vTextureCoord;","uniform sampler2D u_sampler0;","uniform sampler2D u_sampler1;","uniform sampler2D u_sampler2;","uniform sampler2D u_sampler3;","void main(void) {","   if (vTextureCoord.z == 0.) {","     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);","   } else if (vTextureCoord.z == 1.) {","     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);","   } else if (vTextureCoord.z == 2.) {","     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);","   } else if (vTextureCoord.z == 3.) {","     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);","   } else { gl_FragColor = vec4(0, 1, 0, 1); }","}"].join(`
`)}function i(){return["attribute vec2 a_vertexPos;","attribute float a_customAttributes;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","uniform float u_tilesPerTexture;","varying vec3 vTextureCoord;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);","float corner = mod(a_customAttributes, 4.);","float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);","float tilesPerRow = sqrt(u_tilesPerTexture);","float tileSize = 1./tilesPerRow;","float tileColumn = mod(tileIndex, tilesPerRow);","float tileRow = floor(tileIndex/tilesPerRow);","if(corner == 0.0) {","  vTextureCoord.xy = vec2(0, 1);","} else if(corner == 1.0) {","  vTextureCoord.xy = vec2(1, 1);","} else if(corner == 2.0) {","  vTextureCoord.xy = vec2(0, 0);","} else {","  vTextureCoord.xy = vec2(1, 0);","}","vTextureCoord *= tileSize;","vTextureCoord.x += tileColumn * tileSize;","vTextureCoord.y += tileRow * tileSize;","vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);","}"].join(`
`)}return Fr}var Or,_n;function hi(){if(_n)return Or;_n=1;var e=Ve();Or=r;function r(){var t=6,n=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),i=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join(`
`),o=["attribute vec2 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);","   color = a_color.abgr;","}"].join(`
`),u,a,s,f,c,d=0,l,p=new ArrayBuffer(16*n),g=new Float32Array(p),y=new Uint32Array(p),v,h,m,E,w=function(){if((d+1)*n>p.byteLength){var N=new ArrayBuffer(p.byteLength*2),A=new Float32Array(N),b=new Uint32Array(N);b.set(y),g=A,y=b,p=N}};return{load:function(N){a=N,f=e(N),u=f.createProgram(o,i),a.useProgram(u),c=f.getLocations(u,["a_vertexPos","a_color","u_screenSize","u_transform"]),a.enableVertexAttribArray(c.vertexPos),a.enableVertexAttribArray(c.color),s=a.createBuffer()},position:function(N,A,b){var S=N.id,L=S*t;g[L]=A.x,g[L+1]=A.y,y[L+2]=N.color,g[L+3]=b.x,g[L+4]=b.y,y[L+5]=N.color},createLink:function(N){w(),d+=1,l=N.id},removeLink:function(N){d>0&&(d-=1),N.id<d&&d>0&&f.copyArrayPart(y,N.id*t,d*t,t)},updateTransform:function(N){E=!0,m=N},updateSize:function(N,A){v=N,h=A,E=!0},render:function(){a.useProgram(u),a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,p,a.DYNAMIC_DRAW),E&&(E=!1,a.uniformMatrix4fv(c.transform,!1,m),a.uniform2f(c.screenSize,v,h)),a.vertexAttribPointer(c.vertexPos,2,a.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(c.color,4,a.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,2*4),a.drawArrays(a.LINES,0,d*2),l=d-1},bringToFront:function(N){l>N.id&&f.swapArrayPart(g,N.id*t,l*t,t),l>0&&(l-=1)},getFrontLinkId:function(){return l}}}return Or}var zr,bn;function pi(){if(bn)return zr;bn=1;var e=Ve();zr=r;function r(){var t=4,n=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,i=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join(`
`),o=["attribute vec3 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);","   gl_PointSize = a_vertexPos.z * u_transform[0][0];","   color = a_color.abgr;","}"].join(`
`),u,a,s,f,c,d=new ArrayBuffer(16*n),l=new Float32Array(d),p=new Uint32Array(d),g=0,y,v,h,m;return{load:w,position:N,updateTransform:A,updateSize:b,removeNode:S,createNode:L,replaceProperties:k,render:R};function E(){if((g+1)*n>=d.byteLength){var C=new ArrayBuffer(d.byteLength*2),B=new Float32Array(C),P=new Uint32Array(C);P.set(p),l=B,p=P,d=C}}function w(C){a=C,c=e(C),u=c.createProgram(o,i),a.useProgram(u),f=c.getLocations(u,["a_vertexPos","a_color","u_screenSize","u_transform"]),a.enableVertexAttribArray(f.vertexPos),a.enableVertexAttribArray(f.color),s=a.createBuffer()}function N(C,B){var P=C.id;l[P*t]=B.x,l[P*t+1]=-B.y,l[P*t+2]=C.size,p[P*t+3]=C.color}function A(C){m=!0,h=C}function b(C,B){y=C,v=B,m=!0}function S(C){g>0&&(g-=1),C.id<g&&g>0&&c.copyArrayPart(p,C.id*t,g*t,t)}function L(){E(),g+=1}function k(){}function R(){a.useProgram(u),a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,d,a.DYNAMIC_DRAW),m&&(m=!1,a.uniformMatrix4fv(f.transform,!1,h),a.uniform2f(f.screenSize,y,v)),a.vertexAttribPointer(f.vertexPos,3,a.FLOAT,!1,t*Float32Array.BYTES_PER_ELEMENT,0),a.vertexAttribPointer(f.color,4,a.UNSIGNED_BYTE,!0,t*Float32Array.BYTES_PER_ELEMENT,3*4),a.drawArrays(a.POINTS,0,g)}}return zr}var Yr,En;function gt(){if(En)return Yr;En=1,Yr=e;function e(r){var t=10414335;if(typeof r=="string"&&r)if(r.length===4&&(r=r.replace(/([^#])/g,"$1$1")),r.length===9)t=parseInt(r.substr(1),16);else if(r.length===7)t=parseInt(r.substr(1),16)<<8|255;else throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+r;else typeof r=="number"&&(t=r);return t}return Yr}var Vr,Nn;function gi(){if(Nn)return Vr;Nn=1;var e=gt();Vr=r;function r(t){return{color:e(t)}}return Vr}var Xr,Ln;function mi(){if(Ln)return Xr;Ln=1;var e=gt();Xr=r;function r(t,n){return{size:typeof t=="number"?t:10,color:e(n)}}return Xr}var Gr,Pn;function _o(){if(Pn)return Gr;Pn=1,Gr=e;function e(r,t){return{_texture:0,_offset:0,size:typeof r=="number"?r:32,src:t}}return Gr}var jr,Tn;function bo(){if(Tn)return jr;Tn=1,jr=a;var e=ui(),r=hi(),t=pi(),n=mi(),i=gi(),o=ae(),u=ye();function a(s){s=u(s,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var f,c,d,l,p,g=0,y=0,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h,m,E=[],w=[],N,A={},b={},S=r(),L=t(),k=function(x){return n()},R=function(x){return i(3014898687)},C=function(){S.updateTransform(v),L.updateTransform(v)},B=function(){v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},P=function(){f&&c&&(l=c.width=Math.max(f.offsetWidth,1),p=c.height=Math.max(f.offsetHeight,1),d&&d.viewport(0,0,l,p),S&&S.updateSize(l/2,p/2),L&&L.updateSize(l/2,p/2))},_=function(x){x.fire("rescaled")};c=window.document.createElement("canvas");var T={getLinkUI:function(x){return b[x]},getNodeUI:function(x){return A[x]},node:function(x){if(typeof x=="function")return k=x,this},link:function(x){if(typeof x=="function")return R=x,this},placeNode:function(x){return h=x,this},placeLink:function(x){return m=x,this},inputManager:e,beginRender:function(){},endRender:function(){y>0&&S.render(),g>0&&L.render()},bringLinkToFront:function(x){var q=S.getFrontLinkId(),F,O;S.bringToFront(x),q>x.id&&(F=x.id,O=w[q],w[q]=w[F],w[q].id=q,w[F]=O,w[F].id=F)},graphCenterChanged:function(x,q){v[12]=2*x/l-1,v[13]=1-2*q/p,C()},addLink:function(x,q){var F=y++,O=R(x);return O.id=F,O.pos=q,S.createLink(O),w[F]=O,b[x.id]=O,O},addNode:function(x,q){var F=g++,O=k(x);return O.id=F,O.position=q,O.node=x,L.createNode(O),E[F]=O,A[x.id]=O,O},translateRel:function(x,q){v[12]+=2*v[0]*x/l/v[0],v[13]-=2*v[5]*q/p/v[5],C()},scale:function(x,q){var F=2*q.x/l-1,O=1-2*q.y/p;return F-=v[12],O-=v[13],v[12]+=F*(1-x),v[13]+=O*(1-x),v[0]*=x,v[5]*=x,C(),_(this),v[0]},resetScale:function(){return B(),d&&(P(),C()),this},updateSize:P,init:function(x){var q={};if(s.preserveDrawingBuffer&&(q.preserveDrawingBuffer=!0),f=x,P(),B(),f.appendChild(c),d=c.getContext("experimental-webgl",q),!d){var F="Could not initialize WebGL. Seems like the browser doesn't support it.";throw window.alert(F),F}if(s.enableBlending&&(d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),d.enable(d.BLEND)),s.clearColor){var O=s.clearColorValue;d.clearColor(O.r,O.g,O.b,O.a),this.beginRender=function(){d.clear(d.COLOR_BUFFER_BIT)}}S.load(d),S.updateSize(l/2,p/2),L.load(d),L.updateSize(l/2,p/2),C(),typeof N=="function"&&N(c)},release:function(x){c&&x&&x.removeChild(c)},isSupported:function(){var x=window.document.createElement("canvas"),q=x&&x.getContext&&x.getContext("experimental-webgl");return q},releaseLink:function(x){y>0&&(y-=1);var q=b[x.id];delete b[x.id],S.removeLink(q);var F=q.id;if(F<y){if(y===0||y===F)return;var O=w[y];w[F]=O,O.id=F}},releaseNode:function(x){g>0&&(g-=1);var q=A[x.id];delete A[x.id],L.removeNode(q);var F=q.id;if(F<g){if(g===0||g===F)return;var O=E[g];E[F]=O,O.id=F,L.replaceProperties(q,O)}},renderNodes:function(){for(var x={x:0,y:0},q=0;q<g;++q){var F=E[q];x.x=F.position.x,x.y=F.position.y,h&&h(F,x),L.position(F,x)}},renderLinks:function(){if(!this.omitLinksRendering)for(var x={x:0,y:0},q={x:0,y:0},F=0;F<y;++F){var O=w[F],Q=O.pos.from;q.x=Q.x,q.y=-Q.y,Q=O.pos.to,x.x=Q.x,x.y=-Q.y,m&&m(O,q,x),S.position(O,q,x)}},getGraphicsRoot:function(x){return typeof x=="function"&&(c?x(c):N=x),c},setNodeProgram:function(x){if(!d&&x)L=x;else if(x)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(x){if(!d&&x)S=x;else if(x)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(x){return x.x=2*x.x/l-1,x.y=1-2*x.y/p,x.x=(x.x-v[12])/v[0],x.y=(x.y-v[13])/v[5],x.x=x.x*(l/2),x.y=x.y*(-p/2),x},transformGraphToClientCoordinates:function(x){return x.x=x.x/(l/2),x.y=x.y/(-p/2),x.x=x.x*v[0]+v[12],x.y=x.y*v[5]+v[13],x.x=(x.x+1)*l/2,x.y=(1-x.y)*p/2,x},getNodeAtClientPos:function(x,q){if(typeof q!="function")return null;this.transformClientToGraphCoordinates(x);for(var F=0;F<g;++F)if(q(E[F],x.x,x.y))return E[F].node;return null}};return o(T),T}return jr}var $r,Sn;function Eo(){if(Sn)return $r;Sn=1,$r=e();function e(){return typeof DOMParser=="undefined"?{parseFromString:r}:new DOMParser}function r(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}return $r}var Ur,An;function No(){if(An)return Ur;An=1;var e=Eo(),r=mt();Ur=t;function t(i){try{return i=n(i),r(e.parseFromString(i,"text/xml").documentElement)}catch(o){throw o}}function n(i){if(i){var o='xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"',u=i.match(/^<\w+/);if(u){var a=u[0].length;return i.substr(0,a)+" "+o+" "+i.substr(a)}else throw new Error("Cannot parse input text: invalid xml?")}}return Ur}var Wr,Cn;function Lo(){if(Cn)return Wr;Cn=1,Wr=r;var e=/{{(.+?)}}/;function r(o){var u=Object.create(null);return t(o,u),{link:function(a){Object.keys(u).forEach(function(f){var c=u[f];c.forEach(s)});function s(f){f(a)}}}}function t(o,u){var a=o.nodeType,s=a===1||a===3;if(s){var f;if(o.hasChildNodes()){var c=o.childNodes;for(f=0;f<c.length;++f)t(c[f],u)}if(a===3&&i(o,u),!!o.attributes){var d=o.attributes;for(f=0;f<d.length;++f)n(d[f],o,u)}}}function n(o,u,a){var s=o.value;if(!s)return;var f=s.match(e);if(!f)return;var c=o.localName,d=f[1],l=d.indexOf(".")<0;if(!l)throw new Error("simplesvg currently does not support nested bindings");var p=a[d];p?p.push(g):p=a[d]=[g];function g(y){u.setAttributeNS(null,c,y[d])}}function i(o,u){var a=o.nodeValue;if(!a)return;var s=a.match(e);if(!s)return;var f=s[1];f.indexOf(".")<0;var c=u[f];c?c.push(d):c=u[f]=[d];function d(l){o.nodeValue=l[f]}}return Wr}var Hr,qn;function Po(){if(qn)return Hr;qn=1,r.removeEventListener=t,r.addEventListener=r,Hr=r;var e=null;function r(a,s,f,c){return e=e||(document.addEventListener?{add:n,rm:i}:{add:o,rm:u}),e.add(a,s,f,c)}function t(a,s,f,c){return e=e||(document.addEventListener?{add:n,rm:i}:{add:o,rm:u}),e.rm(a,s,f,c)}function n(a,s,f,c){a.addEventListener(s,f,c)}function i(a,s,f,c){a.removeEventListener(s,f,c)}function o(a,s,f,c){if(c)throw new Error("cannot useCapture in oldIE");a.attachEvent("on"+s,f)}function u(a,s,f,c){a.detachEvent("on"+s,f)}return Hr}var Qr,kn;function mt(){if(kn)return Qr;kn=1,Qr=i,i.compile=No();var e=i.compileTemplate=Lo(),r=Po(),t="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xlink";function i(u,a){var s=o(u);if(a===void 0)return s;for(var f=Object.keys(a),c=0;c<f.length;++c){var d=f[c],l=a[d];d==="link"?s.link(l):s.attr(d,l)}return s}function o(u){var a=u;if(typeof u=="string")a=window.document.createElementNS(t,u);else if(u.simplesvg)return u;var s;return a.simplesvg=!0,a.attr=p,a.append=l,a.link=g,a.text=y,a.on=c,a.off=d,a.dataSource=f,a;function f(v){return s||(s=e(a)),s.link(v),a}function c(v,h,m){return r.addEventListener(a,v,h,m),a}function d(v,h,m){return r.removeEventListener(a,v,h,m),a}function l(v){var h=i(v);return a.appendChild(h),h}function p(v,h){return arguments.length===2?(h!==null?a.setAttributeNS(null,v,h):a.removeAttributeNS(null,v),a):a.getAttributeNS(null,v)}function g(v){return arguments.length?(a.setAttributeNS(n,"xlink:href",v),a):a.getAttributeNS(n,"xlink:href")}function y(v){return v!==void 0?(a.textContent=v,a):a.textContent}}return Qr}var Zr,Rn;function yi(){if(Rn)return Zr;Rn=1,Zr=n;var e=mt(),r=ae(),t=ht();function n(){var i,o,u=0,a=0,s,f=1,c={},d={},l=function(b){return e("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},p=function(b,S){b.attr("x",S.x-5).attr("y",S.y-5)},g=function(b){return e("line").attr("stroke","#999")},y=function(b,S,L){b.attr("x1",S.x).attr("y1",S.y).attr("x2",L.x).attr("y2",L.y)},v=function(b){b.fire("rescaled")},h={x:0,y:0},m={x:0,y:0},E={x:0,y:0},w=function(){if(i){var b="matrix("+f+", 0, 0,"+f+","+u+","+a+")";i.attr("transform",b)}};o=A();var N={getNodeUI:function(b){return c[b]},getLinkUI:function(b){return d[b]},node:function(b){if(typeof b=="function")return l=b,this},link:function(b){if(typeof b=="function")return g=b,this},placeNode:function(b){return p=b,this},placeLink:function(b){return y=b,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(b,S){u=b,a=S,w()},inputManager:t,translateRel:function(b,S){var L=o.createSVGPoint(),k=i.getCTM(),R=o.createSVGPoint().matrixTransform(k.inverse());L.x=b,L.y=S,L=L.matrixTransform(k.inverse()),L.x=(L.x-R.x)*k.a,L.y=(L.y-R.y)*k.d,k.e+=L.x,k.f+=L.y;var C="matrix("+k.a+", 0, 0,"+k.d+","+k.e+","+k.f+")";i.attr("transform",C)},scale:function(b,S){var L=o.createSVGPoint();L.x=S.x,L.y=S.y,L=L.matrixTransform(i.getCTM().inverse());var k=o.createSVGMatrix().translate(L.x,L.y).scale(b).translate(-L.x,-L.y),R=i.getCTM().multiply(k);f=R.a,u=R.e,a=R.f;var C="matrix("+R.a+", 0, 0,"+R.d+","+R.e+","+R.f+")";return i.attr("transform",C),v(this),f},resetScale:function(){f=1;var b="matrix(1, 0, 0, 1, 0, 0)";return i.attr("transform",b),v(this),this},init:function(b){b.appendChild(o),w(),typeof s=="function"&&s(o)},release:function(b){o&&b&&b.removeChild(o)},addLink:function(b,S){var L=g(b);if(L)return L.position=S,L.link=b,d[b.id]=L,i.childElementCount>0?i.insertBefore(L,i.firstChild):i.appendChild(L),L},releaseLink:function(b){var S=d[b.id];S&&(i.removeChild(S),delete d[b.id])},addNode:function(b,S){var L=l(b);if(L)return L.position=S,L.node=b,c[b.id]=L,i.appendChild(L),L},releaseNode:function(b){var S=c[b.id];S&&(i.removeChild(S),delete c[b.id])},renderNodes:function(){for(var b in c)if(c.hasOwnProperty(b)){var S=c[b];h.x=S.position.x,h.y=S.position.y,p(S,h,S.node)}},renderLinks:function(){for(var b in d)if(d.hasOwnProperty(b)){var S=d[b];m.x=S.position.from.x,m.y=S.position.from.y,E.x=S.position.to.x,E.y=S.position.to.y,y(S,m,E,S.link)}},getGraphicsRoot:function(b){return typeof b=="function"&&(o?b(o):s=b),o},getSvgRoot:function(){return o}};return r(N),N;function A(){var b=e("svg");return i=e("g").attr("buffered-rendering","dynamic"),b.appendChild(i),b}}return Zr}var Jr,In;function To(){if(In)return Jr;In=1;var e=ti();Jr=r();function r(){return typeof window=="undefined"?e:{on:t,off:n}}function t(i,o){window.addEventListener(i,o)}function n(i,o){window.removeEventListener(i,o)}return Jr}var Kr,Mn;function So(){if(Mn)return Kr;Mn=1,Kr=s;var e=ae(),r=ci(),t=yi(),n=To(),i=ht(),o=fi(),u=si(),a=vt();function s(f,c){var d=30;c=c||{};var l=c.layout,p=c.graphics,g=c.container,y=c.interactive!==void 0?c.interactive:!0,v,h,m=!1,E=!0,w=!1,N=!1,A=!1,b={offsetX:0,offsetY:0,scale:1},S=e({}),L;return{run:function(D){return m||(R(),T(),G(),x(),$(),m=!0),P(D),this},reset:function(){p.resetScale(),x(),b.scale=1},pause:function(){A=!0,h.stop()},resume:function(){A=!1,h.restart()},rerender:function(){return C(),this},zoomOut:function(){return j(!0)},zoomIn:function(){return j(!1)},getTransform:function(){return b},moveTo:function(D,z){p.graphCenterChanged(b.offsetX-D*b.scale,b.offsetY-z*b.scale),C()},getGraphics:function(){return p},getLayout:function(){return l},dispose:function(){je()},on:function(D,z){return S.on(D,z),this},off:function(D,z){return S.off(D,z),this}};function k(D){return typeof y=="string"?y.indexOf(D)>=0:typeof y=="boolean"?y:!0}function R(){g=g||window.document.body,l=l||r(f,{springLength:80,springCoeff:2e-4}),p=p||t(f,{container:g}),c.hasOwnProperty("renderLinks")||(c.renderLinks=!0),c.prerender=c.prerender||0,v=(p.inputManager||i)(f,p)}function C(){p.beginRender(),c.renderLinks&&p.renderLinks(),p.renderNodes(),p.endRender()}function B(){return w=l.step()&&!N,C(),!w}function P(D){h||(D!==void 0?h=o(function(){if(D-=1,D<0){var z=!1;return z}return B()},d):h=o(B,d))}function _(){A||(w=!1,h.restart())}function T(){if(typeof c.prerender=="number"&&c.prerender>0)for(var D=0;D<c.prerender;D+=1)l.step()}function x(){var D=l.getGraphRect(),z=u(g),K=(D.x2+D.x1)/2,te=(D.y2+D.y1)/2;b.offsetX=z.width/2-(K*b.scale-K),b.offsetY=z.height/2-(te*b.scale-te),p.graphCenterChanged(b.offsetX,b.offsetY),E=!1}function q(D){var z=l.getNodePosition(D.id);p.addNode(D,z)}function F(D){p.releaseNode(D)}function O(D){var z=l.getLinkPosition(D.id);p.addLink(D,z)}function Q(D){p.releaseLink(D)}function X(D){if(k("node")){var z=!1;v.bindDragNDrop(D,{onStart:function(){z=l.isNodePinned(D),l.pinNode(D,!0),N=!0,_()},onDrag:function(K,te){var wt=l.getNodePosition(D.id);l.setNodePosition(D.id,wt.x+te.x/b.scale,wt.y+te.y/b.scale),N=!0,C()},onStop:function(){l.pinNode(D,z),N=!1}})}}function U(D){v.bindDragNDrop(D,null)}function G(){p.init(g),f.forEachNode(q),c.renderLinks&&f.forEachLink(O)}function ue(){p.release(g)}function we(D){var z=D.node;D.changeType==="add"?(q(z),X(z),E&&x()):D.changeType==="remove"?(U(z),F(z),f.getNodesCount()===0&&(E=!0)):D.changeType==="update"&&(U(z),F(z),q(z),X(z))}function Ge(D){var z=D.link;if(D.changeType==="add")c.renderLinks&&O(z);else if(D.changeType==="remove")c.renderLinks&&Q(z);else if(D.changeType==="update")throw"Update type is not implemented. TODO: Implement me!"}function I(D){var z,K;for(z=0;z<D.length;z+=1)K=D[z],K.node?we(K):K.link&&Ge(K);_()}function M(){x(),B()}function Y(){L&&(L.release(),L=null)}function V(){f.off("changed",I)}function j(D,z){if(!z){var K=u(g);z={x:K.width/2,y:K.height/2}}var te=Math.pow(1+.4,D?-.2:.2);return b.scale=p.scale(te,z),C(),S.fire("scale",b.scale),b.scale}function $(){n.on("resize",M),Y(),k("drag")&&(L=a(g),L.onDrag(function(D,z){p.translateRel(z.x,z.y),C(),S.fire("drag",z)})),k("scroll")&&(L||(L=a(g)),L.onScroll(function(D,z,K){j(z<0,K)})),f.forEachNode(X),V(),f.on("changed",I)}function je(){m=!1,V(),Y(),n.off("resize",M),S.off(),h.stop(),f.forEachLink(function(D){c.renderLinks&&Q(D)}),f.forEachNode(function(D){U(D),F(D)}),l.dispose(),ue()}}return Kr}var Ie=Ce,wi={lazyExtend:function(){return ye().apply(this,arguments)},randomIterator:function(){return Ie.randomIterator.apply(Ie,arguments)},random:function(){return Ie.random.apply(Ie,arguments)},events:ae()};wi.Graph={version:$i(),graph:dt(),serializer:function(){return{loadFromJSON:Ui(),storeToJSON:Wi()}},centrality:eo(),operations:ro(),geom:function(){return{intersect:ri(),intersectRect:to()}},webgl:Ve(),webglInputEvents:ii(),generator:function(){return io()},Input:{domInputManager:ht(),webglInputManager:ui()},Utils:{dragndrop:vt(),findElementPosition:ai(),timer:fi(),getDimension:si(),events:oo()},Layout:{forceDirected:ci(),constant:wo()},View:{Texture:di(),webglAtlas:vi(),webglImageNodeProgram:xo(),webglLinkProgram:hi(),webglNodeProgram:pi(),webglLine:gi(),webglSquare:mi(),webglImage:_o(),webglGraphics:bo(),_webglUtil:{parseColor:gt()},svgGraphics:yi(),renderer:So(),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:li(),svg:mt(),BrowserInfo:oi()};var Ao=wi;const Oe=Gi(Ao);function Co(e){let r;return{c(){r=ee("div"),_t(r,"width","600px"),_t(r,"height","400px"),De(r,"class","svelte-1to12uv")},m(t,n){Ae(t,r,n),e[6](r)},p:H,i:H,o:H,d(t){t&&me(r),e[6](null)}}}function qo(e,r,t){let n;jn(e,ot,d=>t(5,n=d));let{graph:i}=r,{layoutSpecification:o}=r,{positions:u}=r,a,s,f;Un(()=>{s=o(i),u.length!==0&&i.forEachNode(d=>{let l=u[d.id];console.log("forEachNode:"),console.log(d),console.log(l),s.setNodePosition(d.id,l.x,l.y)}),t(4,f=Oe.Graph.View.renderer(i,{layout:s,container:a,graphics:Oe.Graph.View.webglGraphics(),renderLinks:!0,prerender:!0})),f.run()}),Ii(()=>{let d=[];i.forEachNode(l=>{let p=s.getNodePosition(l.id);d.push({x:p.x,y:p.y})}),Kn.set(d)});function c(d){tt[d?"unshift":"push"](()=>{a=d,t(0,a)})}return e.$$set=d=>{"graph"in d&&t(1,i=d.graph),"layoutSpecification"in d&&t(2,o=d.layoutSpecification),"positions"in d&&t(3,u=d.positions)},e.$$.update=()=>{e.$$.dirty&48&&(f&&!n?f.pause():f&&n&&f.resume())},[a,i,o,u,f,n,c]}class ko extends lt{constructor(r){super(),ct(this,r,qo,Co,Se,{graph:1,layoutSpecification:2,positions:3})}}const Ro={springLength:10,springCoeff:5e-4,dragCoeff:.02,gravity:-1.2};function Io(e){return Oe.Graph.Layout.forceDirected(e,Ro)}function Mo(e){const r=+this._x.call(null,e),t=+this._y.call(null,e);return xi(this.cover(r,t),r,t,e)}function xi(e,r,t,n){if(isNaN(r)||isNaN(t))return e;var i,o=e._root,u={data:n},a=e._x0,s=e._y0,f=e._x1,c=e._y1,d,l,p,g,y,v,h,m;if(!o)return e._root=u,e;for(;o.length;)if((y=r>=(d=(a+f)/2))?a=d:f=d,(v=t>=(l=(s+c)/2))?s=l:c=l,i=o,!(o=o[h=v<<1|y]))return i[h]=u,e;if(p=+e._x.call(null,o.data),g=+e._y.call(null,o.data),r===p&&t===g)return u.next=o,i?i[h]=u:e._root=u,e;do i=i?i[h]=new Array(4):e._root=new Array(4),(y=r>=(d=(a+f)/2))?a=d:f=d,(v=t>=(l=(s+c)/2))?s=l:c=l;while((h=v<<1|y)===(m=(g>=l)<<1|p>=d));return i[m]=o,i[h]=u,e}function Do(e){var r,t,n=e.length,i,o,u=new Array(n),a=new Array(n),s=1/0,f=1/0,c=-1/0,d=-1/0;for(t=0;t<n;++t)isNaN(i=+this._x.call(null,r=e[t]))||isNaN(o=+this._y.call(null,r))||(u[t]=i,a[t]=o,i<s&&(s=i),i>c&&(c=i),o<f&&(f=o),o>d&&(d=o));if(s>c||f>d)return this;for(this.cover(s,f).cover(c,d),t=0;t<n;++t)xi(this,u[t],a[t],e[t]);return this}function Bo(e,r){if(isNaN(e=+e)||isNaN(r=+r))return this;var t=this._x0,n=this._y0,i=this._x1,o=this._y1;if(isNaN(t))i=(t=Math.floor(e))+1,o=(n=Math.floor(r))+1;else{for(var u=i-t||1,a=this._root,s,f;t>e||e>=i||n>r||r>=o;)switch(f=(r<n)<<1|e<t,s=new Array(4),s[f]=a,a=s,u*=2,f){case 0:i=t+u,o=n+u;break;case 1:t=i-u,o=n+u;break;case 2:i=t+u,n=o-u;break;case 3:t=i-u,n=o-u;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=n,this._x1=i,this._y1=o,this}function Fo(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function Oo(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Z(e,r,t,n,i){this.node=e,this.x0=r,this.y0=t,this.x1=n,this.y1=i}function zo(e,r,t){var n,i=this._x0,o=this._y0,u,a,s,f,c=this._x1,d=this._y1,l=[],p=this._root,g,y;for(p&&l.push(new Z(p,i,o,c,d)),t==null?t=1/0:(i=e-t,o=r-t,c=e+t,d=r+t,t*=t);g=l.pop();)if(!(!(p=g.node)||(u=g.x0)>c||(a=g.y0)>d||(s=g.x1)<i||(f=g.y1)<o))if(p.length){var v=(u+s)/2,h=(a+f)/2;l.push(new Z(p[3],v,h,s,f),new Z(p[2],u,h,v,f),new Z(p[1],v,a,s,h),new Z(p[0],u,a,v,h)),(y=(r>=h)<<1|e>=v)&&(g=l[l.length-1],l[l.length-1]=l[l.length-1-y],l[l.length-1-y]=g)}else{var m=e-+this._x.call(null,p.data),E=r-+this._y.call(null,p.data),w=m*m+E*E;if(w<t){var N=Math.sqrt(t=w);i=e-N,o=r-N,c=e+N,d=r+N,n=p.data}}return n}function Yo(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var r,t=this._root,n,i,o,u=this._x0,a=this._y0,s=this._x1,f=this._y1,c,d,l,p,g,y,v,h;if(!t)return this;if(t.length)for(;;){if((g=c>=(l=(u+s)/2))?u=l:s=l,(y=d>=(p=(a+f)/2))?a=p:f=p,r=t,!(t=t[v=y<<1|g]))return this;if(!t.length)break;(r[v+1&3]||r[v+2&3]||r[v+3&3])&&(n=r,h=v)}for(;t.data!==e;)if(i=t,!(t=t.next))return this;return(o=t.next)&&delete t.next,i?(o?i.next=o:delete i.next,this):r?(o?r[v]=o:delete r[v],(t=r[0]||r[1]||r[2]||r[3])&&t===(r[3]||r[2]||r[1]||r[0])&&!t.length&&(n?n[h]=t:this._root=t),this):(this._root=o,this)}function Vo(e){for(var r=0,t=e.length;r<t;++r)this.remove(e[r]);return this}function Xo(){return this._root}function Go(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function jo(e){var r=[],t,n=this._root,i,o,u,a,s;for(n&&r.push(new Z(n,this._x0,this._y0,this._x1,this._y1));t=r.pop();)if(!e(n=t.node,o=t.x0,u=t.y0,a=t.x1,s=t.y1)&&n.length){var f=(o+a)/2,c=(u+s)/2;(i=n[3])&&r.push(new Z(i,f,c,a,s)),(i=n[2])&&r.push(new Z(i,o,c,f,s)),(i=n[1])&&r.push(new Z(i,f,u,a,c)),(i=n[0])&&r.push(new Z(i,o,u,f,c))}return this}function $o(e){var r=[],t=[],n;for(this._root&&r.push(new Z(this._root,this._x0,this._y0,this._x1,this._y1));n=r.pop();){var i=n.node;if(i.length){var o,u=n.x0,a=n.y0,s=n.x1,f=n.y1,c=(u+s)/2,d=(a+f)/2;(o=i[0])&&r.push(new Z(o,u,a,c,d)),(o=i[1])&&r.push(new Z(o,c,a,s,d)),(o=i[2])&&r.push(new Z(o,u,d,c,f)),(o=i[3])&&r.push(new Z(o,c,d,s,f))}t.push(n)}for(;n=t.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this}function Uo(e){return e[0]}function Wo(e){return arguments.length?(this._x=e,this):this._x}function Ho(e){return e[1]}function Qo(e){return arguments.length?(this._y=e,this):this._y}function _i(e,r,t){var n=new yt(r==null?Uo:r,t==null?Ho:t,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function yt(e,r,t,n,i,o){this._x=e,this._y=r,this._x0=t,this._y0=n,this._x1=i,this._y1=o,this._root=void 0}function Dn(e){for(var r={data:e.data},t=r;e=e.next;)t=t.next={data:e.data};return r}var J=_i.prototype=yt.prototype;J.copy=function(){var e=new yt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,t,n;if(!r)return e;if(!r.length)return e._root=Dn(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=Dn(n));return e};J.add=Mo;J.addAll=Do;J.cover=Bo;J.data=Fo;J.extent=Oo;J.find=zo;J.remove=Yo;J.removeAll=Vo;J.root=Xo;J.size=Go;J.visit=jo;J.visitAfter=$o;J.x=Wo;J.y=Qo;function Le(e){return function(){return e}}function de(e){return(e()-.5)*1e-6}function Zo(e){return e.index}function Bn(e,r){var t=e.get(r);if(!t)throw new Error("node not found: "+r);return t}function Jo(e){var r=Zo,t=d,n,i=Le(30),o,u,a,s,f,c=1;e==null&&(e=[]);function d(v){return 1/Math.min(a[v.source.index],a[v.target.index])}function l(v){for(var h=0,m=e.length;h<c;++h)for(var E=0,w,N,A,b,S,L,k;E<m;++E)w=e[E],N=w.source,A=w.target,b=A.x+A.vx-N.x-N.vx||de(f),S=A.y+A.vy-N.y-N.vy||de(f),L=Math.sqrt(b*b+S*S),L=(L-o[E])/L*v*n[E],b*=L,S*=L,A.vx-=b*(k=s[E]),A.vy-=S*k,N.vx+=b*(k=1-k),N.vy+=S*k}function p(){if(u){var v,h=u.length,m=e.length,E=new Map(u.map((N,A)=>[r(N,A,u),N])),w;for(v=0,a=new Array(h);v<m;++v)w=e[v],w.index=v,typeof w.source!="object"&&(w.source=Bn(E,w.source)),typeof w.target!="object"&&(w.target=Bn(E,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(v=0,s=new Array(m);v<m;++v)w=e[v],s[v]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);n=new Array(m),g(),o=new Array(m),y()}}function g(){if(u)for(var v=0,h=e.length;v<h;++v)n[v]=+t(e[v],v,e)}function y(){if(u)for(var v=0,h=e.length;v<h;++v)o[v]=+i(e[v],v,e)}return l.initialize=function(v,h){u=v,f=h,p()},l.links=function(v){return arguments.length?(e=v,p(),l):e},l.id=function(v){return arguments.length?(r=v,l):r},l.iterations=function(v){return arguments.length?(c=+v,l):c},l.strength=function(v){return arguments.length?(t=typeof v=="function"?v:Le(+v),g(),l):t},l.distance=function(v){return arguments.length?(i=typeof v=="function"?v:Le(+v),y(),l):i},l}var Ko={value:()=>{}};function bi(){for(var e=0,r=arguments.length,t={},n;e<r;++e){if(!(n=arguments[e]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new Fe(t)}function Fe(e){this._=e}function ea(e,r){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}Fe.prototype=bi.prototype={constructor:Fe,on:function(e,r){var t=this._,n=ea(e+"",t),i,o=-1,u=n.length;if(arguments.length<2){for(;++o<u;)if((i=(e=n[o]).type)&&(i=ra(t[i],e.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++o<u;)if(i=(e=n[o]).type)t[i]=Fn(t[i],e.name,r);else if(r==null)for(i in t)t[i]=Fn(t[i],e.name,null);return this},copy:function(){var e={},r=this._;for(var t in r)e[t]=r[t].slice();return new Fe(e)},call:function(e,r){if((i=arguments.length-2)>0)for(var t=new Array(i),n=0,i,o;n<i;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(r,t)},apply:function(e,r,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(r,t)}};function ra(e,r){for(var t=0,n=e.length,i;t<n;++t)if((i=e[t]).name===r)return i.value}function Fn(e,r,t){for(var n=0,i=e.length;n<i;++n)if(e[n].name===r){e[n]=Ko,e=e.slice(0,n).concat(e.slice(n+1));break}return t!=null&&e.push({name:r,value:t}),e}var pe=0,be=0,_e=0,Ei=1e3,ze,Ee,Ye=0,oe=0,Xe=0,Te=typeof performance=="object"&&performance.now?performance:Date,Ni=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Li(){return oe||(Ni(ta),oe=Te.now()+Xe)}function ta(){oe=0}function at(){this._call=this._time=this._next=null}at.prototype=Pi.prototype={constructor:at,restart:function(e,r,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?Li():+t)+(r==null?0:+r),!this._next&&Ee!==this&&(Ee?Ee._next=this:ze=this,Ee=this),this._call=e,this._time=t,ut()},stop:function(){this._call&&(this._call=null,this._time=1/0,ut())}};function Pi(e,r,t){var n=new at;return n.restart(e,r,t),n}function na(){Li(),++pe;for(var e=ze,r;e;)(r=oe-e._time)>=0&&e._call.call(void 0,r),e=e._next;--pe}function On(){oe=(Ye=Te.now())+Xe,pe=be=0;try{na()}finally{pe=0,oa(),oe=0}}function ia(){var e=Te.now(),r=e-Ye;r>Ei&&(Xe-=r,Ye=e)}function oa(){for(var e,r=ze,t,n=1/0;r;)r._call?(n>r._time&&(n=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:ze=t);Ee=e,ut(n)}function ut(e){if(!pe){be&&(be=clearTimeout(be));var r=e-oe;r>24?(e<1/0&&(be=setTimeout(On,e-Te.now()-Xe)),_e&&(_e=clearInterval(_e))):(_e||(Ye=Te.now(),_e=setInterval(ia,Ei)),pe=1,Ni(On))}}const aa=1664525,ua=1013904223,zn=4294967296;function fa(){let e=1;return()=>(e=(aa*e+ua)%zn)/zn}function sa(e){return e.x}function ca(e){return e.y}var la=10,da=Math.PI*(3-Math.sqrt(5));function va(e){var r,t=1,n=.001,i=1-Math.pow(n,1/300),o=0,u=.6,a=new Map,s=Pi(d),f=bi("tick","end"),c=fa();e==null&&(e=[]);function d(){l(),f.call("tick",r),t<n&&(s.stop(),f.call("end",r))}function l(y){var v,h=e.length,m;y===void 0&&(y=1);for(var E=0;E<y;++E)for(t+=(o-t)*i,a.forEach(function(w){w(t)}),v=0;v<h;++v)m=e[v],m.fx==null?m.x+=m.vx*=u:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=u:(m.y=m.fy,m.vy=0);return r}function p(){for(var y=0,v=e.length,h;y<v;++y){if(h=e[y],h.index=y,h.fx!=null&&(h.x=h.fx),h.fy!=null&&(h.y=h.fy),isNaN(h.x)||isNaN(h.y)){var m=la*Math.sqrt(.5+y),E=y*da;h.x=m*Math.cos(E),h.y=m*Math.sin(E)}(isNaN(h.vx)||isNaN(h.vy))&&(h.vx=h.vy=0)}}function g(y){return y.initialize&&y.initialize(e,c),y}return p(),r={tick:l,restart:function(){return s.restart(d),r},stop:function(){return s.stop(),r},nodes:function(y){return arguments.length?(e=y,p(),a.forEach(g),r):e},alpha:function(y){return arguments.length?(t=+y,r):t},alphaMin:function(y){return arguments.length?(n=+y,r):n},alphaDecay:function(y){return arguments.length?(i=+y,r):+i},alphaTarget:function(y){return arguments.length?(o=+y,r):o},velocityDecay:function(y){return arguments.length?(u=1-y,r):1-u},randomSource:function(y){return arguments.length?(c=y,a.forEach(g),r):c},force:function(y,v){return arguments.length>1?(v==null?a.delete(y):a.set(y,g(v)),r):a.get(y)},find:function(y,v,h){var m=0,E=e.length,w,N,A,b,S;for(h==null?h=1/0:h*=h,m=0;m<E;++m)b=e[m],w=y-b.x,N=v-b.y,A=w*w+N*N,A<h&&(S=b,h=A);return S},on:function(y,v){return arguments.length>1?(f.on(y,v),r):f.on(y)}}}function ha(){var e,r,t,n,i=Le(-30),o,u=1,a=1/0,s=.81;function f(p){var g,y=e.length,v=_i(e,sa,ca).visitAfter(d);for(n=p,g=0;g<y;++g)r=e[g],v.visit(l)}function c(){if(e){var p,g=e.length,y;for(o=new Array(g),p=0;p<g;++p)y=e[p],o[y.index]=+i(y,p,e)}}function d(p){var g=0,y,v,h=0,m,E,w;if(p.length){for(m=E=w=0;w<4;++w)(y=p[w])&&(v=Math.abs(y.value))&&(g+=y.value,h+=v,m+=v*y.x,E+=v*y.y);p.x=m/h,p.y=E/h}else{y=p,y.x=y.data.x,y.y=y.data.y;do g+=o[y.data.index];while(y=y.next)}p.value=g}function l(p,g,y,v){if(!p.value)return!0;var h=p.x-r.x,m=p.y-r.y,E=v-g,w=h*h+m*m;if(E*E/s<w)return w<a&&(h===0&&(h=de(t),w+=h*h),m===0&&(m=de(t),w+=m*m),w<u&&(w=Math.sqrt(u*w)),r.vx+=h*p.value*n/w,r.vy+=m*p.value*n/w),!0;if(p.length||w>=a)return;(p.data!==r||p.next)&&(h===0&&(h=de(t),w+=h*h),m===0&&(m=de(t),w+=m*m),w<u&&(w=Math.sqrt(u*w)));do p.data!==r&&(E=o[p.data.index]*n/w,r.vx+=h*E,r.vy+=m*E);while(p=p.next)}return f.initialize=function(p,g){e=p,t=g,c()},f.strength=function(p){return arguments.length?(i=typeof p=="function"?p:Le(+p),c(),f):i},f.distanceMin=function(p){return arguments.length?(u=p*p,f):Math.sqrt(u)},f.distanceMax=function(p){return arguments.length?(a=p*p,f):Math.sqrt(a)},f.theta=function(p){return arguments.length?(s=p*p,f):Math.sqrt(s)},f}const Me={springLength:20,springCoeff:1,springIterations:10,gravity:-30};function pa(e){let r=[],t=[],n=new Map,i=new Map;e.forEachNode(a=>{const s={id:a.id},f=r.length;r.push(s),n.set(a.id,f)}),e.forEachLink(a=>{const s=n.get(a.fromId),f=n.get(a.toId),c=t.length,d={source:s,target:f,index:c};t.push(d),i.set(a.id,d)});var o=va(r).force("charge",ha().strength(Me.gravity)).force("link",Jo(t).strength(Me.springCoeff).distance(Me.springLength).iterations(Me.springIterations));return o.stop(),{step:function(){o.tick()},getNodePosition:u,getLinkPosition:function(a){var s=i.get(a);return{from:s.source,to:s.target}},getGraphRect:function(){var a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return r.forEach(function(d){d.x<a&&(a=d.x),d.x>f&&(f=d.x),d.y<s&&(s=d.y),d.y>c&&(c=d.y)}),{x1:a,x2:f,y1:s,y2:c}},isNodePinned:function(){return!1},pinNode:function(){},dispose:function(){},setNodePosition:function(a,s,f){var c=u(a);c.x=s,c.y=f}};function u(a){var s=n.get(a);return r[s]}}const ga=e=>({id:e.name,data:e}),ma=e=>({fromId:e.from,toId:e.to,data:e});function ya(e){let r;return{c(){r=ee("p"),r.textContent="Loading graph..."},m(t,n){Ae(t,r,n)},p:H,i:H,o:H,d(t){t&&me(r)}}}function wa(e){let r=e[1],t,n,i=Yn(e);return{c(){i.c(),t=ki()},m(o,u){i.m(o,u),Ae(o,t,u),n=!0},p(o,u){u&2&&Se(r,r=o[1])?(Hn(),he(i,1,1,H),Qn(),i=Yn(o),i.c(),ie(i,1),i.m(t.parentNode,t)):i.p(o,u)},i(o){n||(ie(i),n=!0)},o(o){he(i),n=!1},d(o){o&&me(t),i.d(o)}}}function Yn(e){let r,t;return r=new ko({props:{graph:e[0],layoutSpecification:e[3][e[1]],positions:Ci(Kn)}}),{c(){Zn(r.$$.fragment)},m(n,i){ft(r,n,i),t=!0},p(n,i){const o={};i&1&&(o.graph=n[0]),i&2&&(o.layoutSpecification=n[3][n[1]]),r.$set(o)},i(n){t||(ie(r.$$.fragment,n),t=!0)},o(n){he(r.$$.fragment,n),t=!1},d(n){st(r,n)}}}function xa(e){let r,t,n,i,o,u,a,s,f,c,d,l,p,g=e[2]?"Pause":"Continue",y,v,h,m,E,w,N,A,b;o=new Xi({});const S=[wa,ya],L=[];function k(R,C){return R[0]?0:1}return E=k(e),w=L[E]=S[E](e),{c(){r=ee("main"),t=ee("h1"),t.textContent="Vite + Svelte",n=qe(),i=ee("div"),Zn(o.$$.fragment),u=qe(),a=ee("div"),s=ee("button"),f=re("Switch layout (now: "),c=re(e[1]),d=re(")"),l=qe(),p=ee("button"),y=re(g),v=re(" simulation"),h=qe(),m=ee("div"),w.c(),De(i,"class","card"),De(a,"class","card"),De(m,"class","card")},m(R,C){Ae(R,r,C),W(r,t),W(r,n),W(r,i),ft(o,i,null),W(r,u),W(r,a),W(a,s),W(s,f),W(s,c),W(s,d),W(a,l),W(a,p),W(p,y),W(p,v),W(r,h),W(r,m),L[E].m(m,null),N=!0,A||(b=[et(s,"click",e[4]),et(p,"click",e[5])],A=!0)},p(R,[C]){(!N||C&2)&&rt(c,R[1]),(!N||C&4)&&g!==(g=R[2]?"Pause":"Continue")&&rt(y,g);let B=E;E=k(R),E===B?L[E].p(R,C):(Hn(),he(L[B],1,1,()=>{L[B]=null}),Qn(),w=L[E],w?w.p(R,C):(w=L[E]=S[E](R),w.c()),ie(w,1),w.m(m,null))},i(R){N||(ie(o.$$.fragment,R),ie(w),N=!0)},o(R){he(o.$$.fragment,R),he(w),N=!1},d(R){R&&me(r),st(o),L[E].d(),A=!1,ge(b)}}}function _a(e,r,t){let n;jn(e,ot,c=>t(2,n=c));let i,o="viva",u={viva:Io,d3:pa};function a(){t(1,o=o==="viva"?"d3":"viva")}function s(){qi(ot,n=!n,n)}function f(c){console.log("Received Shiny data:"),console.log(c),t(0,i=Oe.Graph.serializer().loadFromJSON(c,ga,ma)),globalThis.graph_json=c}return Un(()=>{jQuery(document).on("shiny:connected",function(){console.log("Shiny connected"),Shiny.setInputValue("svelteAppMounted",!0),Shiny.addCustomMessageHandler("dataTransferredFromServer",f)})}),[i,o,n,u,a,s]}class ba extends lt{constructor(r){super(),ct(this,r,_a,xa,Se,{})}}new ba({target:document.getElementById("app")});
