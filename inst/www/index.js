var Li=Object.defineProperty;var Pi=(e,r,t)=>r in e?Li(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var $e=(e,r,t)=>Pi(e,typeof r!="symbol"?r+"":r,t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function J(){}function Vn(e){return e()}function xt(){return Object.create(null)}function he(e){e.forEach(Vn)}function Gn(e){return typeof e=="function"}function Pe(e,r){return e!=e?r==r:e!==r||e&&typeof e=="object"||typeof e=="function"}function Ti(e){return Object.keys(e).length===0}function Xn(e,...r){if(e==null){for(const n of r)n(void 0);return J}const t=e.subscribe(...r);return t.unsubscribe?()=>t.unsubscribe():t}function Si(e){let r;return Xn(e,t=>r=t)(),r}function $n(e,r,t){e.$$.on_destroy.push(Xn(r,t))}function Ai(e,r,t){return e.set(t),r}function W(e,r){e.appendChild(r)}function ut(e,r,t){e.insertBefore(r,t||null)}function ze(e){e.parentNode&&e.parentNode.removeChild(e)}function ee(e){return document.createElement(e)}function re(e){return document.createTextNode(e)}function Se(){return re(" ")}function Jr(e,r,t,n){return e.addEventListener(r,t,n),()=>e.removeEventListener(r,t,n)}function ke(e,r,t){t==null?e.removeAttribute(r):e.getAttribute(r)!==t&&e.setAttribute(r,t)}function Ci(e){return Array.from(e.childNodes)}function et(e,r){r=""+r,e.data!==r&&(e.data=r)}function _t(e,r,t,n){t==null?e.style.removeProperty(r):e.style.setProperty(r,t,"")}let Ne;function _e(e){Ne=e}function jn(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function Un(e){jn().$$.on_mount.push(e)}function qi(e){jn().$$.on_destroy.push(e)}const ce=[],rt=[];let de=[];const Et=[],Ri=Promise.resolve();let tt=!1;function ki(){tt||(tt=!0,Ri.then(Wn))}function nt(e){de.push(e)}const je=new Set;let ue=0;function Wn(){if(ue!==0)return;const e=Ne;do{try{for(;ue<ce.length;){const r=ce[ue];ue++,_e(r),Ii(r.$$)}}catch(r){throw ce.length=0,ue=0,r}for(_e(null),ce.length=0,ue=0;rt.length;)rt.pop()();for(let r=0;r<de.length;r+=1){const t=de[r];je.has(t)||(je.add(t),t())}de.length=0}while(ce.length);for(;Et.length;)Et.pop()();tt=!1,je.clear(),_e(e)}function Ii(e){if(e.fragment!==null){e.update(),he(e.before_update);const r=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,r),e.after_update.forEach(nt)}}function Di(e){const r=[],t=[];de.forEach(n=>e.indexOf(n)===-1?r.push(n):t.push(n)),t.forEach(n=>n()),de=r}const Ie=new Set;let ne;function Mi(){ne={r:0,c:[],p:ne}}function Bi(){ne.r||he(ne.c),ne=ne.p}function Ee(e,r){e&&e.i&&(Ie.delete(e),e.i(r))}function De(e,r,t,n){if(e&&e.o){if(Ie.has(e))return;Ie.add(e),ne.c.push(()=>{Ie.delete(e),n&&(t&&e.d(1),n())}),e.o(r)}else n&&n()}function Hn(e){e&&e.c()}function ft(e,r,t){const{fragment:n,after_update:i}=e.$$;n&&n.m(r,t),nt(()=>{const a=e.$$.on_mount.map(Vn).filter(Gn);e.$$.on_destroy?e.$$.on_destroy.push(...a):he(a),e.$$.on_mount=[]}),i.forEach(nt)}function st(e,r){const t=e.$$;t.fragment!==null&&(Di(t.after_update),he(t.on_destroy),t.fragment&&t.fragment.d(r),t.on_destroy=t.fragment=null,t.ctx=[])}function Fi(e,r){e.$$.dirty[0]===-1&&(ce.push(e),ki(),e.$$.dirty.fill(0)),e.$$.dirty[r/31|0]|=1<<r%31}function ct(e,r,t,n,i,a,u=null,o=[-1]){const s=Ne;_e(e);const f=e.$$={fragment:null,ctx:[],props:a,update:J,not_equal:i,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(s?s.$$.context:[])),callbacks:xt(),dirty:o,skip_bound:!1,root:r.target||s.$$.root};u&&u(f.root);let c=!1;if(f.ctx=t?t(e,r.props||{},(d,l,...p)=>{const g=p.length?p[0]:l;return f.ctx&&i(f.ctx[d],f.ctx[d]=g)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](g),c&&Fi(e,d)),l}):[],f.update(),c=!0,he(f.before_update),f.fragment=n?n(f.ctx):!1,r.target){if(r.hydrate){const d=Ci(r.target);f.fragment&&f.fragment.l(d),d.forEach(ze)}else f.fragment&&f.fragment.c();r.intro&&Ee(e.$$.fragment),ft(e,r.target,r.anchor),Wn()}_e(s)}class lt{constructor(){$e(this,"$$");$e(this,"$$set")}$destroy(){st(this,1),this.$destroy=J}$on(r,t){if(!Gn(t))return J;const n=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(r){this.$$set&&!Ti(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}}const Oi="4";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oi);function zi(e){let r,t,n,i,a;return{c(){r=ee("button"),t=re("count is "),n=re(e[0])},m(u,o){ut(u,r,o),W(r,t),W(r,n),i||(a=Jr(r,"click",e[1]),i=!0)},p(u,[o]){o&1&&et(n,u[0])},i:J,o:J,d(u){u&&ze(r),i=!1,a()}}}function Yi(e,r,t){let n=0;return[n,()=>{t(0,n+=1)}]}class Vi extends lt{constructor(r){super(),ct(this,r,Yi,zi,Pe,{})}}const fe=[];function Qn(e,r=J){let t;const n=new Set;function i(o){if(Pe(e,o)&&(e=o,t)){const s=!fe.length;for(const f of n)f[1](),fe.push(f,e);if(s){for(let f=0;f<fe.length;f+=2)fe[f][0](fe[f+1]);fe.length=0}}}function a(o){i(o(e))}function u(o,s=J){const f=[o,s];return n.add(f),n.size===1&&(t=r(i,a)||J),o(e),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:i,update:a,subscribe:u}}const Zn=Qn([]),it=Qn(!0);var bt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Gi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Te={random:Kn,randomIterator:Xi};function Kn(e){var r=typeof e=="number"?e:+new Date,t=function(){return r=r+2127912214+(r<<12)&4294967295,r=(r^3345072700^r>>>19)&4294967295,r=r+374761393+(r<<5)&4294967295,r=(r+3550635116^r<<9)&4294967295,r=r+4251993797+(r<<3)&4294967295,r=(r^3042594569^r>>>16)&4294967295,(r&268435455)/268435456};return{next:function(n){return Math.floor(t()*n)},nextDouble:function(){return t()}}}function Xi(e,r){var t=r||Kn();if(typeof t.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(n){var i,a,u;for(i=e.length-1;i>0;--i)a=t.next(i+1),u=e[a],e[a]=e[i],e[i]=u,n(u);e.length&&n(e[0])},shuffle:function(){var n,i,a;for(n=e.length-1;n>0;--n)i=t.next(n+1),a=e[i],e[i]=e[n],e[n]=a;return e}}}var Ue,Nt;function pe(){if(Nt)return Ue;Nt=1,Ue=e;function e(r,t){var n;if(r||(r={}),t){for(n in t)if(t.hasOwnProperty(n)){var i=r.hasOwnProperty(n),a=typeof t[n],u=!i||typeof r[n]!==a;u?r[n]=t[n]:a==="object"&&(r[n]=e(r[n],t[n]))}}return r}return Ue}var We,Lt;function oe(){if(Lt)return We;Lt=1,We=function(t){r(t);var n=e(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};function e(t){var n=Object.create(null);return{on:function(i,a,u){if(typeof a!="function")throw new Error("callback is expected to be a function");var o=n[i];return o||(o=n[i]=[]),o.push({callback:a,ctx:u}),t},off:function(i,a){var u=typeof i=="undefined";if(u)return n=Object.create(null),t;if(n[i]){var o=typeof a!="function";if(o)delete n[i];else for(var s=n[i],f=0;f<s.length;++f)s[f].callback===a&&s.splice(f,1)}return t},fire:function(i){var a=n[i];if(!a)return t;var u;arguments.length>1&&(u=Array.prototype.splice.call(arguments,1));for(var o=0;o<a.length;++o){var s=a[o];s.callback.apply(s.ctx,u)}return t}}}function r(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],i=0;i<n.length;++i)if(t.hasOwnProperty(n[i]))throw new Error("Subject cannot be eventified, since it already has property '"+n[i]+"'")}return We}var He,Pt;function $i(){return Pt||(Pt=1,He="0.10.1"),He}var Qe,Tt;function dt(){if(Tt)return Qe;Tt=1,Qe=r;var e=oe();function r(o){o=o||{},"uniqueLinkId"in o&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now own each graph
is considered to be not a multigraph by default (each edge is unique).`),o.multigraph=o.uniqueLinkId),o.multigraph===void 0&&(o.multigraph=!1);var s=typeof Object.create=="function"?Object.create(null):{},f=[],c={},d=0,l=0,p=ae(),g=o.multigraph?F:q,y=[],v=G,h=G,m=G,N=G,w={addNode:b,addLink:M,removeLink:E,removeNode:R,getNode:P,getNodesCount:function(){return d},getLinksCount:function(){return f.length},getLinks:T,forEachNode:p,forEachLinkedNode:B,forEachLink:C,beginUpdate:m,endUpdate:N,clear:_,hasLink:S,hasNode:P,getLink:S};return e(w),L(),w;function L(){var k=w.on;w.on=I;function I(){return w.beginUpdate=m=U,w.endUpdate=N=X,v=A,h=x,w.on=k,k.apply(w,arguments)}}function A(k,I){y.push({link:k,changeType:I})}function x(k,I){y.push({node:k,changeType:I})}function b(k,I){if(k===void 0)throw new Error("Invalid node identifier");m();var Y=P(k);return Y?(Y.data=I,h(Y,"update")):(Y=new n(k,I),d++,h(Y,"add")),s[k]=Y,N(),Y}function P(k){return s[k]}function R(k){var I=P(k);if(!I)return!1;m();var Y=I.links;if(Y){I.links=null;for(var V=0;V<Y.length;++V)E(Y[V])}return delete s[k],d--,h(I,"remove"),N(),!0}function M(k,I,Y){m();var V=P(k)||b(k),$=P(I)||b(I),j=g(k,I,Y);return f.push(j),i(V,j),k!==I&&i($,j),v(j,"add"),N(),j}function q(k,I,Y){var V=u(k,I);return new a(k,I,Y,V)}function F(k,I,Y){var V=u(k,I),$=c.hasOwnProperty(V);if($||S(k,I)){$||(c[V]=0);var j="@"+ ++c[V];V=u(k+j,I+j)}return new a(k,I,Y,V)}function T(k){var I=P(k);return I?I.links:null}function E(k){if(!k)return!1;var I=t(k,f);if(I<0)return!1;m(),f.splice(I,1);var Y=P(k.fromId),V=P(k.toId);return Y&&(I=t(k,Y.links),I>=0&&Y.links.splice(I,1)),V&&(I=t(k,V.links),I>=0&&V.links.splice(I,1)),v(k,"remove"),N(),!0}function S(k,I){var Y=P(k),V;if(!Y||!Y.links)return null;for(V=0;V<Y.links.length;++V){var $=Y.links[V];if($.fromId===k&&$.toId===I)return $}return null}function _(){m(),p(function(k){R(k.id)}),N()}function C(k){var I,Y;if(typeof k=="function")for(I=0,Y=f.length;I<Y;++I)k(f[I])}function B(k,I,Y){var V=P(k);if(V&&V.links&&typeof I=="function")return Y?H(V.links,k,I):O(V.links,k,I)}function O(k,I,Y){for(var V,$=0;$<k.length;++$){var j=k[$],Xe=j.fromId===I?j.toId:j.fromId;if(V=Y(s[Xe],j),V)return!0}}function H(k,I,Y){for(var V,$=0;$<k.length;++$){var j=k[$];if(j.fromId===I&&(V=Y(s[j.toId],j),V))return!0}}function G(){}function U(){l+=1}function X(){l-=1,l===0&&y.length>0&&(w.fire("changed",y),y.length=0)}function ae(){return Object.keys?ge:Ge}function ge(k){if(typeof k=="function"){for(var I=Object.keys(s),Y=0;Y<I.length;++Y)if(k(s[I[Y]]))return!0}}function Ge(k){if(typeof k=="function"){var I;for(I in s)if(k(s[I]))return!0}}}function t(o,s){if(!s)return-1;if(s.indexOf)return s.indexOf(o);var f=s.length,c;for(c=0;c<f;c+=1)if(s[c]===o)return c;return-1}function n(o,s){this.id=o,this.links=null,this.data=s}function i(o,s){o.links?o.links.push(s):o.links=[s]}function a(o,s,f,c){this.fromId=o,this.toId=s,this.data=f,this.id=c}function u(o,s){return o.toString()+"ðŸ‘‰ "+s.toString()}return Qe}var Ze,St;function ji(){if(St)return Ze;St=1,Ze=r;var e=dt();function r(n,i,a){var u;i=i||t,a=a||t,typeof n=="string"?u=JSON.parse(n):u=n;var o=e(),s;if(u.links===void 0||u.nodes===void 0)throw new Error("Cannot load graph without links and nodes");for(s=0;s<u.nodes.length;++s){var f=i(u.nodes[s]);if(!f.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");o.addNode(f.id,f.data)}for(s=0;s<u.links.length;++s){var c=a(u.links[s]);if(!c.hasOwnProperty("fromId")||!c.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");o.addLink(c.fromId,c.toId,c.data)}return o}function t(n){return n}return Ze}var Ke,At;function Ui(){if(At)return Ke;At=1,Ke=e;function e(r,t,n){var i={nodes:[],links:[]},a=t||f,u=n||c;return r.forEachNode(o),r.forEachLink(s),JSON.stringify(i);function o(d){i.nodes.push(a(d))}function s(d){i.links.push(u(d))}function f(d){var l={id:d.id};return d.data!==void 0&&(l.data=d.data),l}function c(d){var l={fromId:d.fromId,toId:d.toId};return d.data!==void 0&&(l.data=d.data),l}}return Ke}var se={},Je,Ct;function Wi(){if(Ct)return Je;Ct=1,Je=e;function e(i,a){var u,o=Object.create(null);if(a=(a||"both").toLowerCase(),a==="both"||a==="inout")u=n;else if(a==="in")u=r;else if(a==="out")u=t;else throw new Error("Expected centrality degree kind is: in, out or both");return i.forEachNode(s),o;function s(f){var c=i.getLinks(f.id);o[f.id]=u(c,f.id)}}function r(i,a){var u=0;if(!i)return u;for(var o=0;o<i.length;o+=1)u+=i[o].toId===a?1:0;return u}function t(i,a){var u=0;if(!i)return u;for(var o=0;o<i.length;o+=1)u+=i[o].fromId===a?1:0;return u}function n(i){return i?i.length:0}return Je}var er,qt;function Hi(){if(qt)return er;qt=1,er=e;function e(r,t){var n=[],i=[],a=Object.create(null),u=Object.create(null),o=Object.create(null),s=Object.create(null),f,c=Object.create(null);return r.forEachNode(l),r.forEachNode(p),t||Object.keys(c).forEach(d),c;function d(h){c[h]/=2}function l(h){c[h.id]=0}function p(h){f=h.id,v(f),g()}function g(){for(r.forEachNode(y);i.length;){for(var h=i.pop(),m=(1+s[h])/o[h],N=a[h],w=0;w<N.length;++w){var L=N[w];s[L]+=o[L]*m}h!==f&&(c[h]+=s[h])}}function y(h){s[h.id]=0}function v(h){for(r.forEachNode(w),u[h]=0,o[h]=1,n.push(h);n.length;){var m=n.shift();i.push(m),r.forEachLinkedNode(m,N,t)}function N(A){L(A.id)}function w(A){var x=A.id;a[x]=[],u[x]=-1,o[x]=0}function L(A){u[A]===-1&&(u[A]=u[m]+1,n.push(A)),u[A]===u[m]+1&&(o[A]+=o[m],a[A].push(m))}}}return er}var rr,Rt;function Qi(){if(Rt)return rr;Rt=1,rr=e;function e(r,t){var n=[],i=Object.create(null),a,u=Object.create(null);return r.forEachNode(o),r.forEachNode(s),u;function o(d){u[d.id]=0}function s(d){a=d.id,c(a),f()}function f(){var d=Object.keys(i).map(function(g){return i[g]}).filter(function(g){return g!==-1}),l=d.length,p=d.reduce(function(g,y){return g+y});p>0?u[a]=(l-1)/p:u[a]=0}function c(d){for(r.forEachNode(p),i[d]=0,n.push(d);n.length;){var l=n.shift();r.forEachLinkedNode(l,g,t)}function p(y){var v=y.id;i[v]=-1}function g(y){var v=y.id;i[v]===-1&&(i[v]=i[l]+1,n.push(v))}}}return rr}var tr,kt;function Zi(){if(kt)return tr;kt=1,tr=e;function e(r,t){var n=[],i=Object.create(null),a,u=Object.create(null);return r.forEachNode(o),r.forEachNode(s),u;function o(d){u[d.id]=0}function s(d){a=d.id,c(a),f()}function f(){var d=0;Object.keys(i).forEach(function(l){var p=i[l];d<p&&(d=p)}),u[a]=d}function c(d){for(r.forEachNode(p),i[d]=0,n.push(d);n.length;){var l=n.shift();r.forEachLinkedNode(l,g,t)}function p(y){var v=y.id;i[v]=-1}function g(y){var v=y.id;i[v]===-1&&(i[v]=i[l]+1,n.push(v))}}}return tr}var It;function Ki(){return It||(It=1,se.degree=Wi(),se.betweenness=Hi(),se.closeness=Qi(),se.eccentricity=Zi()),se}var nr,Dt;function Ji(){if(Dt)return nr;Dt=1;var e=Ki();nr=r;function r(){return{betweennessCentrality:t,degreeCentrality:n}}function t(a){var u=e.betweenness(a);return i(u)}function n(a,u){var o=e.degree(a,u);return i(o)}function i(a){return Object.keys(a).sort(u).map(o);function u(s,f){return a[f]-a[s]}function o(s){return{key:s,value:a[s]}}}return nr}var ir,Mt;function eo(){if(Mt)return ir;Mt=1,ir=e;function e(){return{density:function(r,t){var n=r.getNodesCount();return n===0?NaN:t?r.getLinksCount()/(n*(n-1)):2*r.getLinksCount()/(n*(n-1))}}}return ir}var or,Bt;function Jn(){if(Bt)return or;Bt=1,or=e;function e(r,t,n,i,a,u,o,s){var f,c,d,l,p,g,y,v,h,m,N,w,L,A={x:0,y:0};return f=i-t,d=r-n,p=n*t-r*i,h=f*a+d*u+p,m=f*o+d*s+p,h!==0&&m!==0&&h>=0==m>=4||(c=s-u,l=a-o,g=o*u-a*s,y=c*r+l*t+g,v=c*n+l*i+g,y!==0&&v!==0&&y>=0==v>=0)||(N=f*l-c*d,N===0)?null:(w=N<0?-N/2:N/2,w=0,L=d*g-l*p,A.x=(L<0?L-w:L+w)/N,L=c*p-f*g,A.y=(L<0?L-w:L+w)/N,A)}return or}var ar,Ft;function ro(){if(Ft)return ar;Ft=1;var e=Jn();ar=r;function r(t,n,i,a,u,o,s,f){return e(t,n,t,a,u,o,s,f)||e(t,a,i,a,u,o,s,f)||e(i,a,i,n,u,o,s,f)||e(i,n,t,n,u,o,s,f)}return ar}var ur,Ot;function Ye(){if(Ot)return ur;Ot=1,ur=e;function e(n){return{createProgram:a,extendArray:u,copyArrayPart:r,swapArrayPart:t,getLocations:o,context:n};function i(s,f){var c=n.createShader(f);if(n.shaderSource(c,s),n.compileShader(c),!n.getShaderParameter(c,n.COMPILE_STATUS)){var d=n.getShaderInfoLog(c);throw window.alert(d),d}return c}function a(s,f){var c=n.createProgram(),d=i(s,n.VERTEX_SHADER),l=i(f,n.FRAGMENT_SHADER);if(n.attachShader(c,d),n.attachShader(c,l),n.linkProgram(c),!n.getProgramParameter(c,n.LINK_STATUS)){var p=n.getShaderInfoLog(c);throw window.alert(p),p}return c}function u(s,f,c){if((f+1)*c>s.length){var d=new Float32Array(s.length*c*2);return d.set(s),d}return s}function o(s,f){for(var c={},d=0;d<f.length;++d){var l=f[d],p=-1;if(l[0]==="a"&&l[1]==="_"){if(p=n.getAttribLocation(s,l),p===-1)throw new Error("Program doesn't have required attribute: "+l);c[l.slice(2)]=p}else if(l[0]==="u"&&l[1]==="_"){if(p=n.getUniformLocation(s,l),p===null)throw new Error("Program doesn't have required uniform: "+l);c[l.slice(2)]=p}else throw new Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'")}return c}}function r(n,i,a,u){for(var o=0;o<u;++o)n[i+o]=n[a+o]}function t(n,i,a,u){for(var o=0;o<u;++o){var s=n[i+o];n[i+o]=n[a+o],n[a+o]=s}}return ur}var fr,zt;function ei(){if(zt)return fr;zt=1,fr=e();function e(){return{on:r,off:r,stop:r}}function r(){}return fr}var sr,Yt;function ri(){if(Yt)return sr;Yt=1;var e=ei();sr=r();function r(){return typeof document===void 0?e:{on:t,off:n}}function t(i,a){document.addEventListener(i,a)}function n(i,a){document.removeEventListener(i,a)}return sr}var cr,Vt;function ti(){if(Vt)return cr;Vt=1;var e=ri();cr=r;function r(t){if(t.webglInputEvents)return t.webglInputEvents;var n=null,i=[],a=[],u=[],o=[],s=[],f=[],c=[],d,l,p=t.getGraphicsRoot();F(p);var g={mouseEnter:x,mouseLeave:A,mouseDown:L,mouseUp:w,mouseMove:N,click:m,dblClick:h,mouseCapture:v,releaseMouseCapture:y};return t.webglInputEvents=g,g;function y(){n=null}function v(T){n=T}function h(T){return typeof T=="function"&&c.push(T),g}function m(T){return typeof T=="function"&&f.push(T),g}function N(T){return typeof T=="function"&&s.push(T),g}function w(T){return typeof T=="function"&&o.push(T),g}function L(T){return typeof T=="function"&&u.push(T),g}function A(T){return typeof T=="function"&&a.push(T),g}function x(T){return typeof T=="function"&&i.push(T),g}function b(T,E,S){if(T&&T.size){var _=T.position,C=T.size;return _.x-C<E&&E<_.x+C&&_.y-C<S&&S<_.y+C}return!0}function P(T){return t.getNodeAtClientPos(T,b)}function R(T){T.stopPropagation?T.stopPropagation():T.cancelBubble=!0}function M(T){return R(T),!1}function q(T,E){var S,_;for(S=0;S<T.length;S+=1)if(_=T[S].apply(void 0,E),_)return!0}function F(T){var E={x:0,y:0},S=null,_=1,C=+new Date,B=function(G){q(s,[S,G]),E.x=G.clientX,E.y=G.clientY},O=function(){e.off("mousemove",B),e.off("mouseup",O)},H=function(){l=T.getBoundingClientRect()};window.addEventListener("resize",H),H(),T.addEventListener("mousemove",function(G){if(!n){_++%7===0&&(H(),_=1);var U=!1,X;E.x=G.clientX-l.left,E.y=G.clientY-l.top,X=P(E),X&&S!==X?(S&&q(a,[S]),S=X,U=U||q(i,[S])):X===null&&S!==X&&(U=U||q(a,[S]),S=null),U&&R(G)}}),T.addEventListener("mousedown",function(G){var U=!1,X;H(),E.x=G.clientX-l.left,E.y=G.clientY-l.top,X=[P(E),G],X[0]?(U=q(u,X),e.on("mousemove",B),e.on("mouseup",O),d=window.document.onselectstart,window.document.onselectstart=M,S=X[0]):S=null,U&&R(G)}),T.addEventListener("mouseup",function(G){var U=+new Date,X;E.x=G.clientX-l.left,E.y=G.clientY-l.top;var ae=P(E),ge=ae===S;X=[ae||S,G],X[0]&&(window.document.onselectstart=d,U-C<400&&ge?q(c,X):q(f,X),C=U,q(o,X)&&R(G))})}}return cr}var Ae={exports:{}},me={exports:{}},Gt;function to(){if(Gt)return me.exports;Gt=1,me.exports=e,me.exports.random=e,me.exports.randomIterator=a;function e(u){var o=typeof u=="number"?u:+new Date;return new r(o)}function r(u){this.seed=u}r.prototype.next=i,r.prototype.nextDouble=n,r.prototype.uniform=n,r.prototype.gaussian=t;function t(){var u,o,s;do o=this.nextDouble()*2-1,s=this.nextDouble()*2-1,u=o*o+s*s;while(u>=1||u===0);return o*Math.sqrt(-2*Math.log(u)/u)}function n(){var u=this.seed;return u=u+2127912214+(u<<12)&4294967295,u=(u^3345072700^u>>>19)&4294967295,u=u+374761393+(u<<5)&4294967295,u=(u+3550635116^u<<9)&4294967295,u=u+4251993797+(u<<3)&4294967295,u=(u^3042594569^u>>>16)&4294967295,this.seed=u,(u&268435455)/268435456}function i(u){return Math.floor(this.nextDouble()*u)}function a(u,o){var s=o||e();if(typeof s.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:c,shuffle:f};function f(){var d,l,p;for(d=u.length-1;d>0;--d)l=s.next(d+1),p=u[l],u[l]=u[d],u[d]=p;return u}function c(d){var l,p,g;for(l=u.length-1;l>0;--l)p=s.next(l+1),g=u[p],u[p]=u[l],u[l]=g,d(g);u.length&&d(u[0])}}return me.exports}var Xt;function no(){if(Xt)return Ae.exports;Xt=1;var e=dt();Ae.exports=r(e),Ae.exports.factory=r;function r(t){return{ladder:n,complete:a,completeBipartite:u,balancedBinTree:c,path:o,circularLadder:i,grid:s,grid3:f,noLinks:d,wattsStrogatz:p,cliqueCircle:l};function n(g){if(!g||g<0)throw new Error("Invalid number of nodes");var y=t(),v;for(v=0;v<g-1;++v)y.addLink(v,v+1),y.addLink(g+v,g+v+1),y.addLink(v,g+v);return y.addLink(g-1,2*g-1),y}function i(g){if(!g||g<0)throw new Error("Invalid number of nodes");var y=n(g);return y.addLink(0,g-1),y.addLink(g,2*g-1),y}function a(g){if(!g||g<1)throw new Error("At least two nodes are expected for complete graph");var y=t(),v,h;for(v=0;v<g;++v)for(h=v+1;h<g;++h)v!==h&&y.addLink(v,h);return y}function u(g,y){if(!g||!y||g<0||y<0)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var v=t(),h,m;for(h=0;h<g;++h)for(m=g;m<g+y;++m)v.addLink(h,m);return v}function o(g){if(!g||g<0)throw new Error("Invalid number of nodes");var y=t(),v;for(y.addNode(0),v=1;v<g;++v)y.addLink(v-1,v);return y}function s(g,y){if(g<1||y<1)throw new Error("Invalid number of nodes in grid graph");var v=t(),h,m;if(g===1&&y===1)return v.addNode(0),v;for(h=0;h<g;++h)for(m=0;m<y;++m){var N=h+m*g;h>0&&v.addLink(N,h-1+m*g),m>0&&v.addLink(N,h+(m-1)*g)}return v}function f(g,y,v){if(g<1||y<1||v<1)throw new Error("Invalid number of nodes in grid3 graph");var h=t(),m,N,w;if(g===1&&y===1&&v===1)return h.addNode(0),h;for(w=0;w<v;++w)for(m=0;m<g;++m)for(N=0;N<y;++N){var L=w*g*y,A=m+N*g+L;m>0&&h.addLink(A,m-1+N*g+L),N>0&&h.addLink(A,m+(N-1)*g+L),w>0&&h.addLink(A,m+N*g+(w-1)*g*y)}return h}function c(g){if(g<0)throw new Error("Invalid number of nodes in balanced tree");var y=t(),v=Math.pow(2,g),h;for(g===0&&y.addNode(1),h=1;h<v;++h){var m=h,N=m*2,w=m*2+1;y.addLink(m,N),y.addLink(m,w)}return y}function d(g){if(g<0)throw new Error("Number of nodes should be >= 0");var y=t(),v;for(v=0;v<g;++v)y.addNode(v);return y}function l(g,y){if(g<1)throw new Error("Invalid number of cliqueCount in cliqueCircle");if(y<1)throw new Error("Invalid number of cliqueSize in cliqueCircle");for(var v=t(),h=0;h<g;++h)m(y,h*y),h>0&&v.addLink(h*y,h*y-1);return v.addLink(0,v.getNodesCount()-1),v;function m(N,w){for(var L=0;L<N;++L)v.addNode(L+w);for(var L=0;L<N;++L)for(var A=L+1;A<N;++A)v.addLink(L+w,A+w)}}function p(g,y,v,h){if(y>=g)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var m=to().random(h||42),N=t(),w,L;for(w=0;w<g;++w)N.addNode(w);for(var A=Math.floor(y/2+1),x=1;x<A;++x)for(w=0;w<g;++w)L=(x+w)%g,N.addLink(w,L);for(x=1;x<A;++x)for(w=0;w<g;++w)if(m.nextDouble()<v){var b=w;L=(x+w)%g;var P=m.next(g),R=P===b||N.hasLink(b,P);if(R&&N.getLinks(b).length===g-1)continue;for(;R;)P=m.next(g),R=P===b||N.hasLink(b,P);var M=N.hasLink(b,L);N.removeLink(M),N.addLink(b,P)}return N}}return Ae.exports}var lr,$t;function ni(){if($t)return lr;$t=1,lr=e();function e(){if(typeof window=="undefined"||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var r=window.navigator.userAgent.toLowerCase(),t=/(webkit)[ \/]([\w.]+)/,n=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(msie) ([\w.]+)/,a=/(mozilla)(?:.*? rv:([\w.]+))?/,u=t.exec(r)||n.exec(r)||i.exec(r)||r.indexOf("compatible")<0&&a.exec(r)||[];return{browser:u[1]||"",version:u[2]||"0"}}return lr}var dr,jt;function ii(){if(jt)return dr;jt=1,dr=e;function e(r){var t=0,n=0;if(r.offsetParent)do t+=r.offsetLeft,n+=r.offsetTop;while((r=r.offsetParent)!==null);return[t,n]}return dr}var vr,Ut;function vt(){if(Ut)return vr;Ut=1,vr=n;var e=ri(),r=ni(),t=ii();function n(i){var a,u,o,s,f,c,d=0,l=0,p,g=!1,y=0,v=function(E){var S=0,_=0;return E=E||window.event,E.pageX||E.pageY?(S=E.pageX,_=E.pageY):(E.clientX||E.clientY)&&(S=E.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,_=E.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop),[S,_]},h=function(E,S,_){u&&u(E,{x:S-d,y:_-l}),d=S,l=_},m=function(E){E.stopPropagation?E.stopPropagation():E.cancelBubble=!0},N=function(E){E.preventDefault&&E.preventDefault()},w=function(E){return m(E),!1},L=function(E){E=E||window.event,h(E,E.clientX,E.clientY)},A=function(E){if(E=E||window.event,g)return m(E),!1;var S=E.button===1&&window.event!==null||E.button===0;if(S)return d=E.clientX,l=E.clientY,p=E.target||E.srcElement,a&&a(E,{x:d,y:l}),e.on("mousemove",L),e.on("mouseup",x),m(E),f=window.document.onselectstart,c=window.document.ondragstart,window.document.onselectstart=w,p.ondragstart=w,!1},x=function(E){E=E||window.event,e.off("mousemove",L),e.off("mouseup",x),window.document.onselectstart=f,p.ondragstart=c,p=null,o&&o(E)},b=function(E){if(typeof s=="function"){E=E||window.event,E.preventDefault&&E.preventDefault(),E.returnValue=!1;var S,_=v(E),C=t(i),B={x:_[0]-C[0],y:_[1]-C[1]};E.wheelDelta?S=E.wheelDelta/360:S=E.detail/-9,s(E,S,B)}},P=function(E){!s&&E?r.browser==="webkit"?i.addEventListener("mousewheel",b,!1):i.addEventListener("DOMMouseScroll",b,!1):s&&!E&&(r.browser==="webkit"?i.removeEventListener("mousewheel",b,!1):i.removeEventListener("DOMMouseScroll",b,!1)),s=E},R=function(E,S){return(E.clientX-S.clientX)*(E.clientX-S.clientX)+(E.clientY-S.clientY)*(E.clientY-S.clientY)},M=function(E){if(E.touches.length===1){m(E);var S=E.touches[0];h(E,S.clientX,S.clientY)}else if(E.touches.length===2){var _=R(E.touches[0],E.touches[1]),C=0;_<y?C=-1:_>y&&(C=1),s(E,C,{x:E.touches[0].clientX,y:E.touches[0].clientY}),y=_,m(E),N(E)}},q=function(E){g=!1,e.off("touchmove",M),e.off("touchend",q),e.off("touchcancel",q),p=null,o&&o(E)},F=function(E,S){m(E),N(E),d=S.clientX,l=S.clientY,p=E.target||E.srcElement,a&&a(E,{x:d,y:l}),g||(g=!0,e.on("touchmove",M),e.on("touchend",q),e.on("touchcancel",q))},T=function(E){if(E.touches.length===1)return F(E,E.touches[0]);E.touches.length===2&&(m(E),N(E),y=R(E.touches[0],E.touches[1]))};return i.addEventListener("mousedown",A),i.addEventListener("touchstart",T),{onStart:function(E){return a=E,this},onDrag:function(E){return u=E,this},onStop:function(E){return o=E,this},onScroll:function(E){return P(E),this},release:function(){i.removeEventListener("mousedown",A),i.removeEventListener("touchstart",T),e.off("mousemove",L),e.off("mouseup",x),e.off("touchmove",M),e.off("touchend",q),e.off("touchcancel",q),P(null)}}}return vr}var hr,Wt;function ht(){if(Wt)return hr;Wt=1,hr=r;var e=vt();function r(t,n){var i={};return{bindDragNDrop:a};function a(u,o){var s;if(o){var f=n.getNodeUI(u.id);s=e(f),typeof o.onStart=="function"&&s.onStart(o.onStart),typeof o.onDrag=="function"&&s.onDrag(o.onDrag),typeof o.onStop=="function"&&s.onStop(o.onStop),i[u.id]=s}else(s=i[u.id])&&(s.release(),delete i[u.id])}}return hr}var pr,Ht;function oi(){if(Ht)return pr;Ht=1,pr=r;var e=ti();function r(t,n){var i=e(n),a=null,u={},o={x:0,y:0};return i.mouseDown(function(s,f){a=s,o.x=f.clientX,o.y=f.clientY,i.mouseCapture(a);var c=u[s.id];return c&&c.onStart&&c.onStart(f,o),!0}).mouseUp(function(s){i.releaseMouseCapture(a),a=null;var f=u[s.id];return f&&f.onStop&&f.onStop(),!0}).mouseMove(function(s,f){if(a){var c=u[a.id];return c&&c.onDrag&&c.onDrag(f,{x:f.clientX-o.x,y:f.clientY-o.y}),o.x=f.clientX,o.y=f.clientY,!0}}),{bindDragNDrop:function(s,f){u[s.id]=f,f||delete u[s.id]}}}return pr}var gr,Qt;function ai(){if(Qt)return gr;Qt=1,gr=e();function e(){var t=0,n=["ms","moz","webkit","o"],i,a;for(typeof window!="undefined"?a=window:typeof bt!="undefined"?a=bt:a={setTimeout:r,clearTimeout:r},i=0;i<n.length&&!a.requestAnimationFrame;++i){var u=n[i];a.requestAnimationFrame=a[u+"RequestAnimationFrame"],a.cancelAnimationFrame=a[u+"CancelAnimationFrame"]||a[u+"CancelRequestAnimationFrame"]}return a.requestAnimationFrame||(a.requestAnimationFrame=s),a.cancelAnimationFrame||(a.cancelAnimationFrame=f),o;function o(c){var d;return l(),{stop:p,restart:g};function l(){d=a.requestAnimationFrame(l),c()||p()}function p(){a.cancelAnimationFrame(d),d=0}function g(){d||l()}}function s(c){var d=new Date().getTime(),l=Math.max(0,16-(d-t)),p=a.setTimeout(function(){c(d+l)},l);return t=d+l,p}function f(c){a.clearTimeout(c)}}function r(){}return gr}var mr,Zt;function ui(){if(Zt)return mr;Zt=1,mr=e;function e(r){if(!r)throw{message:"Cannot get dimensions of undefined container"};var t=r.clientWidth,n=r.clientHeight;return{left:0,top:0,width:t,height:n}}return mr}var yr,Kt;function io(){if(Kt)return yr;Kt=1;var e=oe();yr=r;function r(t){if(console.log("This method is deprecated. Please use Viva.events() instead"),!t)return t;var n=t.on!==void 0||t.off!==void 0||t.fire!==void 0;if(n)return{extend:function(){return t},on:t.on,stop:t.off};return{extend:i,on:t.on,stop:t.off};function i(){var a=e(t);return a.addEventListener=a.on,a}}return yr}var Ce={exports:{}},wr,Jt;function oo(){if(Jt)return wr;Jt=1,wr=e;function e(r,t,n,i,a){this.from=r,this.to=t,this.length=n,this.coeff=i,this.weight=typeof a=="number"?a:1}return wr}var xr,en;function pt(){if(en)return xr;en=1,xr=e;function e(t,n,i){var a=Object.prototype.toString.call(i)==="[object Array]";if(a)for(var u=0;u<i.length;++u)r(t,n,i[u]);else for(var o in t)r(t,n,o)}function r(t,n,i){if(t.hasOwnProperty(i)){if(typeof n[i]=="function")return;n[i]=function(a){return a!==void 0?(t[i]=a,n):t[i]}}}return xr}var _r,rn;function ao(){return rn||(rn=1,_r=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}),_r}var Er,tn;function uo(){if(tn)return Er;tn=1,Er=e;function e(){this.stack=[],this.popIdx=0}e.prototype={isEmpty:function(){return this.popIdx===0},push:function(t,n){var i=this.stack[this.popIdx];i?(i.node=t,i.body=n):this.stack[this.popIdx]=new r(t,n),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};function r(t,n){this.node=t,this.body=n}return Er}var br,nn;function fo(){return nn||(nn=1,br=function(r,t){var n=Math.abs(r.x-t.x),i=Math.abs(r.y-t.y);return n<1e-8&&i<1e-8}),br}var Nr,on;function so(){if(on)return Nr;on=1,Nr=function(t){t=t||{},t.gravity=typeof t.gravity=="number"?t.gravity:-1,t.theta=typeof t.theta=="number"?t.theta:.8;var n=Te.random(1984),i=ao(),a=uo(),u=fo(),o=t.gravity,s=[],f=new a,c=t.theta,d=[],l=0,p=g();return{insertBodies:v,getRoot:function(){return p},updateBodyForce:y,options:function(m){return m?(typeof m.gravity=="number"&&(o=m.gravity),typeof m.theta=="number"&&(c=m.theta),this):{gravity:o,theta:c}}};function g(){var m=d[l];return m?(m.quad0=null,m.quad1=null,m.quad2=null,m.quad3=null,m.body=null,m.mass=m.massX=m.massY=0,m.left=m.right=m.top=m.bottom=0):(m=new i,d[l]=m),++l,m}function y(m){var N=s,w,L,A,x,b=0,P=0,R=1,M=0,q=1;for(N[0]=p;R;){var F=N[M],T=F.body;R-=1,M+=1;var E=T!==m;T&&E?(L=T.pos.x-m.pos.x,A=T.pos.y-m.pos.y,x=Math.sqrt(L*L+A*A),x===0&&(L=(n.nextDouble()-.5)/50,A=(n.nextDouble()-.5)/50,x=Math.sqrt(L*L+A*A)),w=o*T.mass*m.mass/(x*x*x),b+=w*L,P+=w*A):E&&(L=F.massX/F.mass-m.pos.x,A=F.massY/F.mass-m.pos.y,x=Math.sqrt(L*L+A*A),x===0&&(L=(n.nextDouble()-.5)/50,A=(n.nextDouble()-.5)/50,x=Math.sqrt(L*L+A*A)),(F.right-F.left)/x<c?(w=o*F.mass*m.mass/(x*x*x),b+=w*L,P+=w*A):(F.quad0&&(N[q]=F.quad0,R+=1,q+=1),F.quad1&&(N[q]=F.quad1,R+=1,q+=1),F.quad2&&(N[q]=F.quad2,R+=1,q+=1),F.quad3&&(N[q]=F.quad3,R+=1,q+=1)))}m.force.x+=b,m.force.y+=P}function v(m){var N=Number.MAX_VALUE,w=Number.MAX_VALUE,L=Number.MIN_VALUE,A=Number.MIN_VALUE,x,b=m.length;for(x=b;x--;){var P=m[x].pos.x,R=m[x].pos.y;P<N&&(N=P),P>L&&(L=P),R<w&&(w=R),R>A&&(A=R)}var M=L-N,q=A-w;for(M>q?A=w+M:L=N+q,l=0,p=g(),p.left=N,p.right=L,p.top=w,p.bottom=A,x=b-1,x>=0&&(p.body=m[x]);x--;)h(m[x])}function h(m){for(f.reset(),f.push(p,m);!f.isEmpty();){var N=f.pop(),w=N.node,L=N.body;if(w.body){var T=w.body;if(w.body=null,u(T.pos,L.pos)){var E=3;do{var S=n.nextDouble(),_=(w.right-w.left)*S,C=(w.bottom-w.top)*S;T.pos.x=w.left+_,T.pos.y=w.top+C,E-=1}while(E>0&&u(T.pos,L.pos));if(E===0&&u(T.pos,L.pos))return}f.push(w,T),f.push(w,L)}else{var A=L.pos.x,x=L.pos.y;w.mass=w.mass+L.mass,w.massX=w.massX+L.mass*A,w.massY=w.massY+L.mass*x;var b=0,P=w.left,R=(w.right+P)/2,M=w.top,q=(w.bottom+M)/2;A>R&&(b=b+1,P=R,R=w.right),x>q&&(b=b+2,M=q,q=w.bottom);var F=e(w,b);F?f.push(F,L):(F=g(),F.left=P,F.top=M,F.right=R,F.bottom=q,F.body=L,r(w,b,F))}}}};function e(t,n){return n===0?t.quad0:n===1?t.quad1:n===2?t.quad2:n===3?t.quad3:null}function r(t,n,i){n===0?t.quad0=i:n===1?t.quad1=i:n===2?t.quad2=i:n===3&&(t.quad3=i)}return Nr}var Lr,an;function co(){return an||(an=1,Lr=function(e,r){var t=Te.random(42),n={x1:0,y1:0,x2:0,y2:0};return{box:n,update:i,reset:function(){n.x1=n.y1=0,n.x2=n.y2=0},getBestNewPosition:function(a){var u=n,o=0,s=0;if(a.length){for(var f=0;f<a.length;++f)o+=a[f].pos.x,s+=a[f].pos.y;o/=a.length,s/=a.length}else o=(u.x1+u.x2)/2,s=(u.y1+u.y2)/2;var c=r.springLength;return{x:o+t.next(c)-c/2,y:s+t.next(c)-c/2}}};function i(){var a=e.length;if(a!==0){for(var u=Number.MAX_VALUE,o=Number.MAX_VALUE,s=Number.MIN_VALUE,f=Number.MIN_VALUE;a--;){var c=e[a];c.isPinned?(c.pos.x=c.prevPos.x,c.pos.y=c.prevPos.y):(c.prevPos.x=c.pos.x,c.prevPos.y=c.pos.y),c.pos.x<u&&(u=c.pos.x),c.pos.x>s&&(s=c.pos.x),c.pos.y<o&&(o=c.pos.y),c.pos.y>f&&(f=c.pos.y)}n.x1=u,n.x2=s,n.y1=o,n.y2=f}}}),Lr}var Pr,un;function lo(){return un||(un=1,Pr=function(e){var r=pe(),t=pt();e=r(e,{dragCoeff:.02});var n={update:function(i){i.force.x-=e.dragCoeff*i.velocity.x,i.force.y-=e.dragCoeff*i.velocity.y}};return t(e,n,["dragCoeff"]),n}),Pr}var Tr,fn;function vo(){return fn||(fn=1,Tr=function(e){var r=pe(),t=Te.random(42),n=pt();e=r(e,{springCoeff:2e-4,springLength:80});var i={update:function(a){var u=a.from,o=a.to,s=a.length<0?e.springLength:a.length,f=o.pos.x-u.pos.x,c=o.pos.y-u.pos.y,d=Math.sqrt(f*f+c*c);d===0&&(f=(t.nextDouble()-.5)/50,c=(t.nextDouble()-.5)/50,d=Math.sqrt(f*f+c*c));var l=d-s,p=(!a.coeff||a.coeff<0?e.springCoeff:a.coeff)*l/d*a.weight;u.force.x+=p*f,u.force.y+=p*c,o.force.x-=p*f,o.force.y-=p*c}};return n(e,i,["springCoeff","springLength"]),i}),Tr}var Sr,sn;function ho(){if(sn)return Sr;sn=1,Sr=e;function e(r,t){var n=0,i=0,a=0,u=0,o,s=r.length;if(s===0)return 0;for(o=0;o<s;++o){var f=r[o],c=t/f.mass;f.velocity.x+=c*f.force.x,f.velocity.y+=c*f.force.y;var d=f.velocity.x,l=f.velocity.y,p=Math.sqrt(d*d+l*l);p>1&&(f.velocity.x=d/p,f.velocity.y=l/p),n=t*f.velocity.x,a=t*f.velocity.y,f.pos.x+=n,f.pos.y+=a,i+=Math.abs(n),u+=Math.abs(a)}return(i*i+u*u)/s}return Sr}var Ar,cn;function po(){if(cn)return Ar;cn=1,Ar={Body:e,Vector2d:r,Body3d:t,Vector3d:n};function e(i,a){this.pos=new r(i,a),this.prevPos=new r(i,a),this.force=new r,this.velocity=new r,this.mass=1}e.prototype.setPosition=function(i,a){this.prevPos.x=this.pos.x=i,this.prevPos.y=this.pos.y=a};function r(i,a){i&&typeof i!="number"?(this.x=typeof i.x=="number"?i.x:0,this.y=typeof i.y=="number"?i.y:0):(this.x=typeof i=="number"?i:0,this.y=typeof a=="number"?a:0)}r.prototype.reset=function(){this.x=this.y=0};function t(i,a,u){this.pos=new n(i,a,u),this.prevPos=new n(i,a,u),this.force=new n,this.velocity=new n,this.mass=1}t.prototype.setPosition=function(i,a,u){this.prevPos.x=this.pos.x=i,this.prevPos.y=this.pos.y=a,this.prevPos.z=this.pos.z=u};function n(i,a,u){i&&typeof i!="number"?(this.x=typeof i.x=="number"?i.x:0,this.y=typeof i.y=="number"?i.y:0,this.z=typeof i.z=="number"?i.z:0):(this.x=typeof i=="number"?i:0,this.y=typeof a=="number"?a:0,this.z=typeof u=="number"?u:0)}return n.prototype.reset=function(){this.x=this.y=this.z=0},Ar}var Cr,ln;function go(){if(ln)return Cr;ln=1;var e=po();return Cr=function(r){return new e.Body(r)},Cr}var qr,dn;function vn(){if(dn)return qr;dn=1,qr=e;function e(r){var t=oo(),n=pt(),i=pe(),a=oe();r=i(r,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20});var u=r.createQuadTree||so(),o=r.createBounds||co(),s=r.createDragForce||lo(),f=r.createSpringForce||vo(),c=r.integrator||ho(),d=r.createBody||go(),l=[],p=[],g=u(r),y=o(l,r),v=f(r),h=s(r),m=!0,N=0,w={bodies:l,quadTree:g,springs:p,settings:r,step:function(){L();var A=c(l,r.timeStep);return y.update(),A},addBody:function(A){if(!A)throw new Error("Body is required");return l.push(A),A},addBodyAt:function(A){if(!A)throw new Error("Body position is required");var x=d(A);return l.push(x),x},removeBody:function(A){if(A){var x=l.indexOf(A);if(!(x<0))return l.splice(x,1),l.length===0&&y.reset(),!0}},addSpring:function(A,x,b,P,R){if(!A||!x)throw new Error("Cannot add null spring to force simulator");typeof b!="number"&&(b=-1);var M=new t(A,x,b,R>=0?R:-1,P);return p.push(M),M},getTotalMovement:function(){return N},removeSpring:function(A){if(A){var x=p.indexOf(A);if(x>-1)return p.splice(x,1),!0}},getBestNewBodyPosition:function(A){return y.getBestNewPosition(A)},getBBox:function(){return m&&(y.update(),m=!1),y.box},invalidateBBox:function(){m=!0},gravity:function(A){return A!==void 0?(r.gravity=A,g.options({gravity:A}),this):r.gravity},theta:function(A){return A!==void 0?(r.theta=A,g.options({theta:A}),this):r.theta}};return n(r,w),a(w),w;function L(){var A,x=l.length;if(x)for(g.insertBodies(l);x--;)A=l[x],A.isPinned||(A.force.reset(),g.updateBodyForce(A),h.update(A));for(x=p.length;x--;)v.update(p[x])}}return qr}var Rr,hn;function mo(){if(hn)return Rr;hn=1,Rr=function(t){r(t);var n=e(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};function e(t){var n=Object.create(null);return{on:function(i,a,u){if(typeof a!="function")throw new Error("callback is expected to be a function");var o=n[i];return o||(o=n[i]=[]),o.push({callback:a,ctx:u}),t},off:function(i,a){var u=typeof i=="undefined";if(u)return n=Object.create(null),t;if(n[i]){var o=typeof a!="function";if(o)delete n[i];else for(var s=n[i],f=0;f<s.length;++f)s[f].callback===a&&s.splice(f,1)}return t},fire:function(i){var a=n[i];if(!a)return t;var u;arguments.length>1&&(u=Array.prototype.splice.call(arguments,1));for(var o=0;o<a.length;++o){var s=a[o];s.callback.apply(s.ctx,u)}return t}}}function r(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],i=0;i<n.length;++i)if(t.hasOwnProperty(n[i]))throw new Error("Subject cannot be eventified, since it already has property '"+n[i]+"'")}return Rr}var pn;function fi(){if(pn)return Ce.exports;pn=1,Ce.exports=r,Ce.exports.simulator=vn();var e=mo();function r(n,i){if(!n)throw new Error("Graph structure cannot be undefined");var a=vn(),u=a(i),o=F;i&&typeof i.nodeMass=="function"&&(o=i.nodeMass);var s=Object.create(null),f={},c=0,d=u.settings.springTransform||t;w(),h();var l=!1,p={step:function(){if(c===0)return!0;var T=u.step();p.lastMove=T,p.fire("step");var E=T/c,S=E<=.01;return l!==S&&(l=S,m(S)),S},getNodePosition:function(T){return q(T).pos},setNodePosition:function(T){var E=q(T);E.setPosition.apply(E,Array.prototype.slice.call(arguments,1)),u.invalidateBBox()},getLinkPosition:function(T){var E=f[T];if(E)return{from:E.from.pos,to:E.to.pos}},getGraphRect:function(){return u.getBBox()},forEachBody:g,pinNode:function(T,E){var S=q(T.id);S.isPinned=!!E},isNodePinned:function(T){return q(T.id).isPinned},dispose:function(){n.off("changed",N),p.fire("disposed")},getBody:v,getSpring:y,simulator:u,graph:n,lastMove:0};return e(p),p;function g(T){Object.keys(s).forEach(function(E){T(s[E],E)})}function y(T,E){var S;if(E===void 0)typeof T!="object"?S=T:S=T.id;else{var _=n.hasLink(T,E);if(!_)return;S=_.id}return f[S]}function v(T){return s[T]}function h(){n.on("changed",N)}function m(T){p.fire("stable",T)}function N(T){for(var E=0;E<T.length;++E){var S=T[E];S.changeType==="add"?(S.node&&L(S.node.id),S.link&&x(S.link)):S.changeType==="remove"&&(S.node&&A(S.node),S.link&&b(S.link))}c=n.getNodesCount()}function w(){c=0,n.forEachNode(function(T){L(T.id),c+=1}),n.forEachLink(x)}function L(T){var E=s[T];if(!E){var S=n.getNode(T);if(!S)throw new Error("initBody() was called with unknown node id");var _=S.position;if(!_){var C=P(S);_=u.getBestNewBodyPosition(C)}E=u.addBodyAt(_),E.id=T,s[T]=E,R(T),M(S)&&(E.isPinned=!0)}}function A(T){var E=T.id,S=s[E];S&&(s[E]=null,delete s[E],u.removeBody(S))}function x(T){R(T.fromId),R(T.toId);var E=s[T.fromId],S=s[T.toId],_=u.addSpring(E,S,T.length);d(T,_),f[T.id]=_}function b(T){var E=f[T.id];if(E){var S=n.getNode(T.fromId),_=n.getNode(T.toId);S&&R(S.id),_&&R(_.id),delete f[T.id],u.removeSpring(E)}}function P(T){var E=[];if(!T.links)return E;for(var S=Math.min(T.links.length,2),_=0;_<S;++_){var C=T.links[_],B=C.fromId!==T.id?s[C.fromId]:s[C.toId];B&&B.pos&&E.push(B)}return E}function R(T){var E=s[T];if(E.mass=o(T),Number.isNaN(E.mass))throw new Error("Node mass should be a number")}function M(T){return T&&(T.isPinned||T.data&&T.data.isPinned)}function q(T){var E=s[T];return E||(L(T),E=s[T]),E}function F(T){var E=n.getLinks(T);return E?1+E.length/3:1}}function t(){}return Ce.exports}var kr,gn;function si(){if(gn)return kr;gn=1,kr=e;function e(r,t,n,i){this.x1=r||0,this.y1=t||0,this.x2=n||0,this.y2=i||0}return kr}var Ir,mn;function yo(){if(mn)return Ir;mn=1,Ir=n;var e=pe(),r=Te.random,t=si();function n(i,a){a=e(a,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var u=r(a.seed),o=new t(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),s={},f=function(h){return{x:u.next(a.maxX),y:u.next(a.maxY)}},c=function(h,m){h.x<m.x1&&(m.x1=h.x),h.x>m.x2&&(m.x2=h.x),h.y<m.y1&&(m.y1=h.y),h.y>m.y2&&(m.y2=h.y)},d=typeof Object.create=="function"?Object.create(null):{},l=function(h){d[h.id]=f(h),c(d[h.id],o)},p=function(){i.getNodesCount()!==0&&(o.x1=Number.MAX_VALUE,o.y1=Number.MAX_VALUE,o.x2=Number.MIN_VALUE,o.y2=Number.MIN_VALUE,i.forEachNode(l))},g=function(h){s[h.id]=h},y=function(h){for(var m=0;m<h.length;++m){var N=h[m];N.node&&(N.changeType==="add"?l(N.node):delete d[N.node.id]),N.link&&(N.changeType==="add"?g(N.link):delete s[N.link.id])}};return i.forEachNode(l),i.forEachLink(g),i.on("changed",y),{run:function(h){this.step()},step:function(){return p(),!0},getGraphRect:function(){return o},dispose:function(){i.off("change",y)},isNodePinned:function(h){return!0},pinNode:function(h,m){},getNodePosition:v,getLinkPosition:function(h){var m=s[h];return{from:v(m.fromId),to:v(m.toId)}},setNodePosition:function(h,m,N){var w=d[h];w&&(w.x=m,w.y=N)},placeNode:function(h){return typeof h=="function"?(f=h,p(),this):f(h)}};function v(h){return d[h]}}return Ir}var Dr,yn;function ci(){if(yn)return Dr;yn=1,Dr=e;function e(r){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=r}return Dr}var Mr,wn;function li(){if(wn)return Mr;wn=1;var e=ci();Mr=r;function r(n){var i=Math.sqrt(n||1024)<<0,a=i,u=1,o={},s,f=0,c=[],d=[];if(!t(n))throw"Tiles per texture should be power of two.";var l={isDirty:!1,clearDirty:p,remove:g,getTextures:y,getCoordinates:v,load:h};return l;function p(){var b;for(l.isDirty=!1,b=0;b<c.length;++b)c[b].isDirty=!1}function g(b){var P=o[b];if(!P)return!1;if(delete o[b],u-=1,u===P.offset)return!0;var R=w(P.offset),M=w(u);x(M,R);var q=o[d[u]];return q.offset=P.offset,d[P.offset]=d[u],A(),!0}function y(){return c}function v(b){return o[b]}function h(b,P){if(o.hasOwnProperty(b))P(o[b]);else{var R=new window.Image,M=u;u+=1,R.crossOrigin="anonymous",R.onload=function(){A(),N(M,R,P)},R.src=b}}function m(){var b=new e(i*a);c.push(b)}function N(b,P,R){var M=w(b),q={offset:b};M.textureNumber>=c.length&&m();var F=c[M.textureNumber];F.ctx.drawImage(P,M.col*a,M.row*a,a,a),d[b]=P.src,o[P.src]=q,F.isDirty=!0,R(q)}function w(b){var P=b/n<<0,R=b%n,M=R/i<<0,q=R%i;return{textureNumber:P,row:M,col:q}}function L(){l.isDirty=!0,f=0,s=null}function A(){s&&(window.clearTimeout(s),f+=1,s=null),f>10?L():s=window.setTimeout(L,400)}function x(b,P){var R=c[b.textureNumber].canvas,M=c[P.textureNumber].ctx,q=P.col*a,F=P.row*a;M.drawImage(R,b.col*a,b.row*a,a,a,q,F,a,a),c[b.textureNumber].isDirty=!0,c[P.textureNumber].isDirty=!0}}function t(n){return(n&n-1)===0}return Mr}var Br,xn;function wo(){if(xn)return Br;xn=1;var e=li(),r=Ye();Br=t;function t(f){var u=18,o=n(),s=i(),f=f||1024,c,d,l,p,g,y,v=0,h=new Float32Array(64),m,N,w,L;return{load:b,position:P,createNode:R,removeNode:M,replaceProperties:q,updateTransform:F,updateSize:T,render:E};function A(S,_){S.nativeObject&&l.deleteTexture(S.nativeObject);var C=l.createTexture();l.activeTexture(l["TEXTURE"+_]),l.bindTexture(l.TEXTURE_2D,C),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,S.canvas),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR_MIPMAP_NEAREST),l.generateMipmap(l.TEXTURE_2D),l.uniform1i(y["sampler"+_],_),S.nativeObject=C}function x(){if(c.isDirty){var S=c.getTextures(),_;for(_=0;_<S.length;++_)(S[_].isDirty||!S[_].nativeObject)&&A(S[_],_);c.clearDirty()}}function b(S){l=S,g=r(S),c=new e(f),d=g.createProgram(s,o),l.useProgram(d),y=g.getLocations(d,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),l.uniform1f(y.tilesPerTexture,f),l.enableVertexAttribArray(y.vertexPos),l.enableVertexAttribArray(y.customAttributes),p=l.createBuffer()}function P(S,_){var C=S.id*u;h[C]=_.x-S.size,h[C+1]=-_.y-S.size,h[C+2]=S._offset*4,h[C+3]=_.x+S.size,h[C+4]=-_.y-S.size,h[C+5]=S._offset*4+1,h[C+6]=_.x-S.size,h[C+7]=-_.y+S.size,h[C+8]=S._offset*4+2,h[C+9]=_.x-S.size,h[C+10]=-_.y+S.size,h[C+11]=S._offset*4+2,h[C+12]=_.x+S.size,h[C+13]=-_.y-S.size,h[C+14]=S._offset*4+1,h[C+15]=_.x+S.size,h[C+16]=-_.y+S.size,h[C+17]=S._offset*4+3}function R(S){h=g.extendArray(h,v,u),v+=1;var _=c.getCoordinates(S.src);_?S._offset=_.offset:(S._offset=0,c.load(S.src,function(C){S._offset=C.offset}))}function M(S){v>0&&(v-=1),S.id<v&&v>0&&(S.src&&c.remove(S.src),g.copyArrayPart(h,S.id*u,v*u,u))}function q(S,_){_._offset=S._offset}function F(S){L=!0,w=S}function T(S,_){m=S,N=_,L=!0}function E(){l.useProgram(d),l.bindBuffer(l.ARRAY_BUFFER,p),l.bufferData(l.ARRAY_BUFFER,h,l.DYNAMIC_DRAW),L&&(L=!1,l.uniformMatrix4fv(y.transform,!1,w),l.uniform2f(y.screenSize,m,N)),l.vertexAttribPointer(y.vertexPos,2,l.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),l.vertexAttribPointer(y.customAttributes,1,l.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,2*4),x(),l.drawArrays(l.TRIANGLES,0,v*6)}}function n(){return["precision mediump float;","varying vec4 color;","varying vec3 vTextureCoord;","uniform sampler2D u_sampler0;","uniform sampler2D u_sampler1;","uniform sampler2D u_sampler2;","uniform sampler2D u_sampler3;","void main(void) {","   if (vTextureCoord.z == 0.) {","     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);","   } else if (vTextureCoord.z == 1.) {","     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);","   } else if (vTextureCoord.z == 2.) {","     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);","   } else if (vTextureCoord.z == 3.) {","     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);","   } else { gl_FragColor = vec4(0, 1, 0, 1); }","}"].join(`
`)}function i(){return["attribute vec2 a_vertexPos;","attribute float a_customAttributes;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","uniform float u_tilesPerTexture;","varying vec3 vTextureCoord;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);","float corner = mod(a_customAttributes, 4.);","float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);","float tilesPerRow = sqrt(u_tilesPerTexture);","float tileSize = 1./tilesPerRow;","float tileColumn = mod(tileIndex, tilesPerRow);","float tileRow = floor(tileIndex/tilesPerRow);","if(corner == 0.0) {","  vTextureCoord.xy = vec2(0, 1);","} else if(corner == 1.0) {","  vTextureCoord.xy = vec2(1, 1);","} else if(corner == 2.0) {","  vTextureCoord.xy = vec2(0, 0);","} else {","  vTextureCoord.xy = vec2(1, 0);","}","vTextureCoord *= tileSize;","vTextureCoord.x += tileColumn * tileSize;","vTextureCoord.y += tileRow * tileSize;","vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);","}"].join(`
`)}return Br}var Fr,_n;function di(){if(_n)return Fr;_n=1;var e=Ye();Fr=r;function r(){var t=6,n=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),i=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join(`
`),a=["attribute vec2 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);","   color = a_color.abgr;","}"].join(`
`),u,o,s,f,c,d=0,l,p=new ArrayBuffer(16*n),g=new Float32Array(p),y=new Uint32Array(p),v,h,m,N,w=function(){if((d+1)*n>p.byteLength){var L=new ArrayBuffer(p.byteLength*2),A=new Float32Array(L),x=new Uint32Array(L);x.set(y),g=A,y=x,p=L}};return{load:function(L){o=L,f=e(L),u=f.createProgram(a,i),o.useProgram(u),c=f.getLocations(u,["a_vertexPos","a_color","u_screenSize","u_transform"]),o.enableVertexAttribArray(c.vertexPos),o.enableVertexAttribArray(c.color),s=o.createBuffer()},position:function(L,A,x){var b=L.id,P=b*t;g[P]=A.x,g[P+1]=A.y,y[P+2]=L.color,g[P+3]=x.x,g[P+4]=x.y,y[P+5]=L.color},createLink:function(L){w(),d+=1,l=L.id},removeLink:function(L){d>0&&(d-=1),L.id<d&&d>0&&f.copyArrayPart(y,L.id*t,d*t,t)},updateTransform:function(L){N=!0,m=L},updateSize:function(L,A){v=L,h=A,N=!0},render:function(){o.useProgram(u),o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,p,o.DYNAMIC_DRAW),N&&(N=!1,o.uniformMatrix4fv(c.transform,!1,m),o.uniform2f(c.screenSize,v,h)),o.vertexAttribPointer(c.vertexPos,2,o.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),o.vertexAttribPointer(c.color,4,o.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,2*4),o.drawArrays(o.LINES,0,d*2),l=d-1},bringToFront:function(L){l>L.id&&f.swapArrayPart(g,L.id*t,l*t,t),l>0&&(l-=1)},getFrontLinkId:function(){return l}}}return Fr}var Or,En;function vi(){if(En)return Or;En=1;var e=Ye();Or=r;function r(){var t=4,n=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,i=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join(`
`),a=["attribute vec3 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);","   gl_PointSize = a_vertexPos.z * u_transform[0][0];","   color = a_color.abgr;","}"].join(`
`),u,o,s,f,c,d=new ArrayBuffer(16*n),l=new Float32Array(d),p=new Uint32Array(d),g=0,y,v,h,m;return{load:w,position:L,updateTransform:A,updateSize:x,removeNode:b,createNode:P,replaceProperties:R,render:M};function N(){if((g+1)*n>=d.byteLength){var q=new ArrayBuffer(d.byteLength*2),F=new Float32Array(q),T=new Uint32Array(q);T.set(p),l=F,p=T,d=q}}function w(q){o=q,c=e(q),u=c.createProgram(a,i),o.useProgram(u),f=c.getLocations(u,["a_vertexPos","a_color","u_screenSize","u_transform"]),o.enableVertexAttribArray(f.vertexPos),o.enableVertexAttribArray(f.color),s=o.createBuffer()}function L(q,F){var T=q.id;l[T*t]=F.x,l[T*t+1]=-F.y,l[T*t+2]=q.size,p[T*t+3]=q.color}function A(q){m=!0,h=q}function x(q,F){y=q,v=F,m=!0}function b(q){g>0&&(g-=1),q.id<g&&g>0&&c.copyArrayPart(p,q.id*t,g*t,t)}function P(){N(),g+=1}function R(){}function M(){o.useProgram(u),o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,d,o.DYNAMIC_DRAW),m&&(m=!1,o.uniformMatrix4fv(f.transform,!1,h),o.uniform2f(f.screenSize,y,v)),o.vertexAttribPointer(f.vertexPos,3,o.FLOAT,!1,t*Float32Array.BYTES_PER_ELEMENT,0),o.vertexAttribPointer(f.color,4,o.UNSIGNED_BYTE,!0,t*Float32Array.BYTES_PER_ELEMENT,3*4),o.drawArrays(o.POINTS,0,g)}}return Or}var zr,bn;function gt(){if(bn)return zr;bn=1,zr=e;function e(r){var t=10414335;if(typeof r=="string"&&r)if(r.length===4&&(r=r.replace(/([^#])/g,"$1$1")),r.length===9)t=parseInt(r.substr(1),16);else if(r.length===7)t=parseInt(r.substr(1),16)<<8|255;else throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+r;else typeof r=="number"&&(t=r);return t}return zr}var Yr,Nn;function hi(){if(Nn)return Yr;Nn=1;var e=gt();Yr=r;function r(t){return{color:e(t)}}return Yr}var Vr,Ln;function pi(){if(Ln)return Vr;Ln=1;var e=gt();Vr=r;function r(t,n){return{size:typeof t=="number"?t:10,color:e(n)}}return Vr}var Gr,Pn;function xo(){if(Pn)return Gr;Pn=1,Gr=e;function e(r,t){return{_texture:0,_offset:0,size:typeof r=="number"?r:32,src:t}}return Gr}var Xr,Tn;function _o(){if(Tn)return Xr;Tn=1,Xr=o;var e=oi(),r=di(),t=vi(),n=pi(),i=hi(),a=oe(),u=pe();function o(s){s=u(s,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var f,c,d,l,p,g=0,y=0,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h,m,N=[],w=[],L,A={},x={},b=r(),P=t(),R=function(_){return n()},M=function(_){return i(3014898687)},q=function(){b.updateTransform(v),P.updateTransform(v)},F=function(){v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},T=function(){f&&c&&(l=c.width=Math.max(f.offsetWidth,1),p=c.height=Math.max(f.offsetHeight,1),d&&d.viewport(0,0,l,p),b&&b.updateSize(l/2,p/2),P&&P.updateSize(l/2,p/2))},E=function(_){_.fire("rescaled")};c=window.document.createElement("canvas");var S={getLinkUI:function(_){return x[_]},getNodeUI:function(_){return A[_]},node:function(_){if(typeof _=="function")return R=_,this},link:function(_){if(typeof _=="function")return M=_,this},placeNode:function(_){return h=_,this},placeLink:function(_){return m=_,this},inputManager:e,beginRender:function(){},endRender:function(){y>0&&b.render(),g>0&&P.render()},bringLinkToFront:function(_){var C=b.getFrontLinkId(),B,O;b.bringToFront(_),C>_.id&&(B=_.id,O=w[C],w[C]=w[B],w[C].id=C,w[B]=O,w[B].id=B)},graphCenterChanged:function(_,C){v[12]=2*_/l-1,v[13]=1-2*C/p,q()},addLink:function(_,C){var B=y++,O=M(_);return O.id=B,O.pos=C,b.createLink(O),w[B]=O,x[_.id]=O,O},addNode:function(_,C){var B=g++,O=R(_);return O.id=B,O.position=C,O.node=_,P.createNode(O),N[B]=O,A[_.id]=O,O},translateRel:function(_,C){v[12]+=2*v[0]*_/l/v[0],v[13]-=2*v[5]*C/p/v[5],q()},scale:function(_,C){var B=2*C.x/l-1,O=1-2*C.y/p;return B-=v[12],O-=v[13],v[12]+=B*(1-_),v[13]+=O*(1-_),v[0]*=_,v[5]*=_,q(),E(this),v[0]},resetScale:function(){return F(),d&&(T(),q()),this},updateSize:T,init:function(_){var C={};if(s.preserveDrawingBuffer&&(C.preserveDrawingBuffer=!0),f=_,T(),F(),f.appendChild(c),d=c.getContext("experimental-webgl",C),!d){var B="Could not initialize WebGL. Seems like the browser doesn't support it.";throw window.alert(B),B}if(s.enableBlending&&(d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),d.enable(d.BLEND)),s.clearColor){var O=s.clearColorValue;d.clearColor(O.r,O.g,O.b,O.a),this.beginRender=function(){d.clear(d.COLOR_BUFFER_BIT)}}b.load(d),b.updateSize(l/2,p/2),P.load(d),P.updateSize(l/2,p/2),q(),typeof L=="function"&&L(c)},release:function(_){c&&_&&_.removeChild(c)},isSupported:function(){var _=window.document.createElement("canvas"),C=_&&_.getContext&&_.getContext("experimental-webgl");return C},releaseLink:function(_){y>0&&(y-=1);var C=x[_.id];delete x[_.id],b.removeLink(C);var B=C.id;if(B<y){if(y===0||y===B)return;var O=w[y];w[B]=O,O.id=B}},releaseNode:function(_){g>0&&(g-=1);var C=A[_.id];delete A[_.id],P.removeNode(C);var B=C.id;if(B<g){if(g===0||g===B)return;var O=N[g];N[B]=O,O.id=B,P.replaceProperties(C,O)}},renderNodes:function(){for(var _={x:0,y:0},C=0;C<g;++C){var B=N[C];_.x=B.position.x,_.y=B.position.y,h&&h(B,_),P.position(B,_)}},renderLinks:function(){if(!this.omitLinksRendering)for(var _={x:0,y:0},C={x:0,y:0},B=0;B<y;++B){var O=w[B],H=O.pos.from;C.x=H.x,C.y=-H.y,H=O.pos.to,_.x=H.x,_.y=-H.y,m&&m(O,C,_),b.position(O,C,_)}},getGraphicsRoot:function(_){return typeof _=="function"&&(c?_(c):L=_),c},setNodeProgram:function(_){if(!d&&_)P=_;else if(_)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(_){if(!d&&_)b=_;else if(_)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(_){return _.x=2*_.x/l-1,_.y=1-2*_.y/p,_.x=(_.x-v[12])/v[0],_.y=(_.y-v[13])/v[5],_.x=_.x*(l/2),_.y=_.y*(-p/2),_},transformGraphToClientCoordinates:function(_){return _.x=_.x/(l/2),_.y=_.y/(-p/2),_.x=_.x*v[0]+v[12],_.y=_.y*v[5]+v[13],_.x=(_.x+1)*l/2,_.y=(1-_.y)*p/2,_},getNodeAtClientPos:function(_,C){if(typeof C!="function")return null;this.transformClientToGraphCoordinates(_);for(var B=0;B<g;++B)if(C(N[B],_.x,_.y))return N[B].node;return null}};return a(S),S}return Xr}var $r,Sn;function Eo(){if(Sn)return $r;Sn=1,$r=e();function e(){return typeof DOMParser=="undefined"?{parseFromString:r}:new DOMParser}function r(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}return $r}var jr,An;function bo(){if(An)return jr;An=1;var e=Eo(),r=mt();jr=t;function t(i){try{return i=n(i),r(e.parseFromString(i,"text/xml").documentElement)}catch(a){throw a}}function n(i){if(i){var a='xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"',u=i.match(/^<\w+/);if(u){var o=u[0].length;return i.substr(0,o)+" "+a+" "+i.substr(o)}else throw new Error("Cannot parse input text: invalid xml?")}}return jr}var Ur,Cn;function No(){if(Cn)return Ur;Cn=1,Ur=r;var e=/{{(.+?)}}/;function r(a){var u=Object.create(null);return t(a,u),{link:function(o){Object.keys(u).forEach(function(f){var c=u[f];c.forEach(s)});function s(f){f(o)}}}}function t(a,u){var o=a.nodeType,s=o===1||o===3;if(s){var f;if(a.hasChildNodes()){var c=a.childNodes;for(f=0;f<c.length;++f)t(c[f],u)}if(o===3&&i(a,u),!!a.attributes){var d=a.attributes;for(f=0;f<d.length;++f)n(d[f],a,u)}}}function n(a,u,o){var s=a.value;if(!s)return;var f=s.match(e);if(!f)return;var c=a.localName,d=f[1],l=d.indexOf(".")<0;if(!l)throw new Error("simplesvg currently does not support nested bindings");var p=o[d];p?p.push(g):p=o[d]=[g];function g(y){u.setAttributeNS(null,c,y[d])}}function i(a,u){var o=a.nodeValue;if(!o)return;var s=o.match(e);if(!s)return;var f=s[1];f.indexOf(".")<0;var c=u[f];c?c.push(d):c=u[f]=[d];function d(l){a.nodeValue=l[f]}}return Ur}var Wr,qn;function Lo(){if(qn)return Wr;qn=1,r.removeEventListener=t,r.addEventListener=r,Wr=r;var e=null;function r(o,s,f,c){return e=e||(document.addEventListener?{add:n,rm:i}:{add:a,rm:u}),e.add(o,s,f,c)}function t(o,s,f,c){return e=e||(document.addEventListener?{add:n,rm:i}:{add:a,rm:u}),e.rm(o,s,f,c)}function n(o,s,f,c){o.addEventListener(s,f,c)}function i(o,s,f,c){o.removeEventListener(s,f,c)}function a(o,s,f,c){if(c)throw new Error("cannot useCapture in oldIE");o.attachEvent("on"+s,f)}function u(o,s,f,c){o.detachEvent("on"+s,f)}return Wr}var Hr,Rn;function mt(){if(Rn)return Hr;Rn=1,Hr=i,i.compile=bo();var e=i.compileTemplate=No(),r=Lo(),t="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xlink";function i(u,o){var s=a(u);if(o===void 0)return s;for(var f=Object.keys(o),c=0;c<f.length;++c){var d=f[c],l=o[d];d==="link"?s.link(l):s.attr(d,l)}return s}function a(u){var o=u;if(typeof u=="string")o=window.document.createElementNS(t,u);else if(u.simplesvg)return u;var s;return o.simplesvg=!0,o.attr=p,o.append=l,o.link=g,o.text=y,o.on=c,o.off=d,o.dataSource=f,o;function f(v){return s||(s=e(o)),s.link(v),o}function c(v,h,m){return r.addEventListener(o,v,h,m),o}function d(v,h,m){return r.removeEventListener(o,v,h,m),o}function l(v){var h=i(v);return o.appendChild(h),h}function p(v,h){return arguments.length===2?(h!==null?o.setAttributeNS(null,v,h):o.removeAttributeNS(null,v),o):o.getAttributeNS(null,v)}function g(v){return arguments.length?(o.setAttributeNS(n,"xlink:href",v),o):o.getAttributeNS(n,"xlink:href")}function y(v){return v!==void 0?(o.textContent=v,o):o.textContent}}return Hr}var Qr,kn;function gi(){if(kn)return Qr;kn=1,Qr=n;var e=mt(),r=oe(),t=ht();function n(){var i,a,u=0,o=0,s,f=1,c={},d={},l=function(x){return e("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},p=function(x,b){x.attr("x",b.x-5).attr("y",b.y-5)},g=function(x){return e("line").attr("stroke","#999")},y=function(x,b,P){x.attr("x1",b.x).attr("y1",b.y).attr("x2",P.x).attr("y2",P.y)},v=function(x){x.fire("rescaled")},h={x:0,y:0},m={x:0,y:0},N={x:0,y:0},w=function(){if(i){var x="matrix("+f+", 0, 0,"+f+","+u+","+o+")";i.attr("transform",x)}};a=A();var L={getNodeUI:function(x){return c[x]},getLinkUI:function(x){return d[x]},node:function(x){if(typeof x=="function")return l=x,this},link:function(x){if(typeof x=="function")return g=x,this},placeNode:function(x){return p=x,this},placeLink:function(x){return y=x,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(x,b){u=x,o=b,w()},inputManager:t,translateRel:function(x,b){var P=a.createSVGPoint(),R=i.getCTM(),M=a.createSVGPoint().matrixTransform(R.inverse());P.x=x,P.y=b,P=P.matrixTransform(R.inverse()),P.x=(P.x-M.x)*R.a,P.y=(P.y-M.y)*R.d,R.e+=P.x,R.f+=P.y;var q="matrix("+R.a+", 0, 0,"+R.d+","+R.e+","+R.f+")";i.attr("transform",q)},scale:function(x,b){var P=a.createSVGPoint();P.x=b.x,P.y=b.y,P=P.matrixTransform(i.getCTM().inverse());var R=a.createSVGMatrix().translate(P.x,P.y).scale(x).translate(-P.x,-P.y),M=i.getCTM().multiply(R);f=M.a,u=M.e,o=M.f;var q="matrix("+M.a+", 0, 0,"+M.d+","+M.e+","+M.f+")";return i.attr("transform",q),v(this),f},resetScale:function(){f=1;var x="matrix(1, 0, 0, 1, 0, 0)";return i.attr("transform",x),v(this),this},init:function(x){x.appendChild(a),w(),typeof s=="function"&&s(a)},release:function(x){a&&x&&x.removeChild(a)},addLink:function(x,b){var P=g(x);if(P)return P.position=b,P.link=x,d[x.id]=P,i.childElementCount>0?i.insertBefore(P,i.firstChild):i.appendChild(P),P},releaseLink:function(x){var b=d[x.id];b&&(i.removeChild(b),delete d[x.id])},addNode:function(x,b){var P=l(x);if(P)return P.position=b,P.node=x,c[x.id]=P,i.appendChild(P),P},releaseNode:function(x){var b=c[x.id];b&&(i.removeChild(b),delete c[x.id])},renderNodes:function(){for(var x in c)if(c.hasOwnProperty(x)){var b=c[x];h.x=b.position.x,h.y=b.position.y,p(b,h,b.node)}},renderLinks:function(){for(var x in d)if(d.hasOwnProperty(x)){var b=d[x];m.x=b.position.from.x,m.y=b.position.from.y,N.x=b.position.to.x,N.y=b.position.to.y,y(b,m,N,b.link)}},getGraphicsRoot:function(x){return typeof x=="function"&&(a?x(a):s=x),a},getSvgRoot:function(){return a}};return r(L),L;function A(){var x=e("svg");return i=e("g").attr("buffered-rendering","dynamic"),x.appendChild(i),x}}return Qr}var Zr,In;function Po(){if(In)return Zr;In=1;var e=ei();Zr=r();function r(){return typeof window=="undefined"?e:{on:t,off:n}}function t(i,a){window.addEventListener(i,a)}function n(i,a){window.removeEventListener(i,a)}return Zr}var Kr,Dn;function To(){if(Dn)return Kr;Dn=1,Kr=s;var e=oe(),r=fi(),t=gi(),n=Po(),i=ht(),a=ai(),u=ui(),o=vt();function s(f,c){var d=30;c=c||{};var l=c.layout,p=c.graphics,g=c.container,y=c.interactive!==void 0?c.interactive:!0,v,h,m=!1,N=!0,w=!1,L=!1,A=!1,x={offsetX:0,offsetY:0,scale:1},b=e({}),P;return{run:function(D){return m||(M(),S(),X(),_(),j(),m=!0),T(D),this},reset:function(){p.resetScale(),_(),x.scale=1},pause:function(){A=!0,h.stop()},resume:function(){A=!1,h.restart()},rerender:function(){return q(),this},zoomOut:function(){return $(!0)},zoomIn:function(){return $(!1)},getTransform:function(){return x},moveTo:function(D,z){p.graphCenterChanged(x.offsetX-D*x.scale,x.offsetY-z*x.scale),q()},getGraphics:function(){return p},getLayout:function(){return l},dispose:function(){Xe()},on:function(D,z){return b.on(D,z),this},off:function(D,z){return b.off(D,z),this}};function R(D){return typeof y=="string"?y.indexOf(D)>=0:typeof y=="boolean"?y:!0}function M(){g=g||window.document.body,l=l||r(f,{springLength:80,springCoeff:2e-4}),p=p||t(f,{container:g}),c.hasOwnProperty("renderLinks")||(c.renderLinks=!0),c.prerender=c.prerender||0,v=(p.inputManager||i)(f,p)}function q(){p.beginRender(),c.renderLinks&&p.renderLinks(),p.renderNodes(),p.endRender()}function F(){return w=l.step()&&!L,q(),!w}function T(D){h||(D!==void 0?h=a(function(){if(D-=1,D<0){var z=!1;return z}return F()},d):h=a(F,d))}function E(){A||(w=!1,h.restart())}function S(){if(typeof c.prerender=="number"&&c.prerender>0)for(var D=0;D<c.prerender;D+=1)l.step()}function _(){var D=l.getGraphRect(),z=u(g),K=(D.x2+D.x1)/2,te=(D.y2+D.y1)/2;x.offsetX=z.width/2-(K*x.scale-K),x.offsetY=z.height/2-(te*x.scale-te),p.graphCenterChanged(x.offsetX,x.offsetY),N=!1}function C(D){var z=l.getNodePosition(D.id);p.addNode(D,z)}function B(D){p.releaseNode(D)}function O(D){var z=l.getLinkPosition(D.id);p.addLink(D,z)}function H(D){p.releaseLink(D)}function G(D){if(R("node")){var z=!1;v.bindDragNDrop(D,{onStart:function(){z=l.isNodePinned(D),l.pinNode(D,!0),L=!0,E()},onDrag:function(K,te){var wt=l.getNodePosition(D.id);l.setNodePosition(D.id,wt.x+te.x/x.scale,wt.y+te.y/x.scale),L=!0,q()},onStop:function(){l.pinNode(D,z),L=!1}})}}function U(D){v.bindDragNDrop(D,null)}function X(){p.init(g),f.forEachNode(C),c.renderLinks&&f.forEachLink(O)}function ae(){p.release(g)}function ge(D){var z=D.node;D.changeType==="add"?(C(z),G(z),N&&_()):D.changeType==="remove"?(U(z),B(z),f.getNodesCount()===0&&(N=!0)):D.changeType==="update"&&(U(z),B(z),C(z),G(z))}function Ge(D){var z=D.link;if(D.changeType==="add")c.renderLinks&&O(z);else if(D.changeType==="remove")c.renderLinks&&H(z);else if(D.changeType==="update")throw"Update type is not implemented. TODO: Implement me!"}function k(D){var z,K;for(z=0;z<D.length;z+=1)K=D[z],K.node?ge(K):K.link&&Ge(K);E()}function I(){_(),F()}function Y(){P&&(P.release(),P=null)}function V(){f.off("changed",k)}function $(D,z){if(!z){var K=u(g);z={x:K.width/2,y:K.height/2}}var te=Math.pow(1+.4,D?-.2:.2);return x.scale=p.scale(te,z),q(),b.fire("scale",x.scale),x.scale}function j(){n.on("resize",I),Y(),R("drag")&&(P=o(g),P.onDrag(function(D,z){p.translateRel(z.x,z.y),q(),b.fire("drag",z)})),R("scroll")&&(P||(P=o(g)),P.onScroll(function(D,z,K){$(z<0,K)})),f.forEachNode(G),V(),f.on("changed",k)}function Xe(){m=!1,V(),Y(),n.off("resize",I),b.off(),h.stop(),f.forEachLink(function(D){c.renderLinks&&H(D)}),f.forEachNode(function(D){U(D),B(D)}),l.dispose(),ae()}}return Kr}var qe=Te,mi={lazyExtend:function(){return pe().apply(this,arguments)},randomIterator:function(){return qe.randomIterator.apply(qe,arguments)},random:function(){return qe.random.apply(qe,arguments)},events:oe()};mi.Graph={version:$i(),graph:dt(),serializer:function(){return{loadFromJSON:ji(),storeToJSON:Ui()}},centrality:Ji(),operations:eo(),geom:function(){return{intersect:Jn(),intersectRect:ro()}},webgl:Ye(),webglInputEvents:ti(),generator:function(){return no()},Input:{domInputManager:ht(),webglInputManager:oi()},Utils:{dragndrop:vt(),findElementPosition:ii(),timer:ai(),getDimension:ui(),events:io()},Layout:{forceDirected:fi(),constant:yo()},View:{Texture:ci(),webglAtlas:li(),webglImageNodeProgram:wo(),webglLinkProgram:di(),webglNodeProgram:vi(),webglLine:hi(),webglSquare:pi(),webglImage:xo(),webglGraphics:_o(),_webglUtil:{parseColor:gt()},svgGraphics:gi(),renderer:To(),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:si(),svg:mt(),BrowserInfo:ni()};var So=mi;const Be=Gi(So);function Ao(e){let r;return{c(){r=ee("div"),_t(r,"width","600px"),_t(r,"height","400px"),ke(r,"class","svelte-1to12uv")},m(t,n){ut(t,r,n),e[6](r)},p:J,i:J,o:J,d(t){t&&ze(r),e[6](null)}}}function Co(e,r,t){let n;$n(e,it,d=>t(5,n=d));let{graph:i}=r,{layoutSpecification:a}=r,{positions:u}=r,o,s,f;Un(()=>{s=a(i),u.length!==0&&i.forEachNode(d=>{let l=u[d.id];s.setNodePosition(d.id,l.x,l.y)}),t(4,f=Be.Graph.View.renderer(i,{layout:s,container:o,graphics:Be.Graph.View.webglGraphics(),renderLinks:!0,prerender:!0})),f.run()}),qi(()=>{let d=[];i.forEachNode(l=>{let p=s.getNodePosition(l.id);d.push({x:p.x,y:p.y})}),Zn.set(d)});function c(d){rt[d?"unshift":"push"](()=>{o=d,t(0,o)})}return e.$$set=d=>{"graph"in d&&t(1,i=d.graph),"layoutSpecification"in d&&t(2,a=d.layoutSpecification),"positions"in d&&t(3,u=d.positions)},e.$$.update=()=>{e.$$.dirty&48&&(f&&!n?f.pause():f&&n&&f.resume())},[o,i,a,u,f,n,c]}class qo extends lt{constructor(r){super(),ct(this,r,Co,Ao,Pe,{graph:1,layoutSpecification:2,positions:3})}}const Ro={springLength:10,springCoeff:5e-4,dragCoeff:.02,gravity:-1.2};function ko(e){return Be.Graph.Layout.forceDirected(e,Ro)}function Io(e){const r=+this._x.call(null,e),t=+this._y.call(null,e);return yi(this.cover(r,t),r,t,e)}function yi(e,r,t,n){if(isNaN(r)||isNaN(t))return e;var i,a=e._root,u={data:n},o=e._x0,s=e._y0,f=e._x1,c=e._y1,d,l,p,g,y,v,h,m;if(!a)return e._root=u,e;for(;a.length;)if((y=r>=(d=(o+f)/2))?o=d:f=d,(v=t>=(l=(s+c)/2))?s=l:c=l,i=a,!(a=a[h=v<<1|y]))return i[h]=u,e;if(p=+e._x.call(null,a.data),g=+e._y.call(null,a.data),r===p&&t===g)return u.next=a,i?i[h]=u:e._root=u,e;do i=i?i[h]=new Array(4):e._root=new Array(4),(y=r>=(d=(o+f)/2))?o=d:f=d,(v=t>=(l=(s+c)/2))?s=l:c=l;while((h=v<<1|y)===(m=(g>=l)<<1|p>=d));return i[m]=a,i[h]=u,e}function Do(e){var r,t,n=e.length,i,a,u=new Array(n),o=new Array(n),s=1/0,f=1/0,c=-1/0,d=-1/0;for(t=0;t<n;++t)isNaN(i=+this._x.call(null,r=e[t]))||isNaN(a=+this._y.call(null,r))||(u[t]=i,o[t]=a,i<s&&(s=i),i>c&&(c=i),a<f&&(f=a),a>d&&(d=a));if(s>c||f>d)return this;for(this.cover(s,f).cover(c,d),t=0;t<n;++t)yi(this,u[t],o[t],e[t]);return this}function Mo(e,r){if(isNaN(e=+e)||isNaN(r=+r))return this;var t=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(e))+1,a=(n=Math.floor(r))+1;else{for(var u=i-t||1,o=this._root,s,f;t>e||e>=i||n>r||r>=a;)switch(f=(r<n)<<1|e<t,s=new Array(4),s[f]=o,o=s,u*=2,f){case 0:i=t+u,a=n+u;break;case 1:t=i-u,a=n+u;break;case 2:i=t+u,n=a-u;break;case 3:t=i-u,n=a-u;break}this._root&&this._root.length&&(this._root=o)}return this._x0=t,this._y0=n,this._x1=i,this._y1=a,this}function Bo(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function Fo(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Q(e,r,t,n,i){this.node=e,this.x0=r,this.y0=t,this.x1=n,this.y1=i}function Oo(e,r,t){var n,i=this._x0,a=this._y0,u,o,s,f,c=this._x1,d=this._y1,l=[],p=this._root,g,y;for(p&&l.push(new Q(p,i,a,c,d)),t==null?t=1/0:(i=e-t,a=r-t,c=e+t,d=r+t,t*=t);g=l.pop();)if(!(!(p=g.node)||(u=g.x0)>c||(o=g.y0)>d||(s=g.x1)<i||(f=g.y1)<a))if(p.length){var v=(u+s)/2,h=(o+f)/2;l.push(new Q(p[3],v,h,s,f),new Q(p[2],u,h,v,f),new Q(p[1],v,o,s,h),new Q(p[0],u,o,v,h)),(y=(r>=h)<<1|e>=v)&&(g=l[l.length-1],l[l.length-1]=l[l.length-1-y],l[l.length-1-y]=g)}else{var m=e-+this._x.call(null,p.data),N=r-+this._y.call(null,p.data),w=m*m+N*N;if(w<t){var L=Math.sqrt(t=w);i=e-L,a=r-L,c=e+L,d=r+L,n=p.data}}return n}function zo(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var r,t=this._root,n,i,a,u=this._x0,o=this._y0,s=this._x1,f=this._y1,c,d,l,p,g,y,v,h;if(!t)return this;if(t.length)for(;;){if((g=c>=(l=(u+s)/2))?u=l:s=l,(y=d>=(p=(o+f)/2))?o=p:f=p,r=t,!(t=t[v=y<<1|g]))return this;if(!t.length)break;(r[v+1&3]||r[v+2&3]||r[v+3&3])&&(n=r,h=v)}for(;t.data!==e;)if(i=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,i?(a?i.next=a:delete i.next,this):r?(a?r[v]=a:delete r[v],(t=r[0]||r[1]||r[2]||r[3])&&t===(r[3]||r[2]||r[1]||r[0])&&!t.length&&(n?n[h]=t:this._root=t),this):(this._root=a,this)}function Yo(e){for(var r=0,t=e.length;r<t;++r)this.remove(e[r]);return this}function Vo(){return this._root}function Go(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function Xo(e){var r=[],t,n=this._root,i,a,u,o,s;for(n&&r.push(new Q(n,this._x0,this._y0,this._x1,this._y1));t=r.pop();)if(!e(n=t.node,a=t.x0,u=t.y0,o=t.x1,s=t.y1)&&n.length){var f=(a+o)/2,c=(u+s)/2;(i=n[3])&&r.push(new Q(i,f,c,o,s)),(i=n[2])&&r.push(new Q(i,a,c,f,s)),(i=n[1])&&r.push(new Q(i,f,u,o,c)),(i=n[0])&&r.push(new Q(i,a,u,f,c))}return this}function $o(e){var r=[],t=[],n;for(this._root&&r.push(new Q(this._root,this._x0,this._y0,this._x1,this._y1));n=r.pop();){var i=n.node;if(i.length){var a,u=n.x0,o=n.y0,s=n.x1,f=n.y1,c=(u+s)/2,d=(o+f)/2;(a=i[0])&&r.push(new Q(a,u,o,c,d)),(a=i[1])&&r.push(new Q(a,c,o,s,d)),(a=i[2])&&r.push(new Q(a,u,d,c,f)),(a=i[3])&&r.push(new Q(a,c,d,s,f))}t.push(n)}for(;n=t.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this}function jo(e){return e[0]}function Uo(e){return arguments.length?(this._x=e,this):this._x}function Wo(e){return e[1]}function Ho(e){return arguments.length?(this._y=e,this):this._y}function wi(e,r,t){var n=new yt(r==null?jo:r,t==null?Wo:t,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function yt(e,r,t,n,i,a){this._x=e,this._y=r,this._x0=t,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function Mn(e){for(var r={data:e.data},t=r;e=e.next;)t=t.next={data:e.data};return r}var Z=wi.prototype=yt.prototype;Z.copy=function(){var e=new yt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,t,n;if(!r)return e;if(!r.length)return e._root=Mn(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=Mn(n));return e};Z.add=Io;Z.addAll=Do;Z.cover=Mo;Z.data=Bo;Z.extent=Fo;Z.find=Oo;Z.remove=zo;Z.removeAll=Yo;Z.root=Vo;Z.size=Go;Z.visit=Xo;Z.visitAfter=$o;Z.x=Uo;Z.y=Ho;function be(e){return function(){return e}}function le(e){return(e()-.5)*1e-6}function Qo(e){return e.index}function Bn(e,r){var t=e.get(r);if(!t)throw new Error("node not found: "+r);return t}function Zo(e){var r=Qo,t=d,n,i=be(30),a,u,o,s,f,c=1;e==null&&(e=[]);function d(v){return 1/Math.min(o[v.source.index],o[v.target.index])}function l(v){for(var h=0,m=e.length;h<c;++h)for(var N=0,w,L,A,x,b,P,R;N<m;++N)w=e[N],L=w.source,A=w.target,x=A.x+A.vx-L.x-L.vx||le(f),b=A.y+A.vy-L.y-L.vy||le(f),P=Math.sqrt(x*x+b*b),P=(P-a[N])/P*v*n[N],x*=P,b*=P,A.vx-=x*(R=s[N]),A.vy-=b*R,L.vx+=x*(R=1-R),L.vy+=b*R}function p(){if(u){var v,h=u.length,m=e.length,N=new Map(u.map((L,A)=>[r(L,A,u),L])),w;for(v=0,o=new Array(h);v<m;++v)w=e[v],w.index=v,typeof w.source!="object"&&(w.source=Bn(N,w.source)),typeof w.target!="object"&&(w.target=Bn(N,w.target)),o[w.source.index]=(o[w.source.index]||0)+1,o[w.target.index]=(o[w.target.index]||0)+1;for(v=0,s=new Array(m);v<m;++v)w=e[v],s[v]=o[w.source.index]/(o[w.source.index]+o[w.target.index]);n=new Array(m),g(),a=new Array(m),y()}}function g(){if(u)for(var v=0,h=e.length;v<h;++v)n[v]=+t(e[v],v,e)}function y(){if(u)for(var v=0,h=e.length;v<h;++v)a[v]=+i(e[v],v,e)}return l.initialize=function(v,h){u=v,f=h,p()},l.links=function(v){return arguments.length?(e=v,p(),l):e},l.id=function(v){return arguments.length?(r=v,l):r},l.iterations=function(v){return arguments.length?(c=+v,l):c},l.strength=function(v){return arguments.length?(t=typeof v=="function"?v:be(+v),g(),l):t},l.distance=function(v){return arguments.length?(i=typeof v=="function"?v:be(+v),y(),l):i},l}var Ko={value:()=>{}};function xi(){for(var e=0,r=arguments.length,t={},n;e<r;++e){if(!(n=arguments[e]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new Me(t)}function Me(e){this._=e}function Jo(e,r){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}Me.prototype=xi.prototype={constructor:Me,on:function(e,r){var t=this._,n=Jo(e+"",t),i,a=-1,u=n.length;if(arguments.length<2){for(;++a<u;)if((i=(e=n[a]).type)&&(i=ea(t[i],e.name)))return i;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++a<u;)if(i=(e=n[a]).type)t[i]=Fn(t[i],e.name,r);else if(r==null)for(i in t)t[i]=Fn(t[i],e.name,null);return this},copy:function(){var e={},r=this._;for(var t in r)e[t]=r[t].slice();return new Me(e)},call:function(e,r){if((i=arguments.length-2)>0)for(var t=new Array(i),n=0,i,a;n<i;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,i=a.length;n<i;++n)a[n].value.apply(r,t)},apply:function(e,r,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,a=n.length;i<a;++i)n[i].value.apply(r,t)}};function ea(e,r){for(var t=0,n=e.length,i;t<n;++t)if((i=e[t]).name===r)return i.value}function Fn(e,r,t){for(var n=0,i=e.length;n<i;++n)if(e[n].name===r){e[n]=Ko,e=e.slice(0,n).concat(e.slice(n+1));break}return t!=null&&e.push({name:r,value:t}),e}var ve=0,we=0,ye=0,_i=1e3,Fe,xe,Oe=0,ie=0,Ve=0,Le=typeof performance=="object"&&performance.now?performance:Date,Ei=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bi(){return ie||(Ei(ra),ie=Le.now()+Ve)}function ra(){ie=0}function ot(){this._call=this._time=this._next=null}ot.prototype=Ni.prototype={constructor:ot,restart:function(e,r,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?bi():+t)+(r==null?0:+r),!this._next&&xe!==this&&(xe?xe._next=this:Fe=this,xe=this),this._call=e,this._time=t,at()},stop:function(){this._call&&(this._call=null,this._time=1/0,at())}};function Ni(e,r,t){var n=new ot;return n.restart(e,r,t),n}function ta(){bi(),++ve;for(var e=Fe,r;e;)(r=ie-e._time)>=0&&e._call.call(void 0,r),e=e._next;--ve}function On(){ie=(Oe=Le.now())+Ve,ve=we=0;try{ta()}finally{ve=0,ia(),ie=0}}function na(){var e=Le.now(),r=e-Oe;r>_i&&(Ve-=r,Oe=e)}function ia(){for(var e,r=Fe,t,n=1/0;r;)r._call?(n>r._time&&(n=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:Fe=t);xe=e,at(n)}function at(e){if(!ve){we&&(we=clearTimeout(we));var r=e-ie;r>24?(e<1/0&&(we=setTimeout(On,e-Le.now()-Ve)),ye&&(ye=clearInterval(ye))):(ye||(Oe=Le.now(),ye=setInterval(na,_i)),ve=1,Ei(On))}}const oa=1664525,aa=1013904223,zn=4294967296;function ua(){let e=1;return()=>(e=(oa*e+aa)%zn)/zn}function fa(e){return e.x}function sa(e){return e.y}var ca=10,la=Math.PI*(3-Math.sqrt(5));function da(e){var r,t=1,n=.001,i=1-Math.pow(n,1/300),a=0,u=.6,o=new Map,s=Ni(d),f=xi("tick","end"),c=ua();e==null&&(e=[]);function d(){l(),f.call("tick",r),t<n&&(s.stop(),f.call("end",r))}function l(y){var v,h=e.length,m;y===void 0&&(y=1);for(var N=0;N<y;++N)for(t+=(a-t)*i,o.forEach(function(w){w(t)}),v=0;v<h;++v)m=e[v],m.fx==null?m.x+=m.vx*=u:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=u:(m.y=m.fy,m.vy=0);return r}function p(){for(var y=0,v=e.length,h;y<v;++y){if(h=e[y],h.index=y,h.fx!=null&&(h.x=h.fx),h.fy!=null&&(h.y=h.fy),isNaN(h.x)||isNaN(h.y)){var m=ca*Math.sqrt(.5+y),N=y*la;h.x=m*Math.cos(N),h.y=m*Math.sin(N)}(isNaN(h.vx)||isNaN(h.vy))&&(h.vx=h.vy=0)}}function g(y){return y.initialize&&y.initialize(e,c),y}return p(),r={tick:l,restart:function(){return s.restart(d),r},stop:function(){return s.stop(),r},nodes:function(y){return arguments.length?(e=y,p(),o.forEach(g),r):e},alpha:function(y){return arguments.length?(t=+y,r):t},alphaMin:function(y){return arguments.length?(n=+y,r):n},alphaDecay:function(y){return arguments.length?(i=+y,r):+i},alphaTarget:function(y){return arguments.length?(a=+y,r):a},velocityDecay:function(y){return arguments.length?(u=1-y,r):1-u},randomSource:function(y){return arguments.length?(c=y,o.forEach(g),r):c},force:function(y,v){return arguments.length>1?(v==null?o.delete(y):o.set(y,g(v)),r):o.get(y)},find:function(y,v,h){var m=0,N=e.length,w,L,A,x,b;for(h==null?h=1/0:h*=h,m=0;m<N;++m)x=e[m],w=y-x.x,L=v-x.y,A=w*w+L*L,A<h&&(b=x,h=A);return b},on:function(y,v){return arguments.length>1?(f.on(y,v),r):f.on(y)}}}function va(){var e,r,t,n,i=be(-30),a,u=1,o=1/0,s=.81;function f(p){var g,y=e.length,v=wi(e,fa,sa).visitAfter(d);for(n=p,g=0;g<y;++g)r=e[g],v.visit(l)}function c(){if(e){var p,g=e.length,y;for(a=new Array(g),p=0;p<g;++p)y=e[p],a[y.index]=+i(y,p,e)}}function d(p){var g=0,y,v,h=0,m,N,w;if(p.length){for(m=N=w=0;w<4;++w)(y=p[w])&&(v=Math.abs(y.value))&&(g+=y.value,h+=v,m+=v*y.x,N+=v*y.y);p.x=m/h,p.y=N/h}else{y=p,y.x=y.data.x,y.y=y.data.y;do g+=a[y.data.index];while(y=y.next)}p.value=g}function l(p,g,y,v){if(!p.value)return!0;var h=p.x-r.x,m=p.y-r.y,N=v-g,w=h*h+m*m;if(N*N/s<w)return w<o&&(h===0&&(h=le(t),w+=h*h),m===0&&(m=le(t),w+=m*m),w<u&&(w=Math.sqrt(u*w)),r.vx+=h*p.value*n/w,r.vy+=m*p.value*n/w),!0;if(p.length||w>=o)return;(p.data!==r||p.next)&&(h===0&&(h=le(t),w+=h*h),m===0&&(m=le(t),w+=m*m),w<u&&(w=Math.sqrt(u*w)));do p.data!==r&&(N=a[p.data.index]*n/w,r.vx+=h*N,r.vy+=m*N);while(p=p.next)}return f.initialize=function(p,g){e=p,t=g,c()},f.strength=function(p){return arguments.length?(i=typeof p=="function"?p:be(+p),c(),f):i},f.distanceMin=function(p){return arguments.length?(u=p*p,f):Math.sqrt(u)},f.distanceMax=function(p){return arguments.length?(o=p*p,f):Math.sqrt(o)},f.theta=function(p){return arguments.length?(s=p*p,f):Math.sqrt(s)},f}const Re={springLength:20,springCoeff:1,springIterations:10,gravity:-30};function ha(e){let r=[],t=[],n=new Map,i=new Map;e.forEachNode(o=>{const s={id:o.id},f=r.length;r.push(s),n.set(o.id,f)}),e.forEachLink(o=>{const s=n.get(o.fromId),f=n.get(o.toId),c=t.length,d={source:s,target:f,index:c};t.push(d),i.set(o.id,d)});var a=da(r).force("charge",va().strength(Re.gravity)).force("link",Zo(t).strength(Re.springCoeff).distance(Re.springLength).iterations(Re.springIterations));return a.stop(),{step:function(){a.tick()},getNodePosition:u,getLinkPosition:function(o){var s=i.get(o);return{from:s.source,to:s.target}},getGraphRect:function(){var o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return r.forEach(function(d){d.x<o&&(o=d.x),d.x>f&&(f=d.x),d.y<s&&(s=d.y),d.y>c&&(c=d.y)}),{x1:o,x2:f,y1:s,y2:c}},isNodePinned:function(){return!1},pinNode:function(){},dispose:function(){},setNodePosition:function(o,s,f){var c=u(o);c.x=s,c.y=f}};function u(o){var s=n.get(o);return r[s]}}function Yn(e){let r,t;return r=new qo({props:{graph:e[0],layoutSpecification:e[3][e[1]],positions:Si(Zn)}}),{c(){Hn(r.$$.fragment)},m(n,i){ft(r,n,i),t=!0},p(n,i){const a={};i&1&&(a.graph=n[0]),i&2&&(a.layoutSpecification=n[3][n[1]]),r.$set(a)},i(n){t||(Ee(r.$$.fragment,n),t=!0)},o(n){De(r.$$.fragment,n),t=!1},d(n){st(r,n)}}}function pa(e){let r,t,n,i,a,u,o,s,f,c,d,l,p,g=e[2]?"Pause":"Continue",y,v,h,m,N=e[1],w,L,A;a=new Vi({});let x=Yn(e);return{c(){r=ee("main"),t=ee("h1"),t.textContent="Vite + Svelte",n=Se(),i=ee("div"),Hn(a.$$.fragment),u=Se(),o=ee("div"),s=ee("button"),f=re("Switch layout (now: "),c=re(e[1]),d=re(")"),l=Se(),p=ee("button"),y=re(g),v=re(" simulation"),h=Se(),m=ee("div"),x.c(),ke(i,"class","card"),ke(o,"class","card"),ke(m,"class","card")},m(b,P){ut(b,r,P),W(r,t),W(r,n),W(r,i),ft(a,i,null),W(r,u),W(r,o),W(o,s),W(s,f),W(s,c),W(s,d),W(o,l),W(o,p),W(p,y),W(p,v),W(r,h),W(r,m),x.m(m,null),w=!0,L||(A=[Jr(s,"click",e[4]),Jr(p,"click",e[5])],L=!0)},p(b,[P]){(!w||P&2)&&et(c,b[1]),(!w||P&4)&&g!==(g=b[2]?"Pause":"Continue")&&et(y,g),P&2&&Pe(N,N=b[1])?(Mi(),De(x,1,1,J),Bi(),x=Yn(b),x.c(),Ee(x,1),x.m(m,null)):x.p(b,P)},i(b){w||(Ee(a.$$.fragment,b),Ee(x),w=!0)},o(b){De(a.$$.fragment,b),De(x),w=!1},d(b){b&&ze(r),st(a),x.d(b),L=!1,he(A)}}}function ga(e,r,t){let n;$n(e,it,c=>t(2,n=c));const i=Be.Graph.generator();let a;a=i.grid(6,6);let u="viva",o={viva:ko,d3:ha};function s(){t(1,u=u==="viva"?"d3":"viva")}function f(){Ai(it,n=!n,n)}return Un(()=>{console.log("Shiny:"),console.log(Shiny)}),[a,u,n,o,s,f]}class ma extends lt{constructor(r){super(),ct(this,r,ga,pa,Pe,{})}}new ma({target:document.getElementById("app")});
